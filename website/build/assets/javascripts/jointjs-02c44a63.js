/*! JointJS v0.9.6 - JavaScript diagramming library  2015-12-19 


 This Source Code Form is subject to the terms of the Mozilla Public
 License, v. 2.0. If a copy of the MPL was not distributed with this
 file, You can obtain one at http://mozilla.org/MPL/2.0/.
 */
!function(t,e){if("function"==typeof define&&define.amd)define(["backbone","lodash","jquery"],function(n,i,r){return n.$=r,e(t,n,i,r)});else if("undefined"!=typeof exports){var n=require("backbone"),i=require("lodash"),r=n.$=require("jquery");module.exports=e(t,n,i,r)}else{var n=t.Backbone,i=t._,r=n.$=t.jQuery||t.$;t.joint=e(t,n,i,r),t.g=t.joint.g,t.V=t.Vectorizer=t.joint.V}}(this,function(t,e,n,i){var r,o,s=function(){function t(e,n){if(!(this instanceof t))return new t(e,n);var i;void 0===n&&Object(e)!==e?(i=e.split(-1===e.indexOf("@")?" ":"@"),this.x=parseInt(i[0],10),this.y=parseInt(i[1],10)):Object(e)===e?(this.x=e.x,this.y=e.y):(this.x=e,this.y=n)}function e(n,i){return this instanceof e?(this.start=t(n),void(this.end=t(i))):new e(n,i)}function n(t,e,i,r){return this instanceof n?(void 0===e&&(e=t.y,i=t.width,r=t.height,t=t.x),this.x=t,this.y=e,this.width=i,void(this.height=r)):new n(t,e,i,r)}function i(e,n,r){return this instanceof i?(e=t(e),this.x=e.x,this.y=e.y,this.a=n,void(this.b=r)):new i(e,n,r)}var r=Math,o=r.abs,a=r.cos,l=r.sin,c=r.sqrt,u=r.min,h=r.max,g=(r.atan,r.atan2),d=(r.acos,r.round),p=r.floor,f=r.PI,m=r.random,I=function(t){return 180*t/f%360},v=function(t,e){return e=e||!1,t=e?t:t%360,t*f/180},C=function(t,e){return e*Math.round(t/e)},y=function(t){return t%360+(0>t?360:0)};t.prototype={toString:function(){return this.x+"@"+this.y},adhereToRect:function(t){return t.containsPoint(this)?this:(this.x=u(h(this.x,t.x),t.x+t.width),this.y=u(h(this.y,t.y),t.y+t.height),this)},theta:function(e){e=t(e);var n=-(e.y-this.y),i=e.x-this.x,r=10,o=0==n.toFixed(r)&&0==i.toFixed(r)?0:g(n,i);return 0>o&&(o=2*f+o),180*o/f},distance:function(t){return e(this,t).length()},manhattanDistance:function(t){return o(t.x-this.x)+o(t.y-this.y)},offset:function(t,e){return this.x+=t||0,this.y+=e||0,this},magnitude:function(){return c(this.x*this.x+this.y*this.y)||.01},update:function(t,e){return this.x=t||0,this.y=e||0,this},round:function(t){return this.x=t?this.x.toFixed(t):d(this.x),this.y=t?this.y.toFixed(t):d(this.y),this},normalize:function(t){var e=(t||1)/this.magnitude();return this.x=e*this.x,this.y=e*this.y,this},difference:function(e){return t(this.x-e.x,this.y-e.y)},bearing:function(t){return e(this,t).bearing()},toPolar:function(e){e=e&&t(e)||t(0,0);var n=this.x,i=this.y;return this.x=c((n-e.x)*(n-e.x)+(i-e.y)*(i-e.y)),this.y=v(e.theta(t(n,i))),this},rotate:function(e,n){n=(n+360)%360,this.toPolar(e),this.y+=v(n);var i=t.fromPolar(this.x,this.y,e);return this.x=i.x,this.y=i.y,this},move:function(e,n){var i=v(t(e).theta(this));return this.offset(a(i)*n,-l(i)*n)},changeInAngle:function(e,n,i){return t(this).offset(-e,-n).theta(i)-this.theta(i)},equals:function(t){return this.x===t.x&&this.y===t.y},snapToGrid:function(t,e){return this.x=C(this.x,t),this.y=C(this.y,e||t),this},reflection:function(e){return t(e).move(this,this.distance(e))},clone:function(){return t(this)}},t.fromPolar=function(e,n,i){i=i&&t(i)||t(0,0);var r=o(e*a(n)),s=o(e*l(n)),c=y(I(n));return 90>c?s=-s:180>c?(r=-r,s=-s):270>c&&(r=-r),t(i.x+r,i.y+s)},t.random=function(e,n,i,r){return t(p(m()*(n-e+1)+e),p(m()*(r-i+1)+i))},e.prototype={toString:function(){return this.start.toString()+" "+this.end.toString()},length:function(){return c(this.squaredLength())},squaredLength:function(){var t=this.start.x,e=this.start.y,n=this.end.x,i=this.end.y;return(t-=n)*t+(e-=i)*e},midpoint:function(){return t((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},intersection:function(e){var n=t(this.end.x-this.start.x,this.end.y-this.start.y),i=t(e.end.x-e.start.x,e.end.y-e.start.y),r=n.x*i.y-n.y*i.x,o=t(e.start.x-this.start.x,e.start.y-this.start.y),s=o.x*i.y-o.y*i.x,a=o.x*n.y-o.y*n.x;if(0===r||0>s*r||0>a*r)return null;if(r>0){if(s>r||a>r)return null}else if(r>s||r>a)return null;return t(this.start.x+s*n.x/r,this.start.y+s*n.y/r)},bearing:function(){var t=v(this.start.y),e=v(this.end.y),n=this.start.x,i=this.end.x,r=v(i-n),o=l(r)*a(e),s=a(t)*l(e)-l(t)*a(e)*a(r),c=I(g(o,s)),u=["NE","E","SE","S","SW","W","NW","N"],h=c-22.5;return 0>h&&(h+=360),h=parseInt(h/45),u[h]},pointAt:function(e){var n=(1-e)*this.start.x+e*this.end.x,i=(1-e)*this.start.y+e*this.end.y;return t(n,i)},pointOffset:function(t){return((this.end.x-this.start.x)*(t.y-this.start.y)-(this.end.y-this.start.y)*(t.x-this.start.x))/2},clone:function(){return e(this)}},n.prototype={toString:function(){return this.origin().toString()+" "+this.corner().toString()},equals:function(t){var e=s.rect(this).normalize(),n=s.rect(t).normalize();return e.x===n.x&&e.y===n.y&&e.width===n.width&&e.height===n.height},origin:function(){return t(this.x,this.y)},corner:function(){return t(this.x+this.width,this.y+this.height)},topRight:function(){return t(this.x+this.width,this.y)},bottomLeft:function(){return t(this.x,this.y+this.height)},center:function(){return t(this.x+this.width/2,this.y+this.height/2)},intersect:function(t){var e=this.origin(),i=this.corner(),r=t.origin(),o=t.corner();if(o.x<=e.x||o.y<=e.y||r.x>=i.x||r.y>=i.y)return null;var s=Math.max(e.x,r.x),a=Math.max(e.y,r.y);return n(s,a,Math.min(i.x,o.x)-s,Math.min(i.y,o.y)-a)},union:function(t){var e=this.origin(),i=this.corner(),r=t.origin(),o=t.corner(),s=Math.min(e.x,r.x),a=Math.min(e.y,r.y),l=Math.max(i.x,o.x),c=Math.max(i.y,o.y);return n(s,a,l-s,c-a)},sideNearestToPoint:function(e){e=t(e);var n=e.x-this.x,i=this.x+this.width-e.x,r=e.y-this.y,o=this.y+this.height-e.y,s=n,a="left";return s>i&&(s=i,a="right"),s>r&&(s=r,a="top"),s>o&&(s=o,a="bottom"),a},containsPoint:function(e){return e=t(e),e.x>=this.x&&e.x<=this.x+this.width&&e.y>=this.y&&e.y<=this.y+this.height?!0:!1},containsRect:function(t){var e=n(t).normalize(),i=e.width,r=e.height,o=e.x,s=e.y,a=this.width,l=this.height;if(0>(a|l|i|r))return!1;var c=this.x,u=this.y;if(c>o||u>s)return!1;if(a+=c,i+=o,o>=i){if(a>=c||i>a)return!1}else if(a>=c&&i>a)return!1;if(l+=u,r+=s,s>=r){if(l>=u||r>l)return!1}else if(l>=u&&r>l)return!1;return!0},pointNearestToPoint:function(e){if(e=t(e),this.containsPoint(e)){var n=this.sideNearestToPoint(e);switch(n){case"right":return t(this.x+this.width,e.y);case"left":return t(this.x,e.y);case"bottom":return t(e.x,this.y+this.height);case"top":return t(e.x,this.y)}}return e.adhereToRect(this)},intersectionWithLineFromCenterToPoint:function(n,i){n=t(n);var r,o=t(this.x+this.width/2,this.y+this.height/2);i&&n.rotate(o,i);for(var s=[e(this.origin(),this.topRight()),e(this.topRight(),this.corner()),e(this.corner(),this.bottomLeft()),e(this.bottomLeft(),this.origin())],a=e(o,n),l=s.length-1;l>=0;--l){var c=s[l].intersection(a);if(null!==c){r=c;break}}return r&&i&&r.rotate(o,-i),r},moveAndExpand:function(t){return this.x+=t.x||0,this.y+=t.y||0,this.width+=t.width||0,this.height+=t.height||0,this},round:function(t){return this.x=t?this.x.toFixed(t):d(this.x),this.y=t?this.y.toFixed(t):d(this.y),this.width=t?this.width.toFixed(t):d(this.width),this.height=t?this.height.toFixed(t):d(this.height),this},normalize:function(){var t=this.x,e=this.y,n=this.width,i=this.height;return this.width<0&&(t=this.x+this.width,n=-this.width),this.height<0&&(e=this.y+this.height,i=-this.height),this.x=t,this.y=e,this.width=n,this.height=i,this},bbox:function(t){var e=v(t||0),i=o(l(e)),r=o(a(e)),s=this.width*r+this.height*i,c=this.width*i+this.height*r;return n(this.x+(this.width-s)/2,this.y+(this.height-c)/2,s,c)},snapToGrid:function(t,e){var n=this.origin().snapToGrid(t,e),i=this.corner().snapToGrid(t,e);return this.x=n.x,this.y=n.y,this.width=i.x-n.x,this.height=i.y-n.y,this},clone:function(){return n(this)}},i.prototype={toString:function(){return t(this.x,this.y).toString()+" "+this.a+" "+this.b},bbox:function(){return n(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},intersectionWithLineFromCenterToPoint:function(e,n){e=t(e),n&&e.rotate(t(this.x,this.y),n);var i,r=e.x-this.x,o=e.y-this.y;if(0===r)return i=this.bbox().pointNearestToPoint(e),n?i.rotate(t(this.x,this.y),-n):i;var s=o/r,a=s*s,l=this.a*this.a,u=this.b*this.b,h=c(1/(1/l+a/u));h=0>r?-h:h;var g=s*h;return i=t(this.x+h,this.y+g),n?i.rotate(t(this.x,this.y),-n):i},clone:function(){return i(this)}};var A={curveThroughPoints:function(t){for(var e=this.getCurveControlPoints(t),n=["M",t[0].x,t[0].y],i=0;i<e[0].length;i++)n.push("C",e[0][i].x,e[0][i].y,e[1][i].x,e[1][i].y,t[i+1].x,t[i+1].y);return n},getCurveControlPoints:function(e){var n,i=[],r=[],o=e.length-1;if(1==o)return i[0]=t((2*e[0].x+e[1].x)/3,(2*e[0].y+e[1].y)/3),r[0]=t(2*i[0].x-e[0].x,2*i[0].y-e[0].y),[i,r];var s=[];for(n=1;o-1>n;n++)s[n]=4*e[n].x+2*e[n+1].x;s[0]=e[0].x+2*e[1].x,s[o-1]=(8*e[o-1].x+e[o].x)/2;var a=this.getFirstControlPoints(s);for(n=1;o-1>n;++n)s[n]=4*e[n].y+2*e[n+1].y;s[0]=e[0].y+2*e[1].y,s[o-1]=(8*e[o-1].y+e[o].y)/2;var l=this.getFirstControlPoints(s);for(n=0;o>n;n++)i.push(t(a[n],l[n])),o-1>n?r.push(t(2*e[n+1].x-a[n+1],2*e[n+1].y-l[n+1])):r.push(t((e[o].x+a[o-1])/2,(e[o].y+l[o-1])/2));return[i,r]},getFirstControlPoints:function(t){var e=t.length,n=[],i=[],r=2;n[0]=t[0]/r;for(var o=1;e>o;o++)i[o]=1/r,r=(e-1>o?4:3.5)-i[o],n[o]=(t[o]-n[o-1])/r;for(o=1;e>o;o++)n[e-o-1]-=i[e-o]*n[e-o];return n},getInversionSolver:function(t,e,n,i){function r(t,e){var n=o[t],i=o[e];return function(r){var o=(t%3?3:1)*(e%3?3:1),s=r.x*(n.y-i.y)+r.y*(i.x-n.x)+n.x*i.y-n.y*i.x;return o*s}}var o=arguments;return function(n){var i=3*r(2,3)(e),o=r(1,3)(t)/i,s=-r(2,3)(t)/i,a=o*r(3,1)(n)+s*(r(3,0)(n)+r(2,1)(n))+r(2,0)(n),l=o*r(3,0)(n)+s*r(2,0)(n)+r(1,0)(n);return l/(l-a)}},getCurveDivider:function(t,n,i,r){return function(o){var s=e(t,n).pointAt(o),a=e(n,i).pointAt(o),l=e(i,r).pointAt(o),c=e(s,a).pointAt(o),u=e(a,l).pointAt(o),h=e(c,u).pointAt(o);return[{p0:t,p1:s,p2:c,p3:h},{p0:h,p1:u,p2:l,p3:r}]}}},b={linear:function(t,e,n){var i=t[1]-t[0],r=e[1]-e[0];return(n-t[0])/i*r+e[0]||0}};return{toDeg:I,toRad:v,snapToGrid:C,normalizeAngle:y,point:t,line:e,rect:n,ellipse:i,bezier:A,scale:b}}();r=o=function(){function t(){var t=++w+"";return"v-"+t}function e(t){return(t||"").replace(/ /g,"\xa0")}function n(t){return t===Object(t)}function i(t){return"[object Array]"==Object.prototype.toString.call(t)}function r(t){var e='<svg xmlns="'+A.xmlns+'" xmlns:xlink="'+A.xlink+'" version="'+b+'">'+(t||"")+"</svg>",n=o(e,{async:!1});return n.documentElement}function o(t,e){e=e||{};var n;try{var i=new DOMParser;"undefined"!=typeof e.async&&(i.async=e.async),n=i.parseFromString(t,"text/xml")}catch(r){n=void 0}if(!n||n.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+t);return n}function a(t,e,n){var i,o;if(!t)return void 0;if("object"==typeof t)return new g(t);if(e=e||{},"svg"===t.toLowerCase())return new g(r());if("<"===t[0]){var s=r(t);if(s.childNodes.length>1){var a=[];for(i=0,o=s.childNodes.length;o>i;i++){var c=s.childNodes[i];a.push(new g(document.importNode(c,!0)))}return a}return new g(document.importNode(s.firstChild,!0))}t=document.createElementNS(A.xmlns,t);for(var u in e)l(t,u,e[u]);for("[object Array]"!=Object.prototype.toString.call(n)&&(n=[n]),i=0,o=n[0]&&n.length||0;o>i;i++){var h=n[i];t.appendChild(h instanceof g?h.node:h)}return new g(t)}function l(t,e,n){if(e.indexOf(":")>-1){var i=e.split(":");t.setAttributeNS(A[i[0]],i[1],n)}else"id"===e?t.id=n:t.setAttribute(e,n)}function c(t){var e,n,i;if(t){var r=/[ ,]+/,o=t.match(/translate\((.*)\)/);o&&(e=o[1].split(r));var s=t.match(/rotate\((.*)\)/);s&&(n=s[1].split(r));var a=t.match(/scale\((.*)\)/);a&&(i=a[1].split(r))}var l=i&&i[0]?parseFloat(i[0]):1;return{translate:{tx:e&&e[0]?parseInt(e[0],10):0,ty:e&&e[1]?parseInt(e[1],10):0},rotate:{angle:n&&n[0]?parseInt(n[0],10):0,cx:n&&n[1]?parseInt(n[1],10):void 0,cy:n&&n[2]?parseInt(n[2],10):void 0},scale:{sx:l,sy:i&&i[1]?parseFloat(i[1]):l}}}function u(t,e){var n=e.x*t.a+e.y*t.c+0,i=e.x*t.b+e.y*t.d+0;return{x:n,y:i}}function h(t){var e=u(t,{x:0,y:1}),n=u(t,{x:1,y:0}),i=180/Math.PI*Math.atan2(e.y,e.x)-90,r=180/Math.PI*Math.atan2(n.y,n.x);return{translateX:t.e,translateY:t.f,scaleX:Math.sqrt(t.a*t.a+t.b*t.b),scaleY:Math.sqrt(t.c*t.c+t.d*t.d),skewX:i,skewY:r,rotation:i}}function g(e){e instanceof g&&(e=e.node),this.node=e,this.node.id||(this.node.id=t())}function d(t){t=a(t);var e=["M",t.attr("x1"),t.attr("y1"),"L",t.attr("x2"),t.attr("y2")].join(" ");return e}function p(t){t=a(t);for(var e,n=t.node.points,i=[],r=0;r<n.length;r++)e=n[r],i.push(0===r?"M":"L",e.x,e.y);return i.push("Z"),i.join(" ")}function f(t){t=a(t);for(var e,n=t.node.points,i=[],r=0;r<n.length;r++)e=n[r],i.push(0===r?"M":"L",e.x,e.y);return i.join(" ")}function m(t){t=a(t);var e=parseFloat(t.attr("cx"))||0,n=parseFloat(t.attr("cy"))||0,i=parseFloat(t.attr("r")),r=i*x,o=["M",e,n-i,"C",e+r,n-i,e+i,n-r,e+i,n,"C",e+i,n+r,e+r,n+i,e,n+i,"C",e-r,n+i,e-i,n+r,e-i,n,"C",e-i,n-r,e-r,n-i,e,n-i,"Z"].join(" ");return o}function I(t){t=a(t);var e=parseFloat(t.attr("cx"))||0,n=parseFloat(t.attr("cy"))||0,i=parseFloat(t.attr("rx")),r=parseFloat(t.attr("ry"))||i,o=i*x,s=r*x,l=["M",e,n-r,"C",e+o,n-r,e+i,n-s,e+i,n,"C",e+i,n+s,e+o,n+r,e,n+r,"C",e-o,n+r,e-i,n+s,e-i,n,"C",e-i,n-s,e-o,n-r,e,n-r,"Z"].join(" ");return l}function v(t){t=a(t);var e,n=parseFloat(t.attr("x"))||0,i=parseFloat(t.attr("y"))||0,r=parseFloat(t.attr("width"))||0,o=parseFloat(t.attr("height"))||0,l=parseFloat(t.attr("rx"))||0,c=parseFloat(t.attr("ry"))||0,u=s.rect(n,i,r,o);if(l||c){var h=n+r,g=i+o;e=["M",n+l,i,"L",h-l,i,"Q",h,i,h,i+c,"L",h,i+o-c,"Q",h,g,h-l,g,"L",n+l,g,"Q",n,g,n,g-l,"L",n,i+c,"Q",n,i,n+l,i,"Z"].join(" ")}else e=["M",u.origin().x,u.origin().y,"H",u.corner().x,"V",u.corner().y,"H",u.origin().x,"V",u.origin().y,"Z"].join(" ");return e}function C(t){var e=t.rx||t["top-rx"]||0,n=t.rx||t["bottom-rx"]||0,i=t.ry||t["top-ry"]||0,r=t.ry||t["bottom-ry"]||0;return["M",t.x,t.y+i,"v",t.height-i-r,"a",n,r,0,0,0,n,r,"h",t.width-2*n,"a",n,r,0,0,0,n,-r,"v",-(t.height-r-i),"a",e,i,0,0,0,-e,-i,"h",-(t.width-2*e),"a",e,i,0,0,0,-e,i].join(" ")}var y="object"==typeof window&&!(!window.SVGAngle&&!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"));if(!y)return function(){};var A={xmlns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"},b="1.1",w=0;g.prototype={getTransformToElement:function(t){return t.getScreenCTM().inverse().multiply(this.node.getScreenCTM())},translate:function(t,e,n){n=n||{},e=e||0;var i=this.attr("transform")||"",r=c(i);if("undefined"==typeof t)return r.translate;i=i.replace(/translate\([^\)]*\)/g,"").trim();var o=n.absolute?t:r.translate.tx+t,s=n.absolute?e:r.translate.ty+e,a="translate("+o+","+s+")";return this.attr("transform",(a+" "+i).trim()),this},rotate:function(t,e,n,i){i=i||{};var r=this.attr("transform")||"",o=c(r);if("undefined"==typeof t)return o.rotate;r=r.replace(/rotate\([^\)]*\)/g,"").trim(),t%=360;var s=i.absolute?t:o.rotate.angle+t,a=void 0!==e&&void 0!==n?","+e+","+n:"",l="rotate("+s+a+")";return this.attr("transform",(r+" "+l).trim()),this},scale:function(t,e){e="undefined"==typeof e?t:e;var n=this.attr("transform")||"",i=c(n);if("undefined"==typeof t)return i.scale;n=n.replace(/scale\([^\)]*\)/g,"").trim();var r="scale("+t+","+e+")";return this.attr("transform",(n+" "+r).trim()),this},bbox:function(t,e){if(!this.node.ownerSVGElement)return{x:0,y:0,width:0,height:0};var n;try{n=this.node.getBBox(),n={x:n.x,y:n.y,width:n.width,height:n.height}}catch(i){n={x:this.node.clientLeft,y:this.node.clientTop,width:this.node.clientWidth,height:this.node.clientHeight}}if(t)return n;var r=this.getTransformToElement(e||this.node.ownerSVGElement);return N.transformRect(n,r)},text:function(t,r){t=e(t),r=r||{};var o,s=t.split("\n"),l=0,c=this.attr("y");c||this.attr("y","0.8em"),this.attr("display",t?null:"none"),this.node.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.node.textContent="";var u=this.node;if(r.textPath){var h=this.find("defs");0===h.length&&(h=a("defs"),this.append(h));var g=Object(r.textPath)===r.textPath?r.textPath.d:r.textPath;if(g){var d=a("path",{d:g});h.append(d)}var p=a("textPath");!r.textPath["xlink:href"]&&d&&p.attr("xlink:href","#"+d.node.id),Object(r.textPath)===r.textPath&&p.attr(r.textPath),this.append(p),u=p.node}for(var f=0,l=0;l<s.length;l++){var m=s[l],I=r.lineHeight||"1em";"auto"===r.lineHeight&&(I="1.5em");var v=N("tspan",{dy:0==l?"0em":I,x:this.attr("x")||0});if(v.addClass("v-line"),m)if(r.annotations){for(var C=0,y=N.annotateString(s[l],i(r.annotations)?r.annotations:[r.annotations],{offset:-f,includeAnnotationIndices:r.includeAnnotationIndices}),A=0;A<y.length;A++){var b=y[A];if(n(b)){var w=parseInt(b.attrs["font-size"],10);w&&w>C&&(C=w),o=N("tspan",b.attrs),r.includeAnnotationIndices&&o.attr("annotations",b.annotations),b.attrs["class"]&&o.addClass(b.attrs["class"]),o.node.textContent=b.t}else o=document.createTextNode(b||" ");v.append(o)}"auto"===r.lineHeight&&C&&0!==l&&v.attr("dy",1.2*C+"px")}else v.node.textContent=m;else v.addClass("v-empty-line"),v.node.style.opacity=0,v.node.textContent="-";N(u).append(v),f+=m.length+1}return this},attr:function(t,e){if("undefined"==typeof t){for(var n=this.node.attributes,i={},r=0;r<n.length;r++)i[n[r].nodeName]=n[r].nodeValue;return i}if("string"==typeof t&&"undefined"==typeof e)return this.node.getAttribute(t);if("object"==typeof t)for(var o in t)t.hasOwnProperty(o)&&l(this.node,o,t[o]);else l(this.node,t,e);return this},remove:function(){this.node.parentNode&&this.node.parentNode.removeChild(this.node)},append:function(t){var e=t;"[object Array]"!==Object.prototype.toString.call(t)&&(e=[t]);for(var n=0,i=e.length;i>n;n++)t=e[n],this.node.appendChild(t instanceof g?t.node:t);return this},prepend:function(t){this.node.insertBefore(t instanceof g?t.node:t,this.node.firstChild)},svg:function(){return this.node instanceof window.SVGSVGElement?this:N(this.node.ownerSVGElement)},defs:function(){var t=this.svg().node.getElementsByTagName("defs");return t&&t.length?N(t[0]):void 0},clone:function(){var e=N(this.node.cloneNode(!0));return e.node.id=t(),e},findOne:function(t){var e=this.node.querySelector(t);return e?N(e):void 0},find:function(t){var e=this.node.querySelectorAll(t);return Array.prototype.map.call(e,N)},index:function(){for(var t=0,e=this.node.previousSibling;e;)1===e.nodeType&&t++,e=e.previousSibling;return t},findParentByClass:function(t,e){e=e||this.node.ownerSVGElement;for(var n=this.node.parentNode;n&&n!==e;){if(N(n).hasClass(t))return N(n);n=n.parentNode}return null},toLocalPoint:function(t,e){var n=this.svg().node,i=n.createSVGPoint();i.x=t,i.y=e;try{var r=i.matrixTransform(n.getScreenCTM().inverse()),o=this.getTransformToElement(n).inverse()}catch(s){return i}return r.matrixTransform(o)},translateCenterToPoint:function(t){var e=this.bbox(),n=s.rect(e).center();this.translate(t.x-n.x,t.y-n.y)},translateAndAutoOrient:function(t,e,n){var i=this.scale();this.attr("transform",""),this.scale(i.sx,i.sy);var r=this.svg().node,o=this.bbox(!1,n),a=r.createSVGTransform();a.setTranslate(-o.x-o.width/2,-o.y-o.height/2);var l=r.createSVGTransform(),c=s.point(t).changeInAngle(t.x-e.x,t.y-e.y,e);l.setRotate(c,0,0);var u=r.createSVGTransform(),g=s.point(t).move(e,o.width/2);u.setTranslate(t.x+(t.x-g.x),t.y+(t.y-g.y));var d=this.getTransformToElement(n),p=r.createSVGTransform();p.setMatrix(u.matrix.multiply(l.matrix.multiply(a.matrix.multiply(d))));var f=h(p.matrix);return this.translate(f.translateX,f.translateY),this.rotate(f.rotation),this},animateAlongPath:function(t,e){var n=N("animateMotion",t),i=N("mpath",{"xlink:href":"#"+N(e).node.id});n.append(i),this.append(n);try{n.node.beginElement()}catch(r){if("fake"===document.documentElement.getAttribute("smiling")){var o=n.node;o.animators=[];var s=o.getAttribute("id");s&&(id2anim[s]=o);for(var a=getTargets(o),l=0,c=a.length;c>l;l++){var u=a[l],h=new Animator(o,u,l);animators.push(h),o.animators[l]=h,h.register()}}}},hasClass:function(t){return new RegExp("(\\s|^)"+t+"(\\s|$)").test(this.node.getAttribute("class"))},addClass:function(t){if(!this.hasClass(t)){var e=this.node.getAttribute("class")||"";this.node.setAttribute("class",(e+" "+t).trim())}return this},removeClass:function(t){if(this.hasClass(t)){var e=this.node.getAttribute("class").replace(new RegExp("(\\s|^)"+t+"(\\s|$)","g"),"$2");this.node.setAttribute("class",e)}return this},toggleClass:function(t,e){var n="undefined"==typeof e?this.hasClass(t):!e;return n?this.removeClass(t):this.addClass(t),this},sample:function(t){t=t||1;for(var e,n=this.node,i=n.getTotalLength(),r=[],o=0;i>o;)e=n.getPointAtLength(o),r.push({x:e.x,y:e.y,distance:o}),o+=t;return r},convertToPath:function(){var t=a("path");t.attr(this.attr());var e=this.convertToPathData();return e&&t.attr("d",e),t},convertToPathData:function(){var t=this.node.tagName.toUpperCase();switch(t){case"PATH":return this.attr("d");case"LINE":return d(this.node);case"POLYGON":return p(this.node);case"POLYLINE":return f(this.node);case"ELLIPSE":return I(this.node);case"CIRCLE":return m(this.node);case"RECT":return v(this.node)}throw new Error(t+" cannot be converted to PATH.")},findIntersection:function(t,e){var n=this.svg().node;e=e||n;var i=s.rect(this.bbox(!1,e)),r=i.center(),o=i.intersectionWithLineFromCenterToPoint(t);if(!o)return void 0;var a=this.node.localName.toUpperCase();if("RECT"===a){var l=s.rect(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),c=this.getTransformToElement(e),u=N.decomposeMatrix(c),h=n.createSVGTransform();h.setRotate(-u.rotation,r.x,r.y);var g=N.transformRect(l,h.matrix.multiply(c));o=s.rect(g).intersectionWithLineFromCenterToPoint(t,u.rotation)}else if("PATH"===a||"POLYGON"===a||"POLYLINE"===a||"CIRCLE"===a||"ELLIPSE"===a){for(var d="PATH"===a?this:this.convertToPath(),p=d.sample(),f=1/0,m=[],I=0,v=p.length;v>I;I++){var C=p[I],y=N.createSVGPoint(C.x,C.y);y=y.matrixTransform(this.getTransformToElement(e)),C=s.point(y);var A=C.distance(r),b=1.1*C.distance(t),w=A+b;f>w?(f=w,m=[{sample:C,refDistance:b}]):f+1>w&&m.push({sample:C,refDistance:b})}m.sort(function(t,e){return t.refDistance-e.refDistance}),m.length>0&&(o=m[0].sample)}return o}};var x=.5522847498307935,N=a;N.isVElement=function(t){return t instanceof g},N.decomposeMatrix=h,N.rectToPath=C;var M=N("svg").node;return N.createSVGMatrix=function(t){var e=M.createSVGMatrix();for(var n in t)e[n]=t[n];return e},N.createSVGTransform=function(){return M.createSVGTransform()},N.createSVGPoint=function(t,e){var n=M.createSVGPoint();return n.x=t,n.y=e,n},N.transformRect=function(t,e){var n=M.createSVGPoint();n.x=t.x,n.y=t.y;var i=n.matrixTransform(e);n.x=t.x+t.width,n.y=t.y;var r=n.matrixTransform(e);n.x=t.x+t.width,n.y=t.y+t.height;var o=n.matrixTransform(e);n.x=t.x,n.y=t.y+t.height;var s=n.matrixTransform(e),a=Math.min(i.x,r.x,o.x,s.x),l=Math.max(i.x,r.x,o.x,s.x),c=Math.min(i.y,r.y,o.y,s.y),u=Math.max(i.y,r.y,o.y,s.y);return{x:a,y:c,width:l-a,height:u-c}},N.transformPoint=function(t,e){return N.createSVGPoint(t.x,t.y).matrixTransform(e)},N.styleToObject=function(t){for(var e={},n=t.split(";"),i=0;i<n.length;i++){var r=n[i],o=r.split("=");e[o[0].trim()]=o[1].trim()}return e},N.createSlicePathData=function(t,e,n,i){var r=2*Math.PI-1e-6,o=t,s=e,a=n,l=i,c=(a>l&&(c=a,a=l,l=c),l-a),u=c<Math.PI?"0":"1",h=Math.cos(a),g=Math.sin(a),d=Math.cos(l),p=Math.sin(l);return c>=r?o?"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+-s+"A"+s+","+s+" 0 1,1 0,"+s+"M0,"+o+"A"+o+","+o+" 0 1,0 0,"+-o+"A"+o+","+o+" 0 1,0 0,"+o+"Z":"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+-s+"A"+s+","+s+" 0 1,1 0,"+s+"Z":o?"M"+s*h+","+s*g+"A"+s+","+s+" 0 "+u+",1 "+s*d+","+s*p+"L"+o*d+","+o*p+"A"+o+","+o+" 0 "+u+",0 "+o*h+","+o*g+"Z":"M"+s*h+","+s*g+"A"+s+","+s+" 0 "+u+",1 "+s*d+","+s*p+"L0,0Z"},N.mergeAttrs=function(t,e){for(var i in e)"class"===i?t[i]=t[i]?t[i]+" "+e[i]:e[i]:"style"===i?n(t[i])&&n(e[i])?t[i]=N.mergeAttrs(t[i],e[i]):n(t[i])?t[i]=N.mergeAttrs(t[i],N.styleToObject(e[i])):n(e[i])?t[i]=N.mergeAttrs(N.styleToObject(t[i]),e[i]):t[i]=N.mergeAttrs(N.styleToObject(t[i]),N.styleToObject(e[i])):t[i]=e[i];return t},N.annotateString=function(t,e,i){e=e||[],i=i||{},offset=i.offset||0;for(var r,o,s,a=[],l=[],c=0;c<t.length;c++){o=l[c]=t[c];for(var u=0;u<e.length;u++){var h=e[u],g=h.start+offset,d=h.end+offset;c>=g&&d>c&&(n(o)?o.attrs=N.mergeAttrs(N.mergeAttrs({},o.attrs),h.attrs):o=l[c]={t:t[c],attrs:h.attrs},i.includeAnnotationIndices&&(o.annotations||(o.annotations=[])).push(u))}s=l[c-1],s?n(o)&&n(s)?JSON.stringify(o.attrs)===JSON.stringify(s.attrs)?r.t+=o.t:(a.push(r),r=o):n(o)?(a.push(r),r=o):n(s)?(a.push(r),r=o):r=(r||"")+o:r=o}return r&&a.push(r),a},N.findAnnotationsAtIndex=function(t,e){if(!t)return[];var n=[];return t.forEach(function(t){t.start<e&&e<=t.end&&n.push(t)}),n},N.findAnnotationsBetweenIndexes=function(t,e,n){if(!t)return[];var i=[];return t.forEach(function(t){(e>=t.start&&e<t.end||n>t.start&&n<=t.end||t.start>=e&&t.end<n)&&i.push(t)}),i},N.shiftAnnotations=function(t,e,n){return t?(t.forEach(function(t){t.start>=e&&(t.start+=n,t.end+=n)}),t):t},N.sanitizeText=e,N}();var a={version:"0.9.6",dia:{},ui:{},layout:{},shapes:{},format:{},connectors:{},routers:{},mvc:{views:{}},setTheme:function(t,e){e=e||{},n.invoke(a.mvc.views,"setTheme",t,e),a.mvc.View.prototype.options.theme=t},util:{hashCode:function(t){var e=0;if(0==t.length)return e;for(var n=0;n<t.length;n++){var i=t.charCodeAt(n);e=(e<<5)-e+i,e&=e}return e},getByPath:function(t,e,n){n=n||"/";for(var i,r=e.split(n);r.length;){if(i=r.shift(),!(Object(t)===t&&i in t))return void 0;t=t[i]}return t},setByPath:function(t,e,n,i){i=i||"/";var r=e.split(i),o=t,s=0;if(e.indexOf(i)>-1){for(var a=r.length;a-1>s;s++)o=o[r[s]]||(o[r[s]]={});o[r[a-1]]=n}else t[e]=n;return t},unsetByPath:function(t,e,n){n=n||"/";var i=e.lastIndexOf(n);if(i>-1){var r=a.util.getByPath(t,e.substr(0,i),n);r&&delete r[e.slice(i+1)]}else delete t[e];return t},flattenObject:function(t,e,n){e=e||"/";var i={};for(var r in t)if(t.hasOwnProperty(r)){var o="object"==typeof t[r];if(o&&n&&n(t[r])&&(o=!1),o){var s=this.flattenObject(t[r],e,n);for(var a in s)s.hasOwnProperty(a)&&(i[r+e+a]=s[a])}else i[r]=t[r]}return i},uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"==t?e:3&e|8;return n.toString(16)})},guid:function(t){return this.guid.id=this.guid.id||1,t.id=void 0===t.id?"j_"+this.guid.id++:t.id,t.id},mixin:function(){for(var t=arguments[0],e=1,i=arguments.length;i>e;e++){var r=arguments[e];(Object(r)===r||n.isFunction(r)||null!==r&&void 0!==r)&&n.each(r,function(e,i){return this.mixin.deep&&Object(e)===e?(t[i]||(t[i]=n.isArray(e)?[]:{}),void this.mixin(t[i],e)):void(t[i]!==e&&(this.mixin.supplement&&t.hasOwnProperty(i)||(t[i]=e)))},this)}return t},supplement:function(){this.mixin.supplement=!0;var t=this.mixin.apply(this,arguments);return this.mixin.supplement=!1,t},deepMixin:function(){this.mixin.deep=!0;var t=this.mixin.apply(this,arguments);return this.mixin.deep=!1,t},deepSupplement:function(){this.mixin.deep=this.mixin.supplement=!0;var t=this.mixin.apply(this,arguments);return this.mixin.deep=this.mixin.supplement=!1,t},normalizeEvent:function(t){var e=t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0];if(e){for(var n in t)void 0===e[n]&&(e[n]=t[n]);return e}return t},nextFrame:function(){var t;if("undefined"!=typeof window&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),!t){var e=0;t=function(t){var n=(new Date).getTime(),i=Math.max(0,16-(n-e)),r=setTimeout(function(){t(n+i)},i);return e=n+i,r}}return function(e,i){return t(i?n.bind(e,i):e)}}(),cancelFrame:function(){var t,e="undefined"!=typeof window;return e&&(t=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),t=t||clearTimeout,e?n.bind(t,window):t}(),shapePerimeterConnectionPoint:function(t,e,n,i){var o,a;if(!n){var l=e.$(".scalable")[0],c=e.$(".rotatable")[0];l&&l.firstChild?n=l.firstChild:c&&c.firstChild&&(n=c.firstChild)}return n?(a=r(n).findIntersection(i,t.paper.viewport),a||(o=s.rect(r(n).bbox(!1,t.paper.viewport)))):(o=e.model.getBBox(),a=o.intersectionWithLineFromCenterToPoint(i)),a||o.center()},breakText:function(t,e,n,i){i=i||{};var o=e.width,s=e.height,a=i.svgDocument||r("svg").node,l=r("<text><tspan></tspan></text>").attr(n||{}).node,c=l.firstChild,u=document.createTextNode("");c.appendChild(u),a.appendChild(l),i.svgDocument||document.body.appendChild(a);for(var h,g=t.split(" "),d=[],p=[],f=0,m=0,I=g.length;I>f;f++){var v=g[f];if(u.data=p[m]?p[m]+" "+v:v,c.getComputedTextLength()<=o)p[m]=u.data,h&&(d[m++]=!0,h=0);else{if(!p[m]||h){var C=!!h;if(h=v.length-1,C||!h){if(!h){if(!p[m]){p=[];break}g.splice(f,2,v+g[f+1]),I--,d[m++]=!0,f--;continue}g[f]=v.substring(0,h),g[f+1]=v.substring(h)+g[f+1]}else g.splice(f,1,v.substring(0,h),v.substring(h)),I++,m&&!d[m-1]&&m--;f--;continue}m++,f--}if("undefined"!=typeof s){var y=y||1.25*l.getBBox().height;if(y*p.length>s){p.splice(Math.floor(s/y));break}}}return i.svgDocument?a.removeChild(l):document.body.removeChild(a),p.join("\n")},imageToDataUri:function(t,e){if(!t||"data:"===t.substr(0,"data:".length))return setTimeout(function(){e(null,t)},0);var n=document.createElement("canvas"),i=document.createElement("img");i.onload=function(){var r=n.getContext("2d");n.width=i.width,n.height=i.height,r.drawImage(i,0,0);try{var o=(t.split(".").pop()||"png","jpeg"),s=n.toDataURL(o)}catch(a){if(/\.svg$/.test(t)){var l=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");l.open("GET",t,!1),l.send(null);var c=l.responseText;return e(null,"data:image/svg+xml,"+encodeURIComponent(c))}console.error(i.src,"fails to convert",a)}e(null,s)},i.ononerror=function(){e(new Error("Failed to load image."))},i.src=t},getElementBBox:function(t){var e,n=i(t),o=n.offset();if(t.ownerSVGElement){e=r(t).bbox();var s=t.getBoundingClientRect(),a=(s.width-e.width)/2,l=(s.height-e.height)/2;e.x=o.left+a,e.y=o.top+l}else e={x:o.left,y:o.top,width:n.outerWidth(),height:n.outerHeight()};return e},sortElements:function(t,e){var n=i(t),r=n.map(function(){var t=this,e=t.parentNode,n=e.insertBefore(document.createTextNode(""),t.nextSibling);return function(){if(e===this)throw new Error("You can't sort elements if any one is a descendant of another.");e.insertBefore(this,n),e.removeChild(n)}});return Array.prototype.sort.call(n,e).each(function(t){r[t].call(this)})},setAttributesBySelector:function(t,e){var r=i(t);n.each(e,function(t,e){var i=r.find(e).addBack().filter(e);n.has(t,"class")&&(i.addClass(t["class"]),t=n.omit(t,"class")),i.attr(t)})},normalizeSides:function(t){return Object(t)!==t?(t=t||0,{top:t,bottom:t,left:t,right:t}):{top:t.top||0,bottom:t.bottom||0,left:t.left||0,right:t.right||0}},timing:{linear:function(t){return t},quad:function(t){return t*t},cubic:function(t){return t*t*t},inout:function(t){if(0>=t)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(.5>t?n:3*(t-e)+n-.75)},exponential:function(t){return Math.pow(2,10*(t-1))},bounce:function(t){for(var e=0,n=1;1;e+=n,n/=2)if(t>=(7-4*e)/11){var i=(11-6*e-11*t)/4;return-i*i+n*n}},reverse:function(t){return function(e){return 1-t(1-e)}},reflect:function(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}},clamp:function(t,e,n){return e=e||0,n=n||1,function(i){var r=t(i);return e>r?e:r>n?n:r}},back:function(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}},elastic:function(t){return t||(t=1.5),function(e){return Math.pow(2,10*(e-1))*Math.cos(20*Math.PI*t/3*e)}}},interpolate:{number:function(t,e){var n=e-t;return function(e){return t+n*e}},object:function(t,e){var i=n.keys(t);return function(n){var r,o,s={};for(r=i.length-1;-1!=r;r--)o=i[r],s[o]=t[o]+(e[o]-t[o])*n;return s}},hexColor:function(t,e){var n=parseInt(t.slice(1),16),i=parseInt(e.slice(1),16),r=255&n,o=(255&i)-r,s=65280&n,a=(65280&i)-s,l=16711680&n,c=(16711680&i)-l;return function(t){var e=r+o*t&255,n=s+a*t&65280,i=l+c*t&16711680;return"#"+(1<<24|e|n|i).toString(16).slice(1)}},unit:function(t,e){var n=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,i=n.exec(t),r=n.exec(e),o=r[1].indexOf("."),s=o>0?r[1].length-o-1:0;t=+i[1];var a=+r[1]-t,l=i[2];return function(e){return(t+a*e).toFixed(s)+l}}},filter:{outline:function(t){var e='<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${outerRadius}" /><feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${innerRadius}" /><feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/><feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/><feMerge><feMergeNode in="outline"/><feMergeNode in="SourceGraphic"/></feMerge></filter>',i=n.isFinite(t.margin)?t.margin:2,r=n.isFinite(t.width)?t.width:1;
return n.template(e)({color:t.color||"blue",opacity:n.isFinite(t.opacity)?t.opacity:1,outerRadius:i+r,innerRadius:i})},highlight:function(t){var e='<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${width}"/><feComposite result="composed" in="colored" in2="morphed" operator="in"/><feGaussianBlur result="blured" in="composed" stdDeviation="${blur}"/><feBlend in="SourceGraphic" in2="blured" mode="normal"/></filter>';return n.template(e)({color:t.color||"red",width:n.isFinite(t.width)?t.width:1,blur:n.isFinite(t.blur)?t.blur:0,opacity:n.isFinite(t.opacity)?t.opacity:1})},blur:function(t){var e=n.isFinite(t.x)?t.x:2;return n.template('<filter><feGaussianBlur stdDeviation="${stdDeviation}"/></filter>')({stdDeviation:n.isFinite(t.y)?[e,t.y]:e})},dropShadow:function(t){var e="SVGFEDropShadowElement"in window?'<filter><feDropShadow stdDeviation="${blur}" dx="${dx}" dy="${dy}" flood-color="${color}" flood-opacity="${opacity}"/></filter>':'<filter><feGaussianBlur in="SourceAlpha" stdDeviation="${blur}"/><feOffset dx="${dx}" dy="${dy}" result="offsetblur"/><feFlood flood-color="${color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="${opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';return n.template(e)({dx:t.dx||0,dy:t.dy||0,opacity:n.isFinite(t.opacity)?t.opacity:1,color:t.color||"black",blur:n.isFinite(t.blur)?t.blur:4})},grayscale:function(t){var e=n.isFinite(t.amount)?t.amount:1;return n.template('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0"/></filter>')({a:.2126+.7874*(1-e),b:.7152-.7152*(1-e),c:.0722-.0722*(1-e),d:.2126-.2126*(1-e),e:.7152+.2848*(1-e),f:.0722-.0722*(1-e),g:.2126-.2126*(1-e),h:.0722+.9278*(1-e)})},sepia:function(t){var e=n.isFinite(t.amount)?t.amount:1;return n.template('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0"/></filter>')({a:.393+.607*(1-e),b:.769-.769*(1-e),c:.189-.189*(1-e),d:.349-.349*(1-e),e:.686+.314*(1-e),f:.168-.168*(1-e),g:.272-.272*(1-e),h:.534-.534*(1-e),i:.131+.869*(1-e)})},saturate:function(t){var e=n.isFinite(t.amount)?t.amount:1;return n.template('<filter><feColorMatrix type="saturate" values="${amount}"/></filter>')({amount:1-e})},hueRotate:function(t){return n.template('<filter><feColorMatrix type="hueRotate" values="${angle}"/></filter>')({angle:t.angle||0})},invert:function(t){var e=n.isFinite(t.amount)?t.amount:1;return n.template('<filter><feComponentTransfer><feFuncR type="table" tableValues="${amount} ${amount2}"/><feFuncG type="table" tableValues="${amount} ${amount2}"/><feFuncB type="table" tableValues="${amount} ${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:1-e})},brightness:function(t){return n.template('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}"/><feFuncG type="linear" slope="${amount}"/><feFuncB type="linear" slope="${amount}"/></feComponentTransfer></filter>')({amount:n.isFinite(t.amount)?t.amount:1})},contrast:function(t){var e=n.isFinite(t.amount)?t.amount:1;return n.template('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}" intercept="${amount2}"/><feFuncG type="linear" slope="${amount}" intercept="${amount2}"/><feFuncB type="linear" slope="${amount}" intercept="${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:.5-e/2})}},format:{number:function(t,e,n){function i(t){for(var e=t.length,i=[],r=0,o=n.grouping[0];e>0&&o>0;)i.push(t.substring(e-=o,e+o)),o=n.grouping[r=(r+1)%n.grouping.length];return i.reverse().join(n.thousands)}n=n||{currency:["$",""],decimal:".",thousands:",",grouping:[3]};var r=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,o=r.exec(t),s=o[1]||" ",a=o[2]||">",l=o[3]||"",c=o[4]||"",u=o[5],h=+o[6],g=o[7],d=o[8],p=o[9],f=1,m="",I="",v=!1;switch(d&&(d=+d.substring(1)),(u||"0"===s&&"="===a)&&(u=s="0",a="=",g&&(h-=Math.floor((h-1)/4))),p){case"n":g=!0,p="g";break;case"%":f=100,I="%",p="f";break;case"p":f=100,I="%",p="r";break;case"b":case"o":case"x":case"X":"#"===c&&(m="0"+p.toLowerCase());case"c":case"d":v=!0,d=0;break;case"s":f=-1,p="r"}"$"===c&&(m=n.currency[0],I=n.currency[1]),"r"!=p||d||(p="g"),null!=d&&("g"==p?d=Math.max(1,Math.min(21,d)):("e"==p||"f"==p)&&(d=Math.max(0,Math.min(20,d))));var C=u&&g;if(v&&e%1)return"";var y=0>e||0===e&&0>1/e?(e=-e,"-"):l,A=I;if(0>f){var b=this.prefix(e,d);e=b.scale(e),A=b.symbol+I}else e*=f;e=this.convert(p,e,d);var w=e.lastIndexOf("."),x=0>w?e:e.substring(0,w),N=0>w?"":n.decimal+e.substring(w+1);!u&&g&&n.grouping&&(x=i(x));var M=m.length+x.length+N.length+(C?0:y.length),j=h>M?new Array(M=h-M+1).join(s):"";return C&&(x=i(j+x)),y+=m,e=x+N,("<"===a?y+e+j:">"===a?j+y+e:"^"===a?j.substring(0,M>>=1)+y+e+j.substring(M):y+(C?e:j+e))+A},string:function(t,e){for(var n,i="{",r=!1,o=[];-1!==(n=t.indexOf(i));){var s,a,l;if(s=t.slice(0,n),r){a=s.split(":"),l=a.shift().split("."),s=e;for(var c=0;c<l.length;c++)s=s[l[c]];a.length&&(s=this.number(a,s))}o.push(s),t=t.slice(n+1),i=(r=!r)?"}":"{"}return o.push(t),o.join("")},convert:function(t,e,n){switch(t){case"b":return e.toString(2);case"c":return String.fromCharCode(e);case"o":return e.toString(8);case"x":return e.toString(16);case"X":return e.toString(16).toUpperCase();case"g":return e.toPrecision(n);case"e":return e.toExponential(n);case"f":return e.toFixed(n);case"r":return(e=this.round(e,this.precision(e,n))).toFixed(Math.max(0,Math.min(20,this.precision(e*(1+1e-15),n))));default:return e+""}},round:function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)},precision:function(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)},prefix:function(t,e){var i=n.map(["y","z","a","f","p","n","\xc2\xb5","m","","k","M","G","T","P","E","Z","Y"],function(t,e){var n=Math.pow(10,3*Math.abs(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}),r=0;return t&&(0>t&&(t*=-1),e&&(t=this.round(t,this.precision(t,e))),r=1+Math.floor(1e-12+Math.log(t)/Math.LN10),r=Math.max(-24,Math.min(24,3*Math.floor((0>=r?r+1:r-1)/3)))),i[8+r/3]}}}};if(a.mvc.View=e.View.extend({options:{theme:"default"},theme:null,themeClassNamePrefix:"joint-theme-",requireSetThemeOverride:!1,constructor:function(t){e.View.call(this,t)},initialize:function(t){this.requireSetThemeOverride=t&&!!t.theme,this.options=n.extend({},a.mvc.View.prototype.options||{},this.options||{},t||{}),n.bindAll(this,"setTheme","onSetTheme","remove","onRemove"),a.mvc.views[this.cid]=this,this.setTheme(this.options.theme),this.init()},init:function(){},setTheme:function(t,e){return e=e||{},this.theme&&this.requireSetThemeOverride&&!e.override?void 0:(this.onSetTheme(this.theme,t),this.theme&&this.$el.removeClass(this.themeClassNamePrefix+this.theme),this.$el.addClass(this.themeClassNamePrefix+t),this.theme=t,this)},onSetTheme:function(t,e){},remove:function(){return this.onRemove(),a.mvc.views[this.cid]=null,e.View.prototype.remove.apply(this,arguments),this},onRemove:function(){}}),a.dia.GraphCells=e.Collection.extend({cellNamespace:a.shapes,initialize:function(t,e){this.on("change:z",this.sort,this),e.cellNamespace&&(this.cellNamespace=e.cellNamespace),this.graph=e.graph},model:function(t,e){var n=e.collection,i=n.cellNamespace,r="link"===t.type?a.dia.Link:a.util.getByPath(i,t.type,".")||a.dia.Element,o=new r(t,e);return o.graph=n.graph,o},comparator:function(t){return t.get("z")||0}}),a.dia.Graph=e.Model.extend({initialize:function(t,n){n=n||{};var i=new a.dia.GraphCells([],{model:n.cellModel,cellNamespace:n.cellNamespace,graph:this});e.Model.prototype.set.call(this,"cells",i),i.on("all",this.trigger,this),this._out={},this._in={},this._nodes={},this._edges={},i.on("add",this._restructureOnAdd,this),i.on("remove",this._restructureOnRemove,this),i.on("reset",this._restructureOnReset,this),i.on("change:source",this._restructureOnChangeSource,this),i.on("change:target",this._restructureOnChangeTarget,this),i.on("remove",this._removeCell,this)},_restructureOnAdd:function(t){if(t.isLink()){this._edges[t.id]=!0;var e=t.get("source"),n=t.get("target");e.id&&((this._out[e.id]||(this._out[e.id]={}))[t.id]=!0),n.id&&((this._in[n.id]||(this._in[n.id]={}))[t.id]=!0)}else this._nodes[t.id]=!0},_restructureOnRemove:function(t){if(t.isLink()){delete this._edges[t.id];var e=t.get("source"),n=t.get("target");e.id&&this._out[e.id]&&this._out[e.id][t.id]&&delete this._out[e.id][t.id],n.id&&this._in[n.id]&&this._in[n.id][t.id]&&delete this._in[n.id][t.id]}else delete this._nodes[t.id]},_restructureOnReset:function(t){t=t.models,this._out={},this._in={},this._nodes={},this._edges={},n.each(t,this._restructureOnAdd,this)},_restructureOnChangeSource:function(t){var e=t.previous("source");e.id&&this._out[e.id]&&delete this._out[e.id][t.id];var n=t.get("source");n.id&&((this._out[n.id]||(this._out[n.id]={}))[t.id]=!0)},_restructureOnChangeTarget:function(t){var e=t.previous("target");e.id&&this._in[e.id]&&delete this._in[e.id][t.id];var n=t.get("target");n.id&&((this._in[n.id]||(this._in[n.id]={}))[t.id]=!0)},getOutboundEdges:function(t){return this._out&&this._out[t]||{}},getInboundEdges:function(t){return this._in&&this._in[t]||{}},toJSON:function(){var t=e.Model.prototype.toJSON.apply(this,arguments);return t.cells=this.get("cells").toJSON(),t},fromJSON:function(t,e){if(!t.cells)throw new Error("Graph JSON must contain cells array.");return this.set(t,e)},set:function(t,i,r){var o;return"object"==typeof t?(o=t,r=i):(o={})[t]=i,o.hasOwnProperty("cells")&&(this.resetCells(o.cells,r),o=n.omit(o,"cells")),e.Model.prototype.set.call(this,o,r)},clear:function(t){t=n.extend({},t,{clear:!0});var e=this.get("cells");if(0===e.length)return this;this.trigger("batch:start",{batchName:"clear"});var i=e.sortBy(function(t){return t.isLink()?1:2});do i.shift().remove(t);while(i.length>0);return this.trigger("batch:stop",{batchName:"clear"}),this},_prepareCell:function(t){var i;if(t instanceof e.Model?(i=t.attributes,t.graph=this):i=t,n.isUndefined(i.z)&&(i.z=this.maxZIndex()+1),!n.isString(i.type))throw new TypeError("dia.Graph: cell type must be a string.");return t},maxZIndex:function(){var t=this.get("cells").last();return t?t.get("z")||0:0},addCell:function(t,e){return n.isArray(t)?this.addCells(t,e):(this.get("cells").add(this._prepareCell(t),e||{}),this)},addCells:function(t,e){return e=e||{},e.position=t.length,n.each(t,function(t){e.position--,this.addCell(t,e)},this),this},resetCells:function(t,e){return this.get("cells").reset(n.map(t,this._prepareCell,this),e),this},_removeCell:function(t,e,n){n=n||{},n.clear||(n.disconnectLinks?this.disconnectLinks(t,n):this.removeLinks(t,n)),this.get("cells").remove(t,{silent:!0}),delete t.graph},getCell:function(t){return this.get("cells").get(t)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return n.map(this._nodes,function(t,e){return this.getCell(e)},this)},getLinks:function(){return n.map(this._edges,function(t,e){return this.getCell(e)},this)},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(t,e){e=e||{};var i=e.inbound,r=e.outbound;n.isUndefined(i)&&n.isUndefined(r)&&(i=r=!0);var o=[],s={};if(r&&n.each(this.getOutboundEdges(t.id),function(t,e){s[e]||(o.push(this.getCell(e)),s[e]=!0)},this),i&&n.each(this.getInboundEdges(t.id),function(t,e){s[e]||(o.push(this.getCell(e)),s[e]=!0)},this),e.deep){var a=t.getEmbeddedCells({deep:!0}),l={};n.each(a,function(t){t.isLink()&&(l[t.id]=!0)}),n.each(a,function(t){t.isLink()||(r&&n.each(this.getOutboundEdges(t.id),function(t,e){s[e]||l[e]||(o.push(this.getCell(e)),s[e]=!0)},this),i&&n.each(this.getInboundEdges(t.id),function(t,e){s[e]||l[e]||(o.push(this.getCell(e)),s[e]=!0)},this))},this)}return o},getNeighbors:function(t,e){e=e||{};var i=e.inbound,r=e.outbound;n.isUndefined(i)&&n.isUndefined(r)&&(i=r=!0);var o=n.transform(this.getConnectedLinks(t,e),function(o,s){var a=s.get("source"),l=s.get("target"),c=s.hasLoop(e);if(i&&n.has(a,"id")&&!o[a.id]){var u=this.getCell(a.id);(c||u&&u!==t&&(!e.deep||!u.isEmbeddedIn(t)))&&(o[a.id]=u)}if(r&&n.has(l,"id")&&!o[l.id]){var h=this.getCell(l.id);(c||h&&h!==t&&(!e.deep||!h.isEmbeddedIn(t)))&&(o[l.id]=h)}},{},this);return n.values(o)},getCommonAncestor:function(){var t=n.map(arguments,function(t){for(var e=[],n=t.get("parent");n;)e.push(n),n=this.getCell(n).get("parent");return e},this);t=n.sortBy(t,"length");var e=n.find(t.shift(),function(e){return n.every(t,function(t){return n.contains(t,e)})});return this.getCell(e)},getSuccessors:function(t,e){e=e||{};var i=[];return this.search(t,function(e){e!==t&&i.push(e)},n.extend({},e,{outbound:!0})),i},cloneCells:function(t){var e={},i={};return n.each(t,function(t){if(!e[t.id]){var n=t.clone();e[t.id]=n,i[n.id]=t.get("embeds")}}),n.each(t,function(t){var r=e[t.id];if(r.isLink()){var o=r.get("source"),s=r.get("target");o.id&&e[o.id]&&r.prop("source/id",e[o.id].id),s.id&&e[s.id]&&r.prop("target/id",e[s.id].id)}var a=r.get("parent");if(a&&e[a]&&r.set("parent",e[a].id),i[r.id]){var l=[];n.each(i[r.id],function(t){e[t]?l.push(e[t].id):l.push(t)}),r.set("embeds",l)}}),e},cloneSubgraph:function(t,e){var n=this.getSubgraph(t,e);return this.cloneCells(n)},getSubgraph:function(t,e){e=e||{};var i=[],r={},o=[],s=[];return n.each(t,function(t){if(r[t.id]||(i.push(t),r[t.id]=t,t.isLink()?s.push(t):o.push(t)),e.deep){var a=t.getEmbeddedCells({deep:!0});n.each(a,function(t){r[t.id]||(i.push(t),r[t.id]=t,t.isLink()?s.push(t):o.push(t))})}}),n.each(s,function(t){var e=t.get("source"),n=t.get("target");if(e.id&&!r[e.id]){var s=this.getCell(e.id);i.push(s),r[s.id]=s,o.push(s)}if(n.id&&!r[n.id]){var a=this.getCell(n.id);i.push(this.getCell(n.id)),r[a.id]=a,o.push(a)}},this),n.each(o,function(t){var o=this.getConnectedLinks(t,e);n.each(o,function(t){var e=t.get("source"),n=t.get("target");!r[t.id]&&e.id&&r[e.id]&&n.id&&r[n.id]&&(i.push(t),r[t.id]=t)})},this),i},getPredecessors:function(t,e){e=e||{};var i=[];return this.search(t,function(e){e!==t&&i.push(e)},n.extend({},e,{inbound:!0})),i},search:function(t,e,n){n=n||{},n.breadthFirst?this.bfs(t,e,n):this.dfs(t,e,n)},bfs:function(t,e,i){i=i||{};var r={},o={},s=[];for(s.push(t),o[t.id]=0;s.length>0;){var a=s.shift();if(!r[a.id]){if(r[a.id]=!0,e(a,o[a.id])===!1)return;n.each(this.getNeighbors(a,i),function(t){o[t.id]=o[a.id]+1,s.push(t)})}}},dfs:function(t,e,i,r,o){i=i||{};var s=r||{},a=o||0;e(t,a)!==!1&&(s[t.id]=!0,n.each(this.getNeighbors(t,i),function(t){s[t.id]||this.dfs(t,e,i,s,a+1)},this))},getSources:function(){var t=[];return n.each(this._nodes,function(e,i){(!this._in[i]||n.isEmpty(this._in[i]))&&t.push(this.getCell(i))},this),t},getSinks:function(){var t=[];return n.each(this._nodes,function(e,i){(!this._out[i]||n.isEmpty(this._out[i]))&&t.push(this.getCell(i))},this),t},isSource:function(t){return!this._in[t.id]||n.isEmpty(this._in[t.id])},isSink:function(t){return!this._out[t.id]||n.isEmpty(this._out[t.id])},isSuccessor:function(t,e){var n=!1;return this.search(t,function(i){return i===e&&i!==t?(n=!0,!1):void 0},{outbound:!0}),n},isPredecessor:function(t,e){var n=!1;return this.search(t,function(i){return i===e&&i!==t?(n=!0,!1):void 0},{inbound:!0}),n},isNeighbor:function(t,e,i){i=i||{};var r=i.inbound,o=i.outbound;n.isUndefined(r)&&n.isUndefined(o)&&(r=o=!0);var s=!1;return n.each(this.getConnectedLinks(t,i),function(t){var a=t.get("source"),l=t.get("target");t.hasLoop(i);return r&&n.has(a,"id")&&a.id===e.id?(s=!0,!1):o&&n.has(l,"id")&&l.id===e.id?(s=!0,!1):void 0}),s},disconnectLinks:function(t,e){n.each(this.getConnectedLinks(t),function(n){n.set(n.get("source").id===t.id?"source":"target",s.point(0,0),e)})},removeLinks:function(t,e){n.invoke(this.getConnectedLinks(t),"remove",e)},findModelsFromPoint:function(t){return n.filter(this.getElements(),function(e){return e.getBBox().containsPoint(t)})},findModelsInArea:function(t,e){e=n.defaults(e||{},{strict:!1});var i=e.strict?"containsRect":"intersect";return n.filter(this.getElements(),function(e){return t[i](e.getBBox())})},findModelsUnderElement:function(t,e){e=n.defaults(e||{},{searchBy:"bbox"});var i=t.getBBox(),r="bbox"==e.searchBy?this.findModelsInArea(i):this.findModelsFromPoint(i[e.searchBy]());return n.reject(r,function(e){return t.id==e.id||e.isEmbeddedIn(t)})},getBBox:function(t){return t=t||this.collection.models,n.reduce(t,function(t,e){return e.isLink()?t:t?t.union(e.getBBox()):e.getBBox()},void 0)},translate:function(t,e,i){var r=n.reject(this.getCells(),function(t){return t.isEmbedded()});n.invoke(r,"translate",t,e,i)}}),a.dia.Cell=e.Model.extend({constructor:function(t,e){var i,r=t||{};this.cid=n.uniqueId("c"),this.attributes={},e&&e.collection&&(this.collection=e.collection),e&&e.parse&&(r=this.parse(r,e)||{}),(i=n.result(this,"defaults"))&&(r=n.merge({},i,r)),this.set(r,e),this.changed={},this.initialize.apply(this,arguments)},translate:function(t,e,n){throw new Error("Must define a translate() method.")},toJSON:function(){var t=this.constructor.prototype.defaults.attrs||{},e=this.attributes.attrs,i={};n.each(e,function(e,r){var o=t[r];n.each(e,function(t,e){n.isObject(t)&&!n.isArray(t)?n.each(t,function(t,s){o&&o[e]&&n.isEqual(o[e][s],t)||(i[r]=i[r]||{},(i[r][e]||(i[r][e]={}))[s]=t)}):o&&n.isEqual(o[e],t)||(i[r]=i[r]||{},i[r][e]=t)})});var r=n.cloneDeep(n.omit(this.attributes,"attrs"));return r.attrs=i,r},initialize:function(t){t&&t.id||this.set("id",a.util.uuid(),{silent:!0}),this._transitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},processPorts:function(){var t=this.ports,e={};n.each(this.get("attrs"),function(t,i){t&&t.port&&(n.isUndefined(t.port.id)?e[t.port]={id:t.port}:e[t.port.id]=t.port)});var i={};if(n.each(t,function(t,n){e[n]||(i[n]=!0)}),this.graph&&!n.isEmpty(i)){var r=this.graph.getConnectedLinks(this,{inbound:!0});n.each(r,function(t){i[t.get("target").port]&&t.remove()});var o=this.graph.getConnectedLinks(this,{outbound:!0});n.each(o,function(t){i[t.get("source").port]&&t.remove()})}this.ports=e},remove:function(t){t=t||{};var e=this.graph;e&&e.trigger("batch:start",{batchName:"remove"});var i=this.get("parent");if(i){var r=e&&e.getCell(i);r.unembed(this)}return n.invoke(this.getEmbeddedCells(),"remove",t),this.trigger("remove",this,this.collection,t),e&&e.trigger("batch:stop",{batchName:"remove"}),this},toFront:function(t){if(this.graph){t=t||{};var e=(this.graph.getLastCell().get("z")||0)+1;if(this.trigger("batch:start",{batchName:"to-front"}).set("z",e,t),t.deep){var i=this.getEmbeddedCells({deep:!0,breadthFirst:!0});n.each(i,function(n){n.set("z",++e,t)})}this.trigger("batch:stop",{batchName:"to-front"})}return this},toBack:function(t){if(this.graph){t=t||{};var e=(this.graph.getFirstCell().get("z")||0)-1;if(this.trigger("batch:start",{batchName:"to-back"}),t.deep){var i=this.getEmbeddedCells({deep:!0,breadthFirst:!0});n.eachRight(i,function(n){n.set("z",e--,t)})}this.set("z",e,t).trigger("batch:stop",{batchName:"to-back"})}return this},embed:function(t,e){if(this===t||this.isEmbeddedIn(t))throw new Error("Recursive embedding not allowed.");this.trigger("batch:start",{batchName:"embed"});var i=n.clone(this.get("embeds")||[]);return i[t.isLink()?"unshift":"push"](t.id),t.set("parent",this.id,e),this.set("embeds",n.uniq(i),e),this.trigger("batch:stop",{batchName:"embed"}),this},unembed:function(t,e){return this.trigger("batch:start",{batchName:"unembed"}),t.unset("parent",e),this.set("embeds",n.without(this.get("embeds"),t.id),e),this.trigger("batch:stop",{batchName:"unembed"}),this},getAncestors:function(){var t=[],e=this.get("parent");if(!this.graph)return t;for(;void 0!==e;){var n=this.graph.getCell(e);if(void 0===n)break;t.push(n),e=n.get("parent")}return t},getEmbeddedCells:function(t){if(t=t||{},this.graph){var e;if(t.deep)if(t.breadthFirst){e=[];for(var i=this.getEmbeddedCells();i.length>0;){var r=i.shift();e.push(r),i.push.apply(i,r.getEmbeddedCells())}}else e=this.getEmbeddedCells(),n.each(e,function(n){e.push.apply(e,n.getEmbeddedCells(t))});else e=n.map(this.get("embeds"),this.graph.getCell,this.graph);return e}return[]},isEmbeddedIn:function(t,e){var i=n.isString(t)?t:t.id,r=this.get("parent");if(e=n.defaults({deep:!0},e),this.graph&&e.deep){for(;r;){if(r===i)return!0;r=this.graph.getCell(r).get("parent")}return!1}return r===i},isEmbedded:function(){return!!this.get("parent")},clone:function(t){if(t=t||{},t.deep)return n.values(a.dia.Graph.prototype.cloneCells.call(null,[this].concat(this.getEmbeddedCells({deep:!0}))));var i=e.Model.prototype.clone.apply(this,arguments);return i.set("id",a.util.uuid()),i.set("embeds",""),i},prop:function(t,e,i){var r="/";if(n.isString(t)){if(arguments.length>1){var o=t,s=o.split("/"),l=s[0];if(s.shift(),i=i||{},i.propertyPath=o,i.propertyValue=e,0===s.length)return this.set(l,e,i);var c={},u=c,h=l;n.each(s,function(t){u=u[h]=n.isFinite(Number(t))?[]:{},h=t}),c=a.util.setByPath(c,o,e,"/");var g=n.merge({},this.attributes);i.rewrite&&a.util.unsetByPath(g,o,"/");var d=n.merge(g,c);return this.set(l,d[l],i)}return a.util.getByPath(this.attributes,t,r)}return this.set(n.merge({},this.attributes,t),e)},removeProp:function(t,e){e=e||{},e.dirty=!0;var i=t.split("/");if(1===i.length)return this.unset(t,e);var r=i[0],o=i.slice(1).join("/"),s=n.merge({},this.get(r));return a.util.unsetByPath(s,o,"/"),this.set(r,s,e)},attr:function(t,e,i){var r=Array.prototype.slice.call(arguments);return n.isString(t)?r[0]="attrs/"+t:r[0]={attrs:t},this.prop.apply(this,r)},removeAttr:function(t,e){return n.isArray(t)?(n.each(t,function(t){this.removeAttr(t,e)},this),this):this.removeProp("attrs/"+t,e)},transition:function(t,e,i,r){r=r||"/";var o={duration:100,delay:10,timingFunction:a.util.timing.linear,valueFunction:a.util.interpolate.number};i=n.extend(o,i);var s,l=0,c=n.bind(function(e){var n,r,o;l=l||e,e-=l,r=e/i.duration,1>r?this._transitionIds[t]=n=a.util.nextFrame(c):(r=1,delete this._transitionIds[t]),o=s(i.timingFunction(r)),i.transitionId=n,this.prop(t,o,i),n||this.trigger("transition:end",this,t)},this),u=n.bind(function(n){this.stopTransitions(t),s=i.valueFunction(a.util.getByPath(this.attributes,t,r),e),this._transitionIds[t]=a.util.nextFrame(n),this.trigger("transition:start",this,t)},this);return n.delay(u,i.delay,c)},getTransitions:function(){return n.keys(this._transitionIds)},stopTransitions:function(t,e){e=e||"/";var i=t&&t.split(e);return n(this._transitionIds).keys().filter(i&&function(t){return n.isEqual(i,t.split(e).slice(0,i.length))}).each(function(t){a.util.cancelFrame(this._transitionIds[t]),delete this._transitionIds[t],this.trigger("transition:end",this,t)},this),this},addTo:function(t,e){return t.addCell(this,e),this},findView:function(t){return t.findViewByModel(this)},isLink:function(){return!1}}),a.dia.CellView=a.mvc.View.extend({tagName:"g",attributes:function(){return{"model-id":this.model.id}},constructor:function(t){t.id=t.id||a.util.guid(this),a.mvc.View.call(this,t)},init:function(){n.bindAll(this,"remove","update"),this.$el.data("view",this),this.listenTo(this.model,"change:attrs",this.onChangeAttrs)},onChangeAttrs:function(t,e,n){return n.dirty?this.render():this.update(t,e,n)},_ensureElement:function(){var t;if(this.el)t=n.result(this,"el");else{var e=n.extend({id:this.id},n.result(this,"attributes"));this.className&&(e["class"]=n.result(this,"className")),t=r(n.result(this,"tagName"),e).node}this.setElement(t,!1)},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],this.vel=r(this.el)},findBySelector:function(t){var e="."===t?this.$el:this.$el.find(t);return e},notify:function(t){if(this.paper){var e=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[t].concat(e)),this.paper.trigger.apply(this.paper,[t,this].concat(e))}},getStrokeBBox:function(t){var e=!!t;t=t||this.el;var n,i=r(t).bbox(!1,this.paper.viewport);return n=e?r(t).attr("stroke-width"):this.model.attr("rect/stroke-width")||this.model.attr("circle/stroke-width")||this.model.attr("ellipse/stroke-width")||this.model.attr("path/stroke-width"),n=parseFloat(n)||0,s.rect(i).moveAndExpand({x:-n/2,y:-n/2,width:n,height:n})},getBBox:function(){return s.rect(this.vel.bbox())},highlight:function(t,e){return t=t?this.$(t)[0]||this.el:this.el,e=e||{},e.partial=t!=this.el,this.notify("cell:highlight",t,e),this},unhighlight:function(t,e){return t=t?this.$(t)[0]||this.el:this.el,e=e||{},e.partial=t!=this.el,this.notify("cell:unhighlight",t,e),this},findMagnet:function(t){var e=this.$(t);if(0===e.length||e[0]===this.el){var n=this.model.get("attrs")||{};return n["."]&&n["."].magnet===!1?void 0:this.el}return e.attr("magnet")?e[0]:this.findMagnet(e.parent())},applyFilter:function(t,e){var o=n.isString(t)?this.findBySelector(t):i(t),s=e.name+this.paper.svg.id+a.util.hashCode(JSON.stringify(e));if(!this.paper.svg.getElementById(s)){var l=a.util.filter[e.name]&&a.util.filter[e.name](e.args||{});if(!l)throw new Error("Non-existing filter "+e.name);var c=r(l);c.attr({filterUnits:"objectBoundingBox",x:-1,y:-1,width:3,height:3}),e.attrs&&c.attr(e.attrs),c.node.id=s,r(this.paper.svg).defs().append(c)}o.each(function(){r(this).attr("filter","url(#"+s+")")})},applyGradient:function(t,e,o){var s=n.isString(t)?this.findBySelector(t):i(t),l=o.type+this.paper.svg.id+a.util.hashCode(JSON.stringify(o));if(!this.paper.svg.getElementById(l)){var c=["<"+o.type+">",n.map(o.stops,function(t){return'<stop offset="'+t.offset+'" stop-color="'+t.color+'" stop-opacity="'+(n.isFinite(t.opacity)?t.opacity:1)+'" />'}).join(""),"</"+o.type+">"].join(""),u=r(c);o.attrs&&u.attr(o.attrs),u.node.id=l,r(this.paper.svg).defs().append(u)}s.each(function(){r(this).attr(e,"url(#"+l+")")})},getSelector:function(t,e){if(t===this.el)return e;var n=r(t).index()+1,i=t.tagName+":nth-child("+n+")";return e&&(i+=" > "+e),this.getSelector(t.parentNode,i)},pointerdblclick:function(t,e,n){this.notify("cell:pointerdblclick",t,e,n)},pointerclick:function(t,e,n){this.notify("cell:pointerclick",t,e,n)},pointerdown:function(t,e,n){this.model.collection&&(this.model.trigger("batch:start",{batchName:"pointer"}),this._collection=this.model.collection),this.notify("cell:pointerdown",t,e,n)},pointermove:function(t,e,n){this.notify("cell:pointermove",t,e,n)},pointerup:function(t,e,n){this.notify("cell:pointerup",t,e,n),this._collection&&(this._collection.trigger("batch:stop",{batchName:"pointer"}),delete this._collection)},mouseover:function(t){this.notify("cell:mouseover",t)},mouseout:function(t){this.notify("cell:mouseout",t)},contextmenu:function(t,e,n){this.notify("cell:contextmenu",t,e,n)},onSetTheme:function(t,e){t&&this.vel.removeClass(this.themeClassNamePrefix+t),this.vel.addClass(this.themeClassNamePrefix+e)}}),a.dia.Element=a.dia.Cell.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},position:function(t,e,i){var r=n.isNumber(e);if(i=(r?i:t)||{},i.parentRelative){if(!this.graph)throw new Error("Element must be part of a graph.");var o=this.graph.getCell(this.get("parent")),a=o&&!o.isLink()?o.get("position"):{x:0,y:0}}if(r)return i.parentRelative&&(t+=a.x,e+=a.y),this.set("position",{x:t,y:e},i);var l=s.point(this.get("position"));return i.parentRelative?l.difference(a):l},translate:function(t,e,i){if(t=t||0,e=e||0,0===t&&0===e)return this;i=i||{},i.translateBy=i.translateBy||this.id;var r=this.get("position")||{x:0,y:0};if(i.restrictedArea&&i.translateBy===this.id){var o=this.getBBox({deep:!0}),s=i.restrictedArea,l=r.x-o.x,c=r.y-o.y,u=Math.max(s.x+l,Math.min(s.x+s.width+l-o.width,r.x+t)),h=Math.max(s.y+c,Math.min(s.y+s.height+c-o.height,r.y+e));t=u-r.x,e=h-r.y}var g={x:r.x+t,y:r.y+e};return i.tx=t,i.ty=e,i.transition?(n.isObject(i.transition)||(i.transition={}),this.transition("position",g,n.extend({},i.transition,{valueFunction:a.util.interpolate.object}))):(this.set("position",g,i),n.invoke(this.getEmbeddedCells(),"translate",t,e,i)),this},resize:function(t,e,i){if(i=i||{},this.trigger("batch:start",n.extend({},i,{element:this,batchName:"resize"})),i.direction){var r=this.get("size");switch(i.direction){case"left":case"right":e=r.height;break;case"top":case"bottom":t=r.width}var o=s.normalizeAngle(this.get("angle")||0),a={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[i.direction];i.absolute&&(a+=Math.floor((o+45)/90),a%=4);var l=this.getBBox(),c=l[["bottomLeft","corner","topRight","origin"][a]](),u=s.point(c).rotate(l.center(),-o),h=Math.sqrt(t*t+e*e)/2,g=a*Math.PI/2;g+=Math.atan(a%2==0?e/t:t/e),g-=s.toRad(o);var d=s.point.fromPolar(h,g,u),p=s.point(d).offset(t/-2,e/-2);this.set("size",{width:t,height:e},i),this.position(p.x,p.y,i)}else this.set("size",{width:t,height:e},i);return this.trigger("batch:stop",n.extend({},i,{element:this,batchName:"resize"})),this},fitEmbeds:function(t){if(t=t||{},!this.graph)throw new Error("Element must be part of a graph.");var e=this.getEmbeddedCells();if(e.length>0){this.trigger("batch:start",{batchName:"fit-embeds"}),t.deep&&n.invoke(e,"fitEmbeds",t);var i=this.graph.getBBox(e),r=a.util.normalizeSides(t.padding);i.moveAndExpand({x:-r.left,y:-r.top,width:r.right+r.left,height:r.bottom+r.top}),this.set({position:{x:i.x,y:i.y},size:{width:i.width,height:i.height}},t),this.trigger("batch:stop",{batchName:"fit-embeds"})}return this},rotate:function(t,e,n){if(n){var i=this.getBBox().center(),r=this.get("size"),o=this.get("position");i.rotate(n,this.get("angle")-t);var s=i.x-r.width/2-o.x,a=i.y-r.height/2-o.y;this.trigger("batch:start",{batchName:"rotate"}),this.translate(s,a),this.rotate(t,e),this.trigger("batch:stop",{batchName:"rotate"})}else this.set("angle",e?t:(this.get("angle")+t)%360);return this},getBBox:function(t){if(t=t||{},t.deep&&this.graph){var e=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return e.push(this),this.graph.getBBox(e)}var n=this.get("position"),i=this.get("size");return s.rect(n.x,n.y,i.width,i.height)}}),a.dia.ElementView=a.dia.CellView.extend({SPECIAL_ATTRIBUTES:["style","text","html","ref-x","ref-y","ref-dx","ref-dy","ref-width","ref-height","ref","x-alignment","y-alignment","port"],className:function(){return"element "+this.model.get("type").replace(/\./g," ")},initialize:function(){n.bindAll(this,"translate","resize","rotate"),a.dia.CellView.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:position",this.translate),this.listenTo(this.model,"change:size",this.resize),this.listenTo(this.model,"change:angle",this.rotate)},update:function(t,e){var o=this.model.get("attrs"),s=this.rotatableNode;if(s){var a=s.attr("transform");s.attr("transform","")}var l=[],c={};n.each(e||o,function(t,e){var o=this.findBySelector(e);if(0!==o.length){c[e]=o;var s=this.SPECIAL_ATTRIBUTES.slice();n.isObject(t.filter)&&(s.push("filter"),this.applyFilter(o,t.filter)),n.isObject(t.fill)&&(s.push("fill"),this.applyGradient(o,"fill",t.fill)),n.isObject(t.stroke)&&(s.push("stroke"),this.applyGradient(o,"stroke",t.stroke)),n.isUndefined(t.text)||(o.each(function(){r(this).text(t.text+"",{lineHeight:t.lineHeight,textPath:t.textPath,annotations:t.annotations})}),s.push("lineHeight","textPath","annotations"));var a=n.omit(t,s);o.each(function(){r(this).attr(a)}),t.port&&o.attr("port",n.isUndefined(t.port.id)?t.port:t.port.id),t.style&&o.css(t.style),n.isUndefined(t.html)||o.each(function(){i(this).html(t.html+"")}),n.isUndefined(t["ref-x"])&&n.isUndefined(t["ref-y"])&&n.isUndefined(t["ref-dx"])&&n.isUndefined(t["ref-dy"])&&n.isUndefined(t["x-alignment"])&&n.isUndefined(t["y-alignment"])&&n.isUndefined(t["ref-width"])&&n.isUndefined(t["ref-height"])||n.each(o,function(t,e,n){var r=i(t);r.selector=n.selector,l.push(r)})}},this);var u=this.model.get("size"),h={x:0,y:0,width:u.width,height:u.height};e=e||{},n.each(l,function(t){var i=e[t.selector],s=i?n.merge({},o[t.selector],i):o[t.selector];this.positionRelative(r(t[0]),h,s,c)},this),s&&s.attr("transform",a||"")},positionRelative:function(t,e,i,o){var s=i.ref,a=parseFloat(i["ref-dx"]),l=parseFloat(i["ref-dy"]),c=i["y-alignment"],u=i["x-alignment"],h=i["ref-y"],g=n.isString(h)&&"%"===h.slice(-1);h=parseFloat(h),g&&(h/=100);var d=i["ref-x"],p=n.isString(d)&&"%"===d.slice(-1);d=parseFloat(d),p&&(d/=100);var f=i["ref-width"],m=n.isString(f)&&"%"===f.slice(-1);f=parseFloat(f),m&&(f/=100);var I=i["ref-height"],v=n.isString(I)&&"%"===I.slice(-1);I=parseFloat(I),v&&(I/=100);var C=t.findParentByClass("scalable",this.el);if(s){var y;if(y=o&&o[s]?r(o[s][0]):"."===s?this.vel:this.vel.findOne(s),!y)throw new Error("dia.ElementView: reference does not exists.");e=y.bbox(!1,this.el)}t.attr("transform")&&t.attr("transform",t.attr("transform").replace(/translate\([^)]*\)/g,"").trim()||""),
isFinite(f)&&(m||f>=0&&1>=f?t.attr("width",f*e.width):t.attr("width",Math.max(f+e.width,0))),isFinite(I)&&(v||I>=0&&1>=I?t.attr("height",I*e.height):t.attr("height",Math.max(I+e.height,0)));var A,b=0,w=0;if(isFinite(a)&&(C?(A=A||C.scale(),b=e.x+e.width+a/A.sx):b=e.x+e.width+a),isFinite(l)&&(C?(A=A||C.scale(),w=e.y+e.height+l/A.sy):w=e.y+e.height+l),isFinite(d)&&(p||d>0&&1>d?b=e.x+e.width*d:C?(A=A||C.scale(),b=e.x+d/A.sx):b=e.x+d),isFinite(h)&&(p||h>0&&1>h?w=e.y+e.height*h:C?(A=A||C.scale(),w=e.y+h/A.sy):w=e.y+h),!n.isUndefined(c)||!n.isUndefined(u)){var x=t.bbox(!1,this.paper.viewport);"middle"===c?w-=x.height/2:isFinite(c)&&(w+=c>-1&&1>c?x.height*c:c),"middle"===u?b-=x.width/2:isFinite(u)&&(b+=u>-1&&1>u?x.width*u:u)}t.translate(b,w)},renderMarkup:function(){var t=this.model.get("markup")||this.model.markup;if(!t)throw new Error("properties.markup is missing while the default render() implementation is used.");var e=r(t);this.vel.append(e)},render:function(){return this.$el.empty(),this.renderMarkup(),this.rotatableNode=this.vel.findOne(".rotatable"),this.scalableNode=this.vel.findOne(".scalable"),this.update(),this.resize(),this.rotate(),this.translate(),this},scale:function(t,e){this.vel.scale(t,e)},resize:function(){var t=this.model.get("size")||{width:1,height:1},e=this.model.get("angle")||0,n=this.scalableNode;if(n){var i=n.bbox(!0);n.attr("transform","scale("+t.width/(i.width||1)+","+t.height/(i.height||1)+")");var r=this.rotatableNode,o=r&&r.attr("transform");if(o&&"null"!==o){r.attr("transform",o+" rotate("+-e+","+t.width/2+","+t.height/2+")");var s=n.bbox(!1,this.paper.viewport);this.model.set("position",{x:s.x,y:s.y}),this.rotate()}this.update()}},translate:function(t,e,n){var i=this.model.get("position")||{x:0,y:0};this.vel.attr("transform","translate("+i.x+","+i.y+")")},rotate:function(){var t=this.rotatableNode;if(t){var e=this.model.get("angle")||0,n=this.model.get("size")||{width:1,height:1},i=n.width/2,r=n.height/2;t.attr("transform","rotate("+e+","+i+","+r+")")}},getBBox:function(t){if(t&&t.useModelGeometry){var e=this.model.getBBox().bbox(this.model.get("angle")),n=this.paper.viewport.getCTM();return s.rect(r.transformRect(e,n))}return a.dia.CellView.prototype.getBBox.apply(this,arguments)},prepareEmbedding:function(t){t=t||{};var e=t.model||this.model,i=t.paper||this.paper;e.toFront({deep:!0,ui:!0}),n.invoke(i.model.getConnectedLinks(e,{deep:!0}),"toFront",{ui:!0});var r=e.get("parent");r&&i.model.getCell(r).unembed(e,{ui:!0})},processEmbedding:function(t){t=t||{};var e=t.model||this.model,n=t.paper||this.paper,i=n.options,r=n.model.findModelsUnderElement(e,{searchBy:i.findParentBy});i.frontParentOnly&&(r=r.slice(-1));for(var o=null,s=this._candidateEmbedView,a=r.length-1;a>=0;a--){var l=r[a];if(s&&s.model.id==l.id){o=s;break}var c=l.findView(n);if(i.validateEmbedding.call(n,this,c)){o=c;break}}o&&o!=s&&(s&&s.unhighlight(null,{embedding:!0}),this._candidateEmbedView=o.highlight(null,{embedding:!0})),!o&&s&&(s.unhighlight(null,{embedding:!0}),delete this._candidateEmbedView)},finalizeEmbedding:function(t){t=t||{};var e=this._candidateEmbedView,i=t.model||this.model,r=t.paper||this.paper;e&&(e.model.embed(i,{ui:!0}),e.unhighlight(null,{embedding:!0}),delete this._candidateEmbedView),n.invoke(r.model.getConnectedLinks(i,{deep:!0}),"reparent",{ui:!0})},pointerdown:function(t,e,n){var i=this.paper;if(t.target.getAttribute("magnet")&&i.options.validateMagnet.call(i,this,t.target)){this.model.trigger("batch:start",{batchName:"add-link"});var r=i.getDefaultLink(this,t.target);r.set({source:{id:this.model.id,selector:this.getSelector(t.target),port:t.target.getAttribute("port")},target:{x:e,y:n}}),i.model.addCell(r);var o=this._linkView=i.findViewByModel(r);o.pointerdown(t,e,n),o.startArrowheadMove("target",{whenNotAllowed:"remove"})}else this._dx=e,this._dy=n,this.restrictedArea=i.getRestrictedArea(this),a.dia.CellView.prototype.pointerdown.apply(this,arguments),this.notify("element:pointerdown",t,e,n)},pointermove:function(t,e,i){if(this._linkView)this._linkView.pointermove(t,e,i);else{var r=this.paper.options.gridSize,o=n.isFunction(this.options.interactive)?this.options.interactive(this,"pointermove"):this.options.interactive;if(o!==!1){var l=this.model.get("position"),c=s.snapToGrid(l.x,r)-l.x+s.snapToGrid(e-this._dx,r),u=s.snapToGrid(l.y,r)-l.y+s.snapToGrid(i-this._dy,r);this.model.translate(c,u,{restrictedArea:this.restrictedArea,ui:!0}),this.paper.options.embeddingMode&&(this._inProcessOfEmbedding||(this.prepareEmbedding(),this._inProcessOfEmbedding=!0),this.processEmbedding())}this._dx=s.snapToGrid(e,r),this._dy=s.snapToGrid(i,r),a.dia.CellView.prototype.pointermove.apply(this,arguments),this.notify("element:pointermove",t,e,i)}},pointerup:function(t,e,n){this._linkView?(this._linkView.pointerup(t,e,n),this._linkView=null,this.model.trigger("batch:stop",{batchName:"add-link"})):(this._inProcessOfEmbedding&&(this.finalizeEmbedding(),this._inProcessOfEmbedding=!1),this.notify("element:pointerup",t,e,n),a.dia.CellView.prototype.pointerup.apply(this,arguments))}}),a.dia.Link=a.dia.Cell.extend({markup:['<path class="connection" stroke="black" d="M 0 0 0 0"/>','<path class="marker-source" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="marker-target" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="connection-wrap" d="M 0 0 0 0"/>','<g class="labels"/>','<g class="marker-vertices"/>','<g class="marker-arrowheads"/>','<g class="link-tools"/>'].join(""),labelMarkup:['<g class="label">',"<rect />","<text />","</g>"].join(""),toolMarkup:['<g class="link-tool">','<g class="tool-remove" event="remove">','<circle r="11" />','<path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />',"<title>Remove link.</title>","</g>",'<g class="tool-options" event="link:options">','<circle r="11" transform="translate(25)"/>','<path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>',"<title>Link options.</title>","</g>","</g>"].join(""),vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>"].join(""),arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<path class="marker-arrowhead" end="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />',"</g>"].join(""),defaults:{type:"link",source:{},target:{}},disconnect:function(){return this.set({source:s.point(0,0),target:s.point(0,0)})},label:function(t,e){t=t||0;var i=this.get("labels")||[];if(0===arguments.length||1===arguments.length)return i[t];var r=n.merge({},i[t],e),o=i.slice();return o[t]=r,this.set({labels:o})},translate:function(t,e,i){var r={},o=this.get("source"),s=this.get("target"),a=this.get("vertices");return o.id||(r.source={x:(o.x||0)+t,y:(o.y||0)+e}),s.id||(r.target={x:(s.x||0)+t,y:(s.y||0)+e}),a&&a.length&&(r.vertices=n.map(a,function(n){return{x:n.x+t,y:n.y+e}})),i=i||{},i.translateBy=i.translateBy||this.id,i.tx=t,i.ty=e,this.set(r,i)},reparent:function(t){var e;if(this.graph){var n=this.graph.getCell(this.get("source").id),i=this.graph.getCell(this.get("target").id),r=this.graph.getCell(this.get("parent"));n&&i&&(e=this.graph.getCommonAncestor(n,i)),!r||e&&e.id===r.id||r.unembed(this,t),e&&e.embed(this,t)}return e},isLink:function(){return!0},hasLoop:function(t){t=t||{};var e=this.get("source").id,n=this.get("target").id;if(!e||!n)return!1;var i=e===n;if(!i&&t.deep&&this.graph){var r=this.graph.getCell(e),o=this.graph.getCell(n);i=r.isEmbeddedIn(o)||o.isEmbeddedIn(r)}return i},getSourceElement:function(){var t=this.get("source");return t&&t.id&&this.graph&&this.graph.getCell(t.id)||null},getTargetElement:function(){var t=this.get("target");return t&&t.id&&this.graph&&this.graph.getCell(t.id)||null},getRelationshipAncestor:function(){var t;if(this.graph){var e=n.compact([this,this.getSourceElement(),this.getTargetElement()]);t=this.graph.getCommonAncestor.apply(this.graph,e)}return t||null},isRelationshipEmbeddedIn:function(t){var e=n.isString(t)?t:t.id,i=this.getRelationshipAncestor();return!!i&&(i.id===e||i.isEmbeddedIn(e))}}),a.dia.LinkView=a.dia.CellView.extend({className:function(){return n.unique(this.model.get("type").split(".").concat("link")).join(" ")},options:{shortLinkLength:100,doubleLinkTools:!1,longLinkLength:160,linkToolsOffset:40,doubleLinkToolsOffset:60,sampleInterval:50},_z:null,initialize:function(t){a.dia.CellView.prototype.initialize.apply(this,arguments),"function"!=typeof this.constructor.prototype.watchSource&&(this.constructor.prototype.watchSource=this.createWatcher("source"),this.constructor.prototype.watchTarget=this.createWatcher("target")),this._labelCache={},this._markerCache={},this.startListening()},startListening:function(){var t=this.model;this.listenTo(t,"change:markup",this.render),this.listenTo(t,"change:smooth change:manhattan change:router change:connector",this.update),this.listenTo(t,"change:toolMarkup",this.onToolsChange),this.listenTo(t,"change:labels change:labelMarkup",this.onLabelsChange),this.listenTo(t,"change:vertices change:vertexMarkup",this.onVerticesChange),this.listenTo(t,"change:source",this.onSourceChange),this.listenTo(t,"change:target",this.onTargetChange)},onSourceChange:function(t,e,n){this.watchSource(t,e),n.translateBy&&this.model.get("target").id||(n.updateConnectionOnly=!0,this.update(this.model,null,n))},onTargetChange:function(t,e,n){this.watchTarget(t,e),n.translateBy||(n.updateConnectionOnly=!0,this.update(this.model,null,n))},onVerticesChange:function(t,e,n){this.renderVertexMarkers(),n.translateBy&&n.translateBy!==this.model.id||(n.updateConnectionOnly=!0,this.update(t,null,n))},onToolsChange:function(){this.renderTools().updateToolsPosition()},onLabelsChange:function(){this.renderLabels().updateLabelPositions()},render:function(){this.$el.empty();var t=this.model,e=r(t.get("markup")||t.markup);if(n.isArray(e)||(e=[e]),this._V={},n.each(e,function(t){var e=t.attr("class");e&&(this._V[i.camelCase(e)]=t)},this),!this._V.connection)throw new Error("link: no connection path in the markup");return this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),this.vel.append(e),this.renderLabels(),this.watchSource(t,t.get("source")).watchTarget(t,t.get("target")).update(),this},renderLabels:function(){if(!this._V.labels)return this;this._labelCache={};var t=i(this._V.labels.node).empty(),e=this.model.get("labels")||[];if(!e.length)return this;var o=n.template(this.model.get("labelMarkup")||this.model.labelMarkup),s=r(o()),l=this.can("labelMove");return n.each(e,function(e,o){var c=s.clone().node;r(c).attr("label-idx",o),l&&r(c).attr("cursor","move"),this._labelCache[o]=r(c);var u=i(c).find("text"),h=i(c).find("rect"),g=n.extend({"text-anchor":"middle","font-size":14},a.util.getByPath(e,"attrs/text","/"));u.attr(n.omit(g,"text")),n.isUndefined(g.text)||r(u[0]).text(g.text+""),t.append(c);var d=r(u[0]).bbox(!0,t[0]);r(u[0]).translate(0,-d.height/2);var p=n.extend({fill:"white",rx:3,ry:3},a.util.getByPath(e,"attrs/rect","/"));h.attr(n.extend(p,{x:d.x,y:d.y-d.height/2,width:d.width,height:d.height}))},this),this},renderTools:function(){if(!this._V.linkTools)return this;var t=i(this._V.linkTools.node).empty(),e=n.template(this.model.get("toolMarkup")||this.model.toolMarkup),o=r(e());if(t.append(o.node),this._toolCache=o,this.options.doubleLinkTools){var s;this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup?(e=n.template(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup),s=r(e())):s=o.clone(),t.append(s.node),this._tool2Cache=s}return this},renderVertexMarkers:function(){if(!this._V.markerVertices)return this;var t=i(this._V.markerVertices.node).empty(),e=n.template(this.model.get("vertexMarkup")||this.model.vertexMarkup);return n.each(this.model.get("vertices"),function(i,o){t.append(r(e(n.extend({idx:o},i))).node)}),this},renderArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;var t=i(this._V.markerArrowheads.node);t.empty();var e=n.template(this.model.get("arrowheadMarkup")||this.model.arrowheadMarkup);return this._V.sourceArrowhead=r(e({end:"source"})),this._V.targetArrowhead=r(e({end:"target"})),t.append(this._V.sourceArrowhead.node,this._V.targetArrowhead.node),this},update:function(t,e,n){return n=n||{},n.updateConnectionOnly||this.updateAttributes(),this.updateConnection(n),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.options.perpendicular=null,this.updatePostponed=!1,this},updateConnection:function(t){t=t||{};var e,i=this.model;if(t.translateBy&&i.isRelationshipEmbeddedIn(t.translateBy)){var r=t.tx||0,o=t.ty||0;e=this.route=n.map(this.route,function(t){return s.point(t).offset(r,o)}),this._translateConnectionPoints(r,o)}else e=this.route=this.findRoute(i.get("vertices")||[],t),this._findConnectionPoints(e);var a=this.getPathData(e);this._V.connection.attr("d",a),this._V.connectionWrap&&this._V.connectionWrap.attr("d",a),this._translateAndAutoOrientArrows(this._V.markerSource,this._V.markerTarget)},updateAttributes:function(){n.each(this.model.get("attrs"),function(t,e){var i=[];n.isObject(t.fill)&&(this.applyGradient(e,"fill",t.fill),i.push("fill")),n.isObject(t.stroke)&&(this.applyGradient(e,"stroke",t.stroke),i.push("stroke")),n.isObject(t.filter)&&(this.applyFilter(e,t.filter),i.push("filter")),i.length>0&&(i.unshift(t),t=n.omit.apply(n,i)),this.findBySelector(e).attr(t)},this)},_findConnectionPoints:function(t){var e,i,r,o,a=n.first(t);e=this.getConnectionPoint("source",this.model.get("source"),a||this.model.get("target")).round();var l=n.last(t);i=this.getConnectionPoint("target",this.model.get("target"),l||e).round();var c=this._markerCache;this._V.markerSource&&(c.sourceBBox=c.sourceBBox||this._V.markerSource.bbox(!0),r=s.point(e).move(a||i,c.sourceBBox.width*this._V.markerSource.scale().sx*-1).round()),this._V.markerTarget&&(c.targetBBox=c.targetBBox||this._V.markerTarget.bbox(!0),o=s.point(i).move(l||e,c.targetBBox.width*this._V.markerTarget.scale().sx*-1).round()),c.sourcePoint=r||e,c.targetPoint=o||i,this.sourcePoint=e,this.targetPoint=i},_translateConnectionPoints:function(t,e){var n=this._markerCache;n.sourcePoint.offset(t,e),n.targetPoint.offset(t,e),this.sourcePoint.offset(t,e),this.targetPoint.offset(t,e)},updateLabelPositions:function(){if(!this._V.labels)return this;var t=this.model.get("labels")||[];if(!t.length)return this;var e=this._V.connection.node,i=e.getTotalLength();if(!n.isNaN(i)){var r;n.each(t,function(t,o){var a=t.position,l=n.isObject(a)?a.distance:a,c=n.isObject(a)?a.offset:{x:0,y:0};l=l>i?i:l,l=0>l?i+l:l,l=l>1?l:i*l;var u=e.getPointAtLength(l);if(n.isObject(c))u=s.point(u).offset(c.x,c.y);else if(n.isNumber(c)){r||(r=this._samples||this._V.connection.sample(this.options.sampleInterval));for(var h,g,d,p,f=1/0,m=0,I=r.length;I>m;m++)d=r[m],p=s.line(d,u).squaredLength(),f>p&&(f=p,h=d,g=m);var v=r[g-1],C=r[g+1],y=0;C?y=s.point(u).theta(C):v&&(y=s.point(v).theta(u)),u=s.point(u).offset(c).rotate(u,y-90)}this._labelCache[o].attr("transform","translate("+u.x+", "+u.y+")")},this)}return this},updateToolsPosition:function(){if(!this._V.linkTools)return this;var t="",e=this.options.linkToolsOffset,i=this.getConnectionLength();if(!n.isNaN(i)){i<this.options.shortLinkLength&&(t="scale(.5)",e/=2);var r=this.getPointAtLength(e);if(this._toolCache.attr("transform","translate("+r.x+", "+r.y+") "+t),this.options.doubleLinkTools&&i>=this.options.longLinkLength){var o=this.options.doubleLinkToolsOffset||e;r=this.getPointAtLength(i-o),this._tool2Cache.attr("transform","translate("+r.x+", "+r.y+") "+t),this._tool2Cache.attr("visibility","visible")}else this.options.doubleLinkTools&&this._tool2Cache.attr("visibility","hidden")}return this},updateArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;if("none"===i.css(this._V.markerArrowheads.node,"display"))return this;var t=this.getConnectionLength()<this.options.shortLinkLength?.5:1;return this._V.sourceArrowhead.scale(t),this._V.targetArrowhead.scale(t),this._translateAndAutoOrientArrows(this._V.sourceArrowhead,this._V.targetArrowhead),this},createWatcher:function(t){function e(e,n){n=n||{};var r=null,o=e.previous(t)||{};return o.id&&this.stopListening(this.paper.getModelById(o.id),"change",i),n.id&&(r=this.paper.getModelById(n.id),this.listenTo(r,"change",i)),i.call(this,r,{cacheOnly:!0}),this}var i=n.partial(this.onEndModelChange,t);return e},onEndModelChange:function(t,e,i){var r=!i.cacheOnly,o=this.model,a=o.get(t)||{};if(e){var l=this.constructor.makeSelector(a),c="source"==t?"target":"source",u=o.get(c)||{},h=u.id&&this.constructor.makeSelector(u);if(i.handleBy===this.cid&&l==h)this[t+"BBox"]=this[c+"BBox"],this[t+"View"]=this[c+"View"],this[t+"Magnet"]=this[c+"Magnet"];else if(i.translateBy){var g=this[t+"BBox"];g.x+=i.tx,g.y+=i.ty}else{var d=this.paper.findViewByModel(a.id),p=d.el.querySelector(l);this[t+"BBox"]=d.getStrokeBBox(p),this[t+"View"]=d,this[t+"Magnet"]=p}if(i.handleBy===this.cid&&i.translateBy&&o.isEmbeddedIn(e)&&!n.isEmpty(o.get("vertices"))&&(r=!1),!this.updatePostponed&&u.id){var f=this.paper.getModelById(u.id);a.id===u.id&&(i.handleBy=this.cid),(i.handleBy===this.cid||i.translateBy&&f.isEmbeddedIn(i.translateBy))&&(this.updatePostponed=!0,r=!1)}}else this[t+"BBox"]=s.rect(a.x||0,a.y||0,1,1),this[t+"View"]=this[t+"Magnet"]=null;r&&(i.updateConnectionOnly=!0,this.update(o,null,i))},_translateAndAutoOrientArrows:function(t,e){t&&t.translateAndAutoOrient(this.sourcePoint,n.first(this.route)||this.targetPoint,this.paper.viewport),e&&e.translateAndAutoOrient(this.targetPoint,n.last(this.route)||this.sourcePoint,this.paper.viewport)},removeVertex:function(t){var e=n.clone(this.model.get("vertices"));return e&&e.length&&(e.splice(t,1),this.model.set("vertices",e,{ui:!0})),this},addVertex:function(t){for(var e,n=(this.model.get("vertices")||[]).slice(),i=n.slice(),o=this._V.connection.node.cloneNode(!1),s=o.getTotalLength(),a=20,l=n.length+1;l--&&(n.splice(l,0,t),r(o).attr("d",this.getPathData(this.findRoute(n))),e=o.getTotalLength(),e-s>a);)n=i.slice();return-1===l&&(l=0,n.splice(l,0,t)),this.model.set("vertices",n,{ui:!0}),l},sendToken:function(t,e,i){e=e||1e3,r(this.paper.viewport).append(t),r(t).animateAlongPath({dur:e+"ms",repeatCount:1},this._V.connection.node),n.delay(function(){r(t).remove(),i&&i()},e)},findRoute:function(t){var e=a.routers,i=this.model.get("router"),r=this.paper.options.defaultRouter;if(!i)if(this.model.get("manhattan"))i={name:"orthogonal"};else{if(!r)return t;i=r}var o=i.args||{},s=n.isFunction(i)?i:e[i.name];if(!n.isFunction(s))throw new Error('unknown router: "'+i.name+'"');var l=s.call(this,t||[],o,this);return l},getPathData:function(t){var e=a.connectors,i=this.model.get("connector"),r=this.paper.options.defaultConnector;i||(i=this.model.get("smooth")?{name:"smooth"}:r||{});var o=n.isFunction(i)?i:e[i.name],s=i.args||{};if(!n.isFunction(o))throw new Error('unknown connector: "'+i.name+'"');var l=o.call(this,this._markerCache.sourcePoint,this._markerCache.targetPoint,t||this.model.get("vertices")||{},s,this);return l},getConnectionPoint:function(t,e,i){var r;if(n.isEmpty(e)&&(e={x:0,y:0}),n.isEmpty(i)&&(i={x:0,y:0}),e.id){var o,a="source"===t?this.sourceBBox:this.targetBBox;if(i.id){var l="source"===t?this.targetBBox:this.sourceBBox;o=s.rect(l).intersectionWithLineFromCenterToPoint(s.rect(a).center()),o=o||s.rect(l).center()}else o=s.point(i);if(this.paper.options.perpendicularLinks||this.options.perpendicular){var c,u=s.rect(0,o.y,this.paper.options.width,1),h=s.rect(o.x,0,1,this.paper.options.height);if(u.intersect(s.rect(a)))switch(c=s.rect(a).sideNearestToPoint(o)){case"left":r=s.point(a.x,o.y);break;case"right":r=s.point(a.x+a.width,o.y);break;default:r=s.rect(a).center()}else if(h.intersect(s.rect(a)))switch(c=s.rect(a).sideNearestToPoint(o)){case"top":r=s.point(o.x,a.y);break;case"bottom":r=s.point(o.x,a.y+a.height);break;default:r=s.rect(a).center()}else r=s.rect(a).intersectionWithLineFromCenterToPoint(o),r=r||s.rect(a).center()}else if(this.paper.options.linkConnectionPoint){var g="target"===t?this.targetView:this.sourceView,d="target"===t?this.targetMagnet:this.sourceMagnet;r=this.paper.options.linkConnectionPoint(this,g,d,o)}else r=s.rect(a).intersectionWithLineFromCenterToPoint(o),r=r||s.rect(a).center()}else r=s.point(e);return r},getConnectionLength:function(){return this._V.connection.node.getTotalLength()},getPointAtLength:function(t){return this._V.connection.node.getPointAtLength(t)},_beforeArrowheadMove:function(){this._z=this.model.get("z"),this.model.toFront(),this.el.style.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets()},_afterArrowheadMove:function(){n.isNull(this._z)||(this.model.set("z",this._z,{ui:!0}),this._z=null),this.el.style.pointerEvents="visiblePainted",this.paper.options.markAvailable&&this._unmarkAvailableMagnets()},_createValidateConnectionArgs:function(t){function e(t,e){return n[o]=t,n[o+1]=t.el===e?void 0:e,n}var n=[];n[4]=t,n[5]=this;var i,r=0,o=0;"source"===t?(r=2,i="target"):(o=2,i="source");var s=this.model.get(i);return s.id&&(n[r]=this.paper.findViewByModel(s.id),n[r+1]=s.selector&&n[r].el.querySelector(s.selector)),e},_markAvailableMagnets:function(){var t=this.paper.model.getElements(),e=this.paper.options.validateConnection;n.chain(t).map(this.paper.findViewByModel,this.paper).each(function(t){var i="false"!==t.el.getAttribute("magnet")&&e.apply(this.paper,this._validateConnectionArgs(t,null)),o=n.filter(t.el.querySelectorAll("[magnet]"),function(n){return e.apply(this.paper,this._validateConnectionArgs(t,n))},this);i&&r(t.el).addClass("available-magnet"),n.each(o,function(t){r(t).addClass("available-magnet")}),(i||o.length)&&r(t.el).addClass("available-cell")},this).value()},_unmarkAvailableMagnets:function(){n.each(this.paper.el.querySelectorAll(".available-cell, .available-magnet"),function(t){r(t).removeClass("available-magnet").removeClass("available-cell")})},startArrowheadMove:function(t,e){e=n.defaults(e||{},{whenNotAllowed:"revert"}),this._action="arrowhead-move",this._whenNotAllowed=e.whenNotAllowed,this._arrowhead=t,this._initialEnd=n.clone(this.model.get(t))||{x:0,y:0},this._validateConnectionArgs=this._createValidateConnectionArgs(this._arrowhead),this._beforeArrowheadMove()},can:function(t){var e=n.isFunction(this.options.interactive)?this.options.interactive(this,"pointerdown"):this.options.interactive;return e===!1?!1:n.isObject(e)&&e[t]===!1?!1:!0},pointerdown:function(t,e,i){if(a.dia.CellView.prototype.pointerdown.apply(this,arguments),this.notify("link:pointerdown",t,e,i),this._dx=e,this._dy=i,null==t.target.getAttribute("magnet")){var o=n.isFunction(this.options.interactive)?this.options.interactive(this,"pointerdown"):this.options.interactive;if(o!==!1){var s,l=t.target.getAttribute("class"),c=t.target.parentNode.getAttribute("class");switch("label"===c?(l=c,s=t.target.parentNode):s=t.target,l){case"marker-vertex":this.can("vertexMove")&&(this._action="vertex-move",this._vertexIdx=t.target.getAttribute("idx"));break;case"marker-vertex-remove":case"marker-vertex-remove-area":this.can("vertexRemove")&&this.removeVertex(t.target.getAttribute("idx"));break;case"marker-arrowhead":this.can("arrowheadMove")&&this.startArrowheadMove(t.target.getAttribute("end"));break;case"label":this.can("labelMove")&&(this._action="label-move",this._labelIdx=parseInt(r(s).attr("label-idx"),10),this._samples=this._V.connection.sample(1),this._linkLength=this._V.connection.node.getTotalLength());break;default:var u=t.target.parentNode.getAttribute("event");u?"remove"===u?this.model.remove():this.paper.trigger(u,t,this,e,i):this.can("vertexAdd")&&(this._vertexIdx=this.addVertex({x:e,y:i}),this._action="vertex-move")}}}},pointermove:function(t,e,i){switch(this._action){case"vertex-move":var o=n.clone(this.model.get("vertices"));o[this._vertexIdx]={x:e,y:i},this.model.set("vertices",o,{ui:!0});break;case"label-move":for(var l,c,u,h,g={x:e,y:i},d=(this.model.get("labels")[this._labelIdx],this._samples),p=1/0,f=0,m=d.length;m>f;f++)u=d[f],h=s.line(u,g).squaredLength(),p>h&&(p=h,l=u,c=f);var I=d[c-1],v=d[c+1],C=(s.point(l).distance(g),0);I&&v?C=s.line(I,v).pointOffset(g):I?C=s.line(I,l).pointOffset(g):v&&(C=s.line(l,v).pointOffset(g)),this.model.label(this._labelIdx,{position:{distance:l.distance/this._linkLength,offset:C}});break;case"arrowhead-move":if(this.paper.options.snapLinks){var y=this.paper.options.snapLinks.radius||50,A=this.paper.findViewsInArea({x:e-y,y:i-y,width:2*y,height:2*y});this._closestView&&this._closestView.unhighlight(this._closestEnd.selector,{connecting:!0,snapping:!0}),this._closestView=this._closestEnd=null;var b,w=Number.MAX_VALUE,x=s.point(e,i);n.each(A,function(t){"false"!==t.el.getAttribute("magnet")&&(b=t.model.getBBox().center().distance(x),y>b&&w>b&&this.paper.options.validateConnection.apply(this.paper,this._validateConnectionArgs(t,null))&&(w=b,this._closestView=t,this._closestEnd={id:t.model.id})),t.$("[magnet]").each(n.bind(function(e,n){var i=r(n).bbox(!1,this.paper.viewport);b=x.distance({x:i.x+i.width/2,y:i.y+i.height/2}),y>b&&w>b&&this.paper.options.validateConnection.apply(this.paper,this._validateConnectionArgs(t,n))&&(w=b,this._closestView=t,this._closestEnd={id:t.model.id,selector:t.getSelector(n),port:n.getAttribute("port")})},this))},this),this._closestView&&this._closestView.highlight(this._closestEnd.selector,{connecting:!0,snapping:!0}),this.model.set(this._arrowhead,this._closestEnd||{x:e,y:i},{ui:!0})}else{var N="mousemove"===t.type?t.target:document.elementFromPoint(t.clientX,t.clientY);this._targetEvent!==N&&(this._magnetUnderPointer&&this._viewUnderPointer.unhighlight(this._magnetUnderPointer,{connecting:!0}),this._viewUnderPointer=this.paper.findView(N),this._viewUnderPointer?(this._magnetUnderPointer=this._viewUnderPointer.findMagnet(N),this._magnetUnderPointer&&this.paper.options.validateConnection.apply(this.paper,this._validateConnectionArgs(this._viewUnderPointer,this._magnetUnderPointer))?this._magnetUnderPointer&&this._viewUnderPointer.highlight(this._magnetUnderPointer,{connecting:!0}):this._magnetUnderPointer=null):this._magnetUnderPointer=null),this._targetEvent=N,this.model.set(this._arrowhead,{x:e,y:i},{ui:!0})}}this._dx=e,this._dy=i,a.dia.CellView.prototype.pointermove.apply(this,arguments),this.notify("link:pointermove",t,e,i)},pointerup:function(t,e,n){if("label-move"===this._action)this._samples=null;else if("arrowhead-move"===this._action){var i=this.paper.options,r=this._arrowhead;if(i.snapLinks)this._closestView&&this._closestView.unhighlight(this._closestEnd.selector,{connecting:!0,snapping:!0}),this._closestView=this._closestEnd=null;else{var o=this._viewUnderPointer,s=this._magnetUnderPointer;if(this._viewUnderPointer=null,this._magnetUnderPointer=null,s){o.unhighlight(s,{connecting:!0});var l=o.getSelector(s),c=s.getAttribute("port"),u={id:o.model.id};null!=l&&(u.port=c),null!=c&&(u.selector=l),this.model.set(r,u,{ui:!0})}}if(!this.paper.linkAllowed(this))switch(this._whenNotAllowed){case"remove":this.model.remove();break;case"revert":default:this.model.set(r,this._initialEnd,{ui:!0})}i.embeddingMode&&this.model.reparent()&&(this._z=null),this._afterArrowheadMove()}this._action=null,this._whenNotAllowed=null,this.notify("link:pointerup",t,e,n),a.dia.CellView.prototype.pointerup.apply(this,arguments)}},{makeSelector:function(t){var e='[model-id="'+t.id+'"]';return t.port?e+=' [port="'+t.port+'"]':t.selector&&(e+=" "+t.selector),e}}),a.dia.Paper=a.mvc.View.extend({className:"paper",options:{width:800,height:600,origin:{x:0,y:0},gridSize:1,perpendicularLinks:!1,elementView:a.dia.ElementView,linkView:a.dia.LinkView,snapLinks:!1,multiLinks:!0,guard:function(t,e){return!1},restrictTranslate:!1,markAvailable:!1,defaultLink:new a.dia.Link,defaultConnector:{name:"normal"},defaultRouter:null,validateMagnet:function(t,e){return"passive"!==e.getAttribute("magnet")},validateConnection:function(t,e,n,i,r,o){return("target"===r?n:t)instanceof a.dia.ElementView},embeddingMode:!1,validateEmbedding:function(t,e){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,clickThreshold:0,cellViewNamespace:a.shapes},events:{mousedown:"pointerdown",dblclick:"mousedblclick",click:"mouseclick",touchstart:"pointerdown",mousemove:"pointermove",touchmove:"pointermove","mouseover .element":"cellMouseover","mouseover .link":"cellMouseover","mouseout .element":"cellMouseout","mouseout .link":"cellMouseout",contextmenu:"contextmenu"},init:function(){n.bindAll(this,"pointerup"),this.options.origin=n.clone(this.options.origin),this.options.defaultConnector=n.clone(this.options.defaultConnector),this.svg=r("svg").node,this.viewport=r("g").addClass("viewport").node,this.defs=r("defs").node,r(this.svg).append([this.viewport,this.defs]),this.$el.append(this.svg),this.setOrigin(),this.setDimensions(),this.listenTo(this.model,"add",this.onCellAdded),this.listenTo(this.model,"remove",this.removeView),this.listenTo(this.model,"reset",this.resetViews),this.listenTo(this.model,"sort",this.sortViews),i(document).on("mouseup touchend",this.pointerup),this._mousemoved=0,this._views={},this.on({"cell:highlight":this.onCellHighlight,"cell:unhighlight":this.onCellUnhighlight})},onRemove:function(){this.removeViews(),i(document).off("mouseup touchend",this.pointerup)},setDimensions:function(t,e){t=this.options.width=t||this.options.width,e=this.options.height=e||this.options.height,r(this.svg).attr({width:t,height:e}),this.trigger("resize",t,e)},setOrigin:function(t,e){this.options.origin.x=t||0,this.options.origin.y=e||0,r(this.viewport).translate(t,e,{absolute:!0}),this.trigger("translate",t,e)},fitToContent:function(t,e,i,o){n.isObject(t)?(o=t,t=o.gridWidth||1,e=o.gridHeight||1,i=o.padding||0):(o=o||{},t=t||1,e=e||1,i=i||0),i=a.util.normalizeSides(i);var s=r(this.viewport).bbox(!0,this.svg),l=r(this.viewport).scale();s.x*=l.sx,s.y*=l.sy,s.width*=l.sx,s.height*=l.sy;var c=Math.max(Math.ceil((s.width+s.x)/t),1)*t,u=Math.max(Math.ceil((s.height+s.y)/e),1)*e,h=0,g=0;("negative"==o.allowNewOrigin&&s.x<0||"positive"==o.allowNewOrigin&&s.x>=0||"any"==o.allowNewOrigin)&&(h=Math.ceil(-s.x/t)*t,h+=i.left,c+=h),("negative"==o.allowNewOrigin&&s.y<0||"positive"==o.allowNewOrigin&&s.y>=0||"any"==o.allowNewOrigin)&&(g=Math.ceil(-s.y/e)*e,g+=i.top,u+=g),c+=i.right,u+=i.bottom,c=Math.max(c,o.minWidth||0),u=Math.max(u,o.minHeight||0),c=Math.min(c,o.maxWidth||Number.MAX_VALUE),u=Math.min(u,o.maxHeight||Number.MAX_VALUE);var d=c!=this.options.width||u!=this.options.height,p=h!=this.options.origin.x||g!=this.options.origin.y;p&&this.setOrigin(h,g),d&&this.setDimensions(c,u)},scaleContentToFit:function(t){var e=this.getContentBBox();if(e.width&&e.height){t=t||{},n.defaults(t,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE});var i=t.padding,o=t.minScaleX||t.minScale,a=t.maxScaleX||t.maxScale,l=t.minScaleY||t.minScale,c=t.maxScaleY||t.maxScale,u=t.fittingBBox||{
x:this.options.origin.x,y:this.options.origin.y,width:this.options.width,height:this.options.height};u=s.rect(u).moveAndExpand({x:i,y:i,width:-2*i,height:-2*i});var h=r(this.viewport).scale(),g=u.width/e.width*h.sx,d=u.height/e.height*h.sy;if(t.preserveAspectRatio&&(g=d=Math.min(g,d)),t.scaleGrid){var p=t.scaleGrid;g=p*Math.floor(g/p),d=p*Math.floor(d/p)}g=Math.min(a,Math.max(o,g)),d=Math.min(c,Math.max(l,d)),this.scale(g,d);var f=this.getContentBBox(),m=u.x-f.x,I=u.y-f.y;this.setOrigin(m,I)}},getContentBBox:function(){var t=this.viewport.getBoundingClientRect(),e=this.viewport.getScreenCTM(),n=this.viewport.getCTM(),i=s.rect({x:t.left-e.e+n.e,y:t.top-e.f+n.f,width:t.width,height:t.height});return i},getArea:function(){var t=this.viewport.getCTM().inverse(),e={x:0,y:0,width:this.options.width,height:this.options.height};return s.rect(r.transformRect(e,t))},getRestrictedArea:function(){var t;return t=n.isFunction(this.options.restrictTranslate)?this.options.restrictTranslate.apply(this,arguments):this.options.restrictTranslate===!0?this.getArea():this.options.restrictTranslate||null},createViewForModel:function(t){var n,i,r=this.options.cellViewNamespace,o=t.get("type")+"View",s=a.util.getByPath(r,o,".");t.isLink()?(n=this.options.linkView,i=a.dia.LinkView):(n=this.options.elementView,i=a.dia.ElementView);var l=n.prototype instanceof e.View?s||n:n.call(this,t)||s||i;return new l({model:t,interactive:this.options.interactive})},onCellAdded:function(t,e,i){if(this.options.async&&i.async!==!1&&n.isNumber(i.position)){if(this._asyncCells=this._asyncCells||[],this._asyncCells.push(t),0==i.position){if(this._frameId)throw new Error("another asynchronous rendering in progress");this.asyncRenderViews(this._asyncCells,i),delete this._asyncCells}}else this.renderView(t)},removeView:function(t){var e=this._views[t.id];return e&&(e.remove(),delete this._views[t.id]),e},renderView:function(t){var e=this._views[t.id]=this.createViewForModel(t);return r(this.viewport).append(e.el),e.paper=this,e.render(),i(e.el).find("image").on("dragstart",function(){return!1}),e},beforeRenderViews:function(t){return t.sort(function(t,e){return t instanceof a.dia.Link?1:-1}),t},afterRenderViews:function(){this.sortViews()},resetViews:function(t,e){i(this.viewport).empty(),this.removeViews();var r=t.models.slice();r=this.beforeRenderViews(r,e)||r,this._frameId&&(a.util.cancelFrame(this._frameId),delete this._frameId),this.options.async?this.asyncRenderViews(r,e):(n.each(r,this.renderView,this),this.sortViews())},removeViews:function(){n.invoke(this._views,"remove"),this._views={}},asyncBatchAdded:n.noop,asyncRenderViews:function(t,e){if(this._frameId){var i=this.options.async&&this.options.async.batchSize||50,r=t.splice(0,i),o=this.model.get("cells");n.each(r,function(t){t.collection===o&&this.renderView(t)},this),this.asyncBatchAdded()}t.length?this._frameId=a.util.nextFrame(function(){this.asyncRenderViews(t,e)},this):(delete this._frameId,this.afterRenderViews(e),this.trigger("render:done",e))},sortViews:function(){var t=i(this.viewport).children("[model-id]"),e=this.model.get("cells");a.util.sortElements(t,function(t,n){var r=e.get(i(t).attr("model-id")),o=e.get(i(n).attr("model-id"));return(r.get("z")||0)>(o.get("z")||0)?1:-1})},scale:function(t,e,i,o){e=e||t,n.isUndefined(i)&&(i=0,o=0),r(this.viewport).attr("transform","");var s=this.options.origin.x,a=this.options.origin.y;if(i||o||s||a){var l=s-i*(t-1),c=a-o*(e-1);this.setOrigin(l,c)}return r(this.viewport).scale(t,e),this.trigger("scale",t,e,i,o),this},rotate:function(t,e,i){if(n.isUndefined(e)){var o=this.viewport.getBBox();e=o.width/2,i=o.height/2}r(this.viewport).rotate(t,e,i)},findView:function(t){for(var e=n.isString(t)?this.viewport.querySelector(t):t instanceof i?t[0]:t;e&&e!==this.el&&e!==document;){var r=e.getAttribute("model-id");if(r)return this._views[r];e=e.parentNode}return void 0},findViewByModel:function(t){var e=n.isString(t)?t:t.id;return this._views[e]},findViewsFromPoint:function(t){t=s.point(t);var e=n.map(this.model.getElements(),this.findViewByModel,this);return n.filter(e,function(e){return e&&s.rect(e.vel.bbox(!1,this.viewport)).containsPoint(t)},this)},findViewsInArea:function(t,e){e=n.defaults(e||{},{strict:!1}),t=s.rect(t);var i=n.map(this.model.getElements(),this.findViewByModel,this),r=e.strict?"containsRect":"intersect";return n.filter(i,function(e){return e&&t[r](s.rect(e.vel.bbox(!1,this.viewport)))},this)},getModelById:function(t){return this.model.getCell(t)},snapToGrid:function(t){var e=r(this.viewport).toLocalPoint(t.x,t.y);return{x:s.snapToGrid(e.x,this.options.gridSize),y:s.snapToGrid(e.y,this.options.gridSize)}},clientToLocalPoint:function(t){t=s.point(t);var e=r("rect",{width:this.options.width,height:this.options.height,x:0,y:0,opacity:0});r(this.svg).prepend(e);var n=i(this.svg).offset();e.remove();var o=document.body.scrollTop||document.documentElement.scrollTop,a=document.body.scrollLeft||document.documentElement.scrollLeft;return t.offset(a-n.left,o-n.top),r.transformPoint(t,this.viewport.getCTM().inverse())},linkAllowed:function(t){var e;if(t instanceof a.dia.Link)e=t;else{if(!(t instanceof a.dia.LinkView))throw new Error("Must provide link model or view.");e=t.model}if(!this.options.multiLinks){var i=e.get("source"),r=e.get("target");if(i.id&&r.id){var o=e.getSourceElement();if(o){var s=this.model.getConnectedLinks(o,{outbound:!0,inbound:!1}),l=n.filter(s,function(t){var e=t.get("source"),n=t.get("target");return e&&e.id===i.id&&(!e.port||e.port===i.port)&&n&&n.id===r.id&&(!n.port||n.port===r.port)}).length;if(l>1)return!1}}}return this.options.linkPinning||n.has(e.get("source"),"id")&&n.has(e.get("target"),"id")?!0:!1},getDefaultLink:function(t,e){return n.isFunction(this.options.defaultLink)?this.options.defaultLink.call(this,t,e):this.options.defaultLink.clone()},onCellHighlight:function(t,e){r(e).addClass("highlighted")},onCellUnhighlight:function(t,e){r(e).removeClass("highlighted")},mousedblclick:function(t){t.preventDefault(),t=a.util.normalizeEvent(t);var e=this.findView(t.target);if(!this.guard(t,e)){var n=this.snapToGrid({x:t.clientX,y:t.clientY});e?e.pointerdblclick(t,n.x,n.y):this.trigger("blank:pointerdblclick",t,n.x,n.y)}},mouseclick:function(t){if(this._mousemoved<=this.options.clickThreshold){t=a.util.normalizeEvent(t);var e=this.findView(t.target);if(this.guard(t,e))return;var n=this.snapToGrid({x:t.clientX,y:t.clientY});e?e.pointerclick(t,n.x,n.y):this.trigger("blank:pointerclick",t,n.x,n.y)}},guard:function(t,e){return this.options.guard&&this.options.guard(t,e)?!0:e&&e.model&&e.model instanceof a.dia.Cell?!1:this.svg===t.target||this.el===t.target||i.contains(this.svg,t.target)?!1:!0},contextmenu:function(t){t=a.util.normalizeEvent(t);var e=this.findView(t.target);if(!this.guard(t,e)){var n=this.snapToGrid({x:t.clientX,y:t.clientY});e?e.contextmenu(t,n.x,n.y):this.trigger("blank:contextmenu",t,n.x,n.y)}},pointerdown:function(t){t=a.util.normalizeEvent(t);var e=this.findView(t.target);if(!this.guard(t,e)){t.preventDefault(),this._mousemoved=0;var n=this.snapToGrid({x:t.clientX,y:t.clientY});e?(this.sourceView=e,e.pointerdown(t,n.x,n.y)):this.trigger("blank:pointerdown",t,n.x,n.y)}},pointermove:function(t){if(t.preventDefault(),t=a.util.normalizeEvent(t),this.sourceView){this._mousemoved++;var e=this.snapToGrid({x:t.clientX,y:t.clientY});this.sourceView.pointermove(t,e.x,e.y)}},pointerup:function(t){t=a.util.normalizeEvent(t);var e=this.snapToGrid({x:t.clientX,y:t.clientY});this.sourceView?(this.sourceView.pointerup(t,e.x,e.y),this.sourceView=null):this.trigger("blank:pointerup",t,e.x,e.y)},cellMouseover:function(t){t=a.util.normalizeEvent(t);var e=this.findView(t.target);if(e){if(this.guard(t,e))return;e.mouseover(t)}},cellMouseout:function(t){t=a.util.normalizeEvent(t);var e=this.findView(t.target);if(e){if(this.guard(t,e))return;e.mouseout(t)}}}),a.shapes.basic={},a.shapes.basic.Generic=a.dia.Element.extend({defaults:a.util.deepSupplement({type:"basic.Generic",attrs:{".":{fill:"#ffffff",stroke:"none"}}},a.dia.Element.prototype.defaults)}),a.shapes.basic.Rect=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><rect/></g><text/></g>',defaults:a.util.deepSupplement({type:"basic.Rect",attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:100,height:60},text:{fill:"#000000",text:"","font-size":14,"ref-x":.5,"ref-y":.5,"text-anchor":"middle","y-alignment":"middle","font-family":"Arial, helvetica, sans-serif"}}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.basic.TextView=a.dia.ElementView.extend({initialize:function(){a.dia.ElementView.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:attrs",this.resize)}}),a.shapes.basic.Text=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><text/></g></g>',defaults:a.util.deepSupplement({type:"basic.Text",attrs:{text:{"font-size":18,fill:"#000000"}}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.basic.Circle=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><circle/></g><text/></g>',defaults:a.util.deepSupplement({type:"basic.Circle",size:{width:60,height:60},attrs:{circle:{fill:"#ffffff",stroke:"#000000",r:30,cx:30,cy:30},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.basic.Ellipse=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><ellipse/></g><text/></g>',defaults:a.util.deepSupplement({type:"basic.Ellipse",size:{width:60,height:40},attrs:{ellipse:{fill:"#ffffff",stroke:"#000000",rx:30,ry:20,cx:30,cy:20},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.basic.Polygon=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><polygon/></g><text/></g>',defaults:a.util.deepSupplement({type:"basic.Polygon",size:{width:60,height:40},attrs:{polygon:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.basic.Polyline=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><polyline/></g><text/></g>',defaults:a.util.deepSupplement({type:"basic.Polyline",size:{width:60,height:40},attrs:{polyline:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.basic.Image=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><image/></g><text/></g>',defaults:a.util.deepSupplement({type:"basic.Image",attrs:{text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.basic.Path=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><path/></g><text/></g>',defaults:a.util.deepSupplement({type:"basic.Path",size:{width:60,height:60},attrs:{path:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle",ref:"path","ref-x":.5,"ref-dy":10,fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.basic.Rhombus=a.shapes.basic.Path.extend({defaults:a.util.deepSupplement({type:"basic.Rhombus",attrs:{path:{d:"M 30 0 L 60 30 30 60 0 30 z"},text:{"ref-y":.5,"y-alignment":"middle"}}},a.shapes.basic.Path.prototype.defaults)}),a.shapes.basic.PortsModelInterface={initialize:function(){this.updatePortsAttrs(),this.on("change:inPorts change:outPorts",this.updatePortsAttrs,this),this.constructor.__super__.constructor.__super__.initialize.apply(this,arguments)},updatePortsAttrs:function(t){var e=this.get("attrs");n.each(this._portSelectors,function(t){e[t]&&delete e[t]}),this._portSelectors=[];var i={};n.each(this.get("inPorts"),function(t,e,r){var o=this.getPortAttrs(t,e,r.length,".inPorts","in");this._portSelectors=this._portSelectors.concat(n.keys(o)),n.extend(i,o)},this),n.each(this.get("outPorts"),function(t,e,r){var o=this.getPortAttrs(t,e,r.length,".outPorts","out");this._portSelectors=this._portSelectors.concat(n.keys(o)),n.extend(i,o)},this),this.attr(i,{silent:!0}),this.processPorts(),this.trigger("process:ports")},getPortSelector:function(t){var e=".inPorts",n=this.get("inPorts").indexOf(t);if(0>n&&(e=".outPorts",n=this.get("outPorts").indexOf(t),0>n))throw new Error("getPortSelector(): Port doesn't exist.");return e+">g:nth-child("+(n+1)+")>.port-body"}},a.shapes.basic.PortsViewInterface={initialize:function(){this.listenTo(this.model,"process:ports",this.update),a.dia.ElementView.prototype.initialize.apply(this,arguments)},update:function(){this.renderPorts(),a.dia.ElementView.prototype.update.apply(this,arguments)},renderPorts:function(){var t=this.$(".inPorts").empty(),e=this.$(".outPorts").empty(),i=n.template(this.model.portMarkup);n.each(n.filter(this.model.ports,function(t){return"in"===t.type}),function(e,n){t.append(r(i({id:n,port:e})).node)}),n.each(n.filter(this.model.ports,function(t){return"out"===t.type}),function(t,n){e.append(r(i({id:n,port:t})).node)})}},a.shapes.basic.TextBlock=a.shapes.basic.Generic.extend({markup:['<g class="rotatable"><g class="scalable"><rect/></g><switch>','<foreignObject requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" class="fobj">','<body xmlns="http://www.w3.org/1999/xhtml"><div/></body>',"</foreignObject>",'<text class="content"/>',"</switch></g>"].join(""),defaults:a.util.deepSupplement({type:"basic.TextBlock",attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:80,height:100},text:{fill:"#000000","font-size":14,"font-family":"Arial, helvetica, sans-serif"},".content":{text:"",ref:"rect","ref-x":.5,"ref-y":.5,"y-alignment":"middle","x-alignment":"middle"}},content:""},a.shapes.basic.Generic.prototype.defaults),initialize:function(){"undefined"!=typeof SVGForeignObjectElement&&(this.setForeignObjectSize(this,this.get("size")),this.setDivContent(this,this.get("content")),this.listenTo(this,"change:size",this.setForeignObjectSize),this.listenTo(this,"change:content",this.setDivContent)),a.shapes.basic.Generic.prototype.initialize.apply(this,arguments)},setForeignObjectSize:function(t,e){t.attr({".fobj":n.clone(e),div:{style:n.clone(e)}})},setDivContent:function(t,e){t.attr({div:{html:e}})}}),a.shapes.basic.TextBlockView=a.dia.ElementView.extend({initialize:function(){a.dia.ElementView.prototype.initialize.apply(this,arguments),"undefined"==typeof SVGForeignObjectElement&&(this.noSVGForeignObjectElement=!0,this.listenTo(this.model,"change:content",function(t){this.updateContent(t)}))},update:function(t,e){if(this.noSVGForeignObjectElement){var i=this.model,r=n.omit(e||i.get("attrs"),".content");a.dia.ElementView.prototype.update.call(this,i,r),(!e||n.has(e,".content"))&&this.updateContent(i,e)}else a.dia.ElementView.prototype.update.call(this,i,e)},updateContent:function(t,e){var i=n.merge({},(e||t.get("attrs"))[".content"]);delete i.text;var r=a.util.breakText(t.get("content"),t.get("size"),i,{svgDocument:this.paper.svg}),o=a.util.setByPath({},".content",i,"/");o[".content"].text=r,a.dia.ElementView.prototype.update.call(this,t,o)}}),a.routers.orthogonal=function(){function t(t,e){return t.x==e.x?t.y>e.y?"N":"S":t.y==e.y?t.x>e.x?"W":"E":null}function e(t,e){return t["W"==e||"E"==e?"width":"height"]}function i(t,e){return s.rect(t).moveAndExpand({x:-e,y:-e,width:2*e,height:2*e})}function r(t){return s.rect(t.x,t.y,0,0)}function o(t,e){var n=Math.min(t.x,e.x),i=Math.min(t.y,e.y),r=Math.max(t.x+t.width,e.x+e.width),o=Math.max(t.y+t.height,e.y+e.height);return s.rect(n,i,r-n,o-i)}function a(t,e,n){var i=s.point(t.x,e.y);return n.containsPoint(i)&&(i=s.point(e.x,t.y)),i}function l(e,n,i){var r=s.point(e.x,n.y),o=s.point(n.x,e.y),a=t(e,r),l=t(e,o),c=p[i],u=a==i||a!=c&&(l==c||l!=i)?r:o;return{points:[u],direction:t(u,n)}}function c(e,n,i){var r=a(e,n,i);return{points:[r],direction:t(r,n)}}function u(i,r,o,l){var c,u={},h=[s.point(i.x,r.y),s.point(r.x,i.y)],g=n.filter(h,function(t){return!o.containsPoint(t)}),d=n.filter(g,function(e){return t(e,i)!=l});if(d.length>0)c=n.filter(d,function(e){return t(i,e)==l}).pop(),c=c||d[0],u.points=[c],u.direction=t(c,r);else{c=n.difference(h,g)[0];var p=s.point(r).move(c,-e(o,l)/2),f=a(p,i,o);u.points=[f,p],u.direction=t(p,r)}return u}function h(n,i,r,o){var a=c(i,n,o),u=a.points[0];if(r.containsPoint(u)){a=c(n,i,r);var h=a.points[0];if(o.containsPoint(h)){var g=s.point(n).move(h,-e(r,t(n,h))/2),d=s.point(i).move(u,-e(o,t(i,u))/2),p=s.line(g,d).midpoint(),f=c(n,p,r),m=l(p,i,f.direction);a.points=[f.points[0],m.points[0]],a.direction=m.direction}}return a}function g(e,n,r,l,c){var u,h,g,d={},p=i(o(r,l),1),m=p.center().distance(n)>p.center().distance(e),I=m?n:e,v=m?e:n;return c?(u=s.point.fromPolar(p.width+p.height,f[c],I),u=p.pointNearestToPoint(u).move(u,-1)):u=p.pointNearestToPoint(I).move(I,1),h=a(u,v,p),u.round().equals(h.round())?(h=s.point.fromPolar(p.width+p.height,s.toRad(u.theta(I))+Math.PI/2,v),h=p.pointNearestToPoint(h).move(v,1).round(),g=a(u,h,p),d.points=m?[h,g,u]:[u,g,h]):d.points=m?[h,u]:[u,h],d.direction=m?t(u,n):t(h,n),d}function d(e,o,a){var d=o.elementPadding||20,p=[],f=i(a.sourceBBox,d),m=i(a.targetBBox,d);e=n.map(e,s.point),e.unshift(f.center()),e.push(m.center());for(var I,v=0,C=e.length-1;C>v;v++){var y=null,A=e[v],b=e[v+1],w=!!t(A,b);if(0==v)v+1==C?f.intersect(i(m,1))?y=g(A,b,f,m):w||(y=h(A,b,f,m)):f.containsPoint(b)?y=g(A,b,f,i(r(b),d)):w||(y=c(A,b,f));else if(v+1==C){var x=w&&t(b,A)==I;m.containsPoint(A)||x?y=g(A,b,i(r(A),d),m,I):w||(y=u(A,b,m,I))}else w||(y=l(A,b,I));y?(Array.prototype.push.apply(p,y.points),I=y.direction):I=t(A,b),C>v+1&&p.push(b)}return p}var p={N:"S",S:"N",E:"W",W:"E"},f={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};return d}(),a.routers.manhattan=function(t,e){"use strict";function n(t){this.map={},this.options=t,this.mapGridSize=100}function i(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}function r(t,e){for(var n,i=[],r={x:0,y:0},o=e;n=t[o];){var s=n.difference(o);s.equals(r)||(i.unshift(o),r=s),o=n}return i.unshift(o),i}function o(t,n,i){var r=i.step,o=t.center(),s=e.chain(i.directionMap).pick(n).map(function(e){var n=e.x*t.width/2,i=e.y*t.height/2,s=o.clone().offset(n,i);return t.containsPoint(s)&&s.offset(e.x*r,e.y*r),s.snapToGrid(r)}).value();return s}function s(e,n,i){var r=360/i;return Math.floor(t.normalizeAngle(e.theta(n)+r/2)/r)*r}function a(t,e){var n=Math.abs(t-e);return n>180?360-n:n}function l(t,e){for(var n=1/0,i=0,r=e.length;r>i;i++){var o=t.manhattanDistance(e[i]);n>o&&(n=o)}return n}function c(n,c,u,h){var g,d,p,f,m=h.step;if(n instanceof t.rect?(g=o(n,h.startDirections,h),p=n.center()):(p=n.clone().snapToGrid(m),g=[n]),c instanceof t.rect?(d=o(c,h.endDirections,h),f=c.center()):(f=c.clone().snapToGrid(m),d=[c]),g=e.filter(g,u.isPointAccessible,u),d=e.filter(d,u.isPointAccessible,u),g.length>0&&d.length>0){var I=new i,v={},C={};e.each(g,function(t){var e=t.toString();I.add(e,l(t,d)),C[e]=0});for(var y,A,b=h.directions,w=b.length,x=h.maximumLoops,N=e.invoke(d,"toString");!I.isEmpty()&&x>0;){var M=I.pop(),j=t.point(M),k=C[M],D=v[M]?s(v[M],j,w):null!=h.previousDirAngle?h.previousDirAngle:s(p,j,w);if(N.indexOf(M)>=0&&(A=a(D,s(j,f,w)),j.equals(f)||180>A))return h.previousDirAngle=D,r(v,j);for(var T=0;w>T;T++)if(y=b[T],A=a(D,y.angle),!(A>h.maxAllowedDirectionChange)){var z=j.clone().offset(y.offsetX,y.offsetY),S=z.toString();if(!I.isClose(S)&&u.isPointAccessible(z)){var Z=k+y.cost+h.penalties[A];(!I.isOpen(S)||Z<C[S])&&(v[S]=j,C[S]=Z,I.add(S,Z+l(z,d)))}}x--}}return h.fallbackRoute(p,f,h)}function u(n){n.directions=e.result(n,"directions"),n.penalties=e.result(n,"penalties"),n.paddingBox=e.result(n,"paddingBox"),e.each(n.directions,function(e){var n=new t.point(0,0),i=new t.point(e.offsetX,e.offsetY),r=t.normalizeAngle(n.theta(i));e.angle=r})}function h(i,r){u(r),this.options.perpendicular=!!r.perpendicular;for(var o=t.rect(this.sourceBBox).moveAndExpand(r.paddingBox),s=t.rect(this.targetBBox).moveAndExpand(r.paddingBox),a=new n(r).build(this.paper.model,this.model),l=e.map(i,t.point),h=[],g=o.center().snapToGrid(r.step),d=0,p=l.length;p>=d;d++){var f=null,m=I||o,I=l[d];if(!I){I=s;var v=!this.model.get("source").id||!this.model.get("target").id;if(v&&e.isFunction(r.draggingRoute)){var C=m instanceof t.rect?m.center():m;f=r.draggingRoute(C,I.origin(),r)}}f=f||c(m,I,a,r);var y=e.first(f);y&&y.equals(g)&&f.shift(),g=e.last(f)||g,Array.prototype.push.apply(h,f)}return h}var g={step:10,perpendicular:!0,excludeEnds:[],excludeTypes:["basic.Text"],maximumLoops:2e3,startDirections:["left","right","top","bottom"],endDirections:["left","right","top","bottom"],directionMap:{right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0},top:{x:0,y:-1}},maxAllowedDirectionChange:90,paddingBox:function(){var t=this.step;return{x:-t,y:-t,width:2*t,height:2*t}},directions:function(){var t=this.step;return[{offsetX:t,offsetY:0,cost:t},{offsetX:0,offsetY:t,cost:t},{offsetX:-t,offsetY:0,cost:t},{offsetX:0,offsetY:-t,cost:t}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},fallbackRoute:function(e,n,i){var r=(i.previousDirAngle||0)%180===0?t.point(e.x,n.y):t.point(n.x,e.y);return[r,n]},draggingRoute:null};return n.prototype.build=function(t,n){var i=this.options,r=e.chain(i.excludeEnds).map(n.get,n).pluck("id").map(t.getCell,t).value(),o=[],s=t.getCell(n.get("source").id);s&&(o=e.union(o,e.map(s.getAncestors(),"id")));var a=t.getCell(n.get("target").id);a&&(o=e.union(o,e.map(a.getAncestors(),"id")));var l=this.mapGridSize;return e.chain(t.getElements()).difference(r).reject(function(t){return e.contains(i.excludeTypes,t.get("type"))||e.contains(o,t.id)}).invoke("getBBox").invoke("moveAndExpand",i.paddingBox).foldl(function(t,e){for(var n=e.origin().snapToGrid(l),i=e.corner().snapToGrid(l),r=n.x;r<=i.x;r+=l)for(var o=n.y;o<=i.y;o+=l){var s=r+"@"+o;t[s]=t[s]||[],t[s].push(e)}return t},this.map).value(),this},n.prototype.isPointAccessible=function(t){var n=t.clone().snapToGrid(this.mapGridSize).toString();return e.every(this.map[n],function(e){return!e.containsPoint(t)})},i.prototype.add=function(t,n){this.hash[t]?this.items.splice(this.items.indexOf(t),1):this.hash[t]=this.OPEN,this.values[t]=n;var i=e.sortedIndex(this.items,t,function(t){return this.values[t]},this);this.items.splice(i,0,t)},i.prototype.remove=function(t){this.hash[t]=this.CLOSE},i.prototype.isOpen=function(t){return this.hash[t]===this.OPEN},i.prototype.isClose=function(t){return this.hash[t]===this.CLOSE},i.prototype.isEmpty=function(){return 0===this.items.length},i.prototype.pop=function(){var t=this.items.shift();return this.remove(t),t},function(t,n,i){return h.call(i,t,e.extend({},g,n))}}(s,n),a.routers.metro=function(){if(!n.isFunction(a.routers.manhattan))throw"Metro requires the manhattan router.";var t={diagonalCost:null,directions:function(){var t=this.step,e=this.diagonalCost||Math.ceil(Math.sqrt(t*t<<1));return[{offsetX:t,offsetY:0,cost:t},{offsetX:t,offsetY:t,cost:e},{offsetX:0,offsetY:t,cost:t},{offsetX:-t,offsetY:t,cost:e},{offsetX:-t,offsetY:0,cost:t},{offsetX:-t,offsetY:-t,cost:e},{offsetX:0,offsetY:-t,cost:t},{offsetX:t,offsetY:-t,cost:e}]},maxAllowedDirectionChange:45,fallbackRoute:function(t,e,n){var i=t.theta(e),r={x:e.x,y:t.y},o={x:t.x,y:e.y};if(i%180>90){var a=r;r=o,o=a}var l=45>i%90?r:o,c=s.line(t,l),u=90*Math.ceil(i/90),h=s.point.fromPolar(c.squaredLength(),s.toRad(u+135),l),g=s.line(e,h),d=c.intersection(g);return d?[d.round(),e]:[e]}};return function(e,i,r){return a.routers.manhattan(e,n.extend({},t,i),r)}}(),a.routers.oneSide=function(t,e,n){var i,r,o,s=e.side||"bottom",a=e.padding||40,l=n.sourceBBox,c=n.targetBBox,u=l.center(),h=c.center();switch(s){case"bottom":o=1,i="y",r="height";break;case"top":o=-1,i="y",r="height";break;case"left":o=-1,i="x",r="width";break;case"right":o=1,i="x",r="width";break;default:throw new Error("Router: invalid side")}return u[i]+=o*(l[r]/2+a),h[i]+=o*(c[r]/2+a),o*(u[i]-h[i])>0?h[i]=u[i]:u[i]=h[i],[u].concat(t,h)},a.connectors.normal=function(t,e,i){var r=["M",t.x,t.y];return n.each(i,function(t){r.push(t.x,t.y)}),r.push(e.x,e.y),r.join(" ")},a.connectors.rounded=function(t,e,i,r){r=r||{};var o,a,l,c,u,h,g=r.radius||10,d=["M",t.x,t.y];return n.each(i,function(n,r){u=i[r-1]||t,h=i[r+1]||e,l=c||s.point(n).distance(u)/2,c=s.point(n).distance(h)/2,o=s.point(n).move(u,-Math.min(g,l)).round(),a=s.point(n).move(h,-Math.min(g,c)).round(),d.push(o.x,o.y,"S",n.x,n.y,a.x,a.y,"L")}),d.push(e.x,e.y),d.join(" ")},a.connectors.smooth=function(t,e,n){var i;if(n.length)i=s.bezier.curveThroughPoints([t].concat(n).concat([e]));else{var r=t.x<e.x?e.x-(e.x-t.x)/2:t.x-(t.x-e.x)/2;i=["M",t.x,t.y,"C",r,t.y,r,e.y,e.x,e.y]}return i.join(" ")},a.connectors.jumpover=function(t,e){function n(t,n,i){var r=[].concat(t,i,n);return r.reduce(function(t,n,i){var o=r[i+1];return null!=o&&(t[i]=e.line(n,o)),t},[])}function i(t){var e=t.paper._jumpOverUpdateList;null==e&&(e=t.paper._jumpOverUpdateList=[],t.paper.on("cell:pointerup",r),t.paper.model.on("reset",function(){e=[]})),e.indexOf(t)<0&&(e.push(t),t.listenToOnce(t.model,"change:connector remove",function(){e.splice(e.indexOf(t),1)}))}function r(){for(var t=this._jumpOverUpdateList,e=0;e<t.length;e++)t[e].update()}function o(e,n){return t(n).map(function(t){return e.intersection(t)}).compact().value()}function s(t,n){return e.line(t,n).squaredLength()}function a(t,n,i){return n.reduce(function(r,o,s){if(o.skip===!0)return r;var a=r.pop()||t,l=e.point(o).move(a.start,-i),c=e.point(o).move(a.start,+i),u=n[s+1];if(null!=u){var g=c.distance(u);i>=g&&(c=u.move(a.start,g),u.skip=!0)}else{var d=l.distance(a.end);if(2*i+h>d)return r.push(a),r}var p=c.distance(a.start);if(2*i+h>p)return r.push(a),r;var f=e.line(l,c);return f.isJump=!0,r.push(e.line(a.start,l),f,e.line(c,a.end)),r},[])}function l(n,i,r){var o=["M",n[0].start.x,n[0].start.y],s=t(n).map(function(t){if(t.isJump){var n;if("arc"===r){n=t.start.difference(t.end);var o=Number(n.x<0&&n.y<0);return["A",i,i,0,0,o,t.end.x,t.end.y]}if("gap"===r)return["M",t.end.x,t.end.y];if("cubic"===r){n=t.start.difference(t.end);var s=t.start.theta(t.end),a=.6*i,l=1.35*i;n.x<0&&n.y<0&&(l*=-1);var c=e.point(t.start.x+a,t.start.y+l).rotate(t.start,s),u=e.point(t.end.x-a,t.end.y+l).rotate(t.end,s);return["C",c.x,c.y,u.x,u.y,t.end.x,t.end.y]}}return["L",t.end.x,t.end.y]}).flatten().value();return[].concat(o,s).join(" ")}var c=5,u=["arc","gap","cubic"],h=1,g=["smooth"];return function(e,r,h,d){i(this);var p=d.size||c,f=d.jump&&(""+d.jump).toLowerCase(),m=d.ignoreConnectors||g;-1===u.indexOf(f)&&(f=u[0]);var I=this.paper,v=I.model,C=v.getLinks();if(1===C.length)return l(n(e,r,h),p,f);var y=this.model,A=C.indexOf(y),b=I.options.defaultConnector||{},w=C.filter(function(e,n){var i=e.get("connector")||b;return t.contains(m,i.name)?!1:n>A?"jumpover"!==i.name:!0}),x=w.map(function(t){return I.findViewByModel(t)}),N=n(e,r,h),M=x.map(function(t){return null==t?[]:t===this?N:n(t.sourcePoint,t.targetPoint,t.route)},this),j=N.reduce(function(e,n){var i=t(w).map(function(t,e){return t===y?null:o(n,M[e])}).flatten().compact().sortBy(t.partial(s,n.start)).value();return i.length>0?e.push.apply(e,a(n,i,p)):e.push(n),e},[]);return l(j,p,f)}}(n,s),a.shapes.erd={},a.shapes.erd.Entity=a.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><polygon class="outer"/><polygon class="inner"/></g><text/></g>',defaults:a.util.deepSupplement({type:"erd.Entity",size:{width:150,height:60},attrs:{".outer":{fill:"#2ECC71",stroke:"#27AE60","stroke-width":2,points:"100,0 100,60 0,60 0,0"},".inner":{fill:"#2ECC71",stroke:"#27AE60","stroke-width":2,points:"95,5 95,55 5,55 5,5",display:"none"},text:{text:"Entity","font-family":"Arial","font-size":14,ref:".outer","ref-x":.5,"ref-y":.5,"x-alignment":"middle","y-alignment":"middle"}}},a.dia.Element.prototype.defaults)}),a.shapes.erd.WeakEntity=a.shapes.erd.Entity.extend({defaults:a.util.deepSupplement({type:"erd.WeakEntity",attrs:{".inner":{display:"auto"},text:{text:"Weak Entity"}}},a.shapes.erd.Entity.prototype.defaults)}),a.shapes.erd.Relationship=a.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><polygon class="outer"/><polygon class="inner"/></g><text/></g>',defaults:a.util.deepSupplement({type:"erd.Relationship",size:{width:80,height:80},attrs:{".outer":{fill:"#3498DB",stroke:"#2980B9","stroke-width":2,points:"40,0 80,40 40,80 0,40"},".inner":{fill:"#3498DB",stroke:"#2980B9","stroke-width":2,points:"40,5 75,40 40,75 5,40",display:"none"},text:{text:"Relationship","font-family":"Arial","font-size":12,ref:".","ref-x":.5,"ref-y":.5,"x-alignment":"middle","y-alignment":"middle"}}},a.dia.Element.prototype.defaults)}),a.shapes.erd.IdentifyingRelationship=a.shapes.erd.Relationship.extend({defaults:a.util.deepSupplement({type:"erd.IdentifyingRelationship",attrs:{".inner":{display:"auto"},text:{text:"Identifying"}}},a.shapes.erd.Relationship.prototype.defaults)}),a.shapes.erd.Attribute=a.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><ellipse class="outer"/><ellipse class="inner"/></g><text/></g>',defaults:a.util.deepSupplement({type:"erd.Attribute",size:{width:100,height:50},attrs:{ellipse:{transform:"translate(50, 25)"},".outer":{stroke:"#D35400","stroke-width":2,cx:0,cy:0,rx:50,ry:25,fill:"#E67E22"},".inner":{stroke:"#D35400","stroke-width":2,cx:0,cy:0,rx:45,ry:20,fill:"#E67E22",display:"none"},text:{"font-family":"Arial","font-size":14,ref:".","ref-x":.5,"ref-y":.5,"x-alignment":"middle","y-alignment":"middle"}}},a.dia.Element.prototype.defaults)}),a.shapes.erd.Multivalued=a.shapes.erd.Attribute.extend({defaults:a.util.deepSupplement({type:"erd.Multivalued",attrs:{".inner":{display:"block"},text:{text:"multivalued"}}},a.shapes.erd.Attribute.prototype.defaults)}),a.shapes.erd.Derived=a.shapes.erd.Attribute.extend({defaults:a.util.deepSupplement({type:"erd.Derived",attrs:{".outer":{"stroke-dasharray":"3,5"},text:{text:"derived"}}},a.shapes.erd.Attribute.prototype.defaults)}),a.shapes.erd.Key=a.shapes.erd.Attribute.extend({defaults:a.util.deepSupplement({type:"erd.Key",attrs:{ellipse:{"stroke-width":4},text:{text:"key","font-weight":"800","text-decoration":"underline"}}},a.shapes.erd.Attribute.prototype.defaults)}),a.shapes.erd.Normal=a.shapes.erd.Attribute.extend({defaults:a.util.deepSupplement({type:"erd.Normal",attrs:{text:{text:"Normal"}}},a.shapes.erd.Attribute.prototype.defaults)}),a.shapes.erd.ISA=a.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><polygon/></g><text/></g>',defaults:a.util.deepSupplement({type:"erd.ISA",size:{width:100,height:50},attrs:{polygon:{points:"0,0 50,50 100,0",fill:"#F1C40F",stroke:"#F39C12","stroke-width":2},text:{text:"ISA","font-size":18,ref:"polygon","ref-x":.5,"ref-y":.3,"x-alignment":"middle","y-alignment":"middle"}}},a.dia.Element.prototype.defaults)}),a.shapes.erd.Line=a.dia.Link.extend({defaults:{type:"erd.Line"},cardinality:function(t){this.set("labels",[{position:-20,attrs:{text:{dy:-8,text:t}}}])}}),a.shapes.fsa={},a.shapes.fsa.State=a.shapes.basic.Circle.extend({defaults:a.util.deepSupplement({type:"fsa.State",attrs:{circle:{"stroke-width":3},text:{"font-weight":"800"}}},a.shapes.basic.Circle.prototype.defaults)}),a.shapes.fsa.StartState=a.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><circle/></g></g>',defaults:a.util.deepSupplement({type:"fsa.StartState",size:{width:20,height:20},attrs:{circle:{transform:"translate(10, 10)",r:10,fill:"#000000"}}},a.dia.Element.prototype.defaults)}),a.shapes.fsa.EndState=a.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><circle class="outer"/><circle class="inner"/></g></g>',defaults:a.util.deepSupplement({type:"fsa.EndState",size:{width:20,height:20},attrs:{".outer":{transform:"translate(10, 10)",r:10,fill:"#ffffff",stroke:"#000000"},".inner":{transform:"translate(10, 10)",r:6,fill:"#000000"}}},a.dia.Element.prototype.defaults)}),a.shapes.fsa.Arrow=a.dia.Link.extend({defaults:a.util.deepSupplement({type:"fsa.Arrow",attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z"}},smooth:!0},a.dia.Link.prototype.defaults)}),a.shapes.org={},a.shapes.org.Member=a.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><rect class="card"/><image/></g><text class="rank"/><text class="name"/></g>',
defaults:a.util.deepSupplement({type:"org.Member",size:{width:180,height:70},attrs:{rect:{width:170,height:60},".card":{fill:"#FFFFFF",stroke:"#000000","stroke-width":2,"pointer-events":"visiblePainted",rx:10,ry:10},image:{width:48,height:48,ref:".card","ref-x":10,"ref-y":5},".rank":{"text-decoration":"underline",ref:".card","ref-x":.9,"ref-y":.2,"font-family":"Courier New","font-size":14,"text-anchor":"end"},".name":{"font-weight":"800",ref:".card","ref-x":.9,"ref-y":.6,"font-family":"Courier New","font-size":14,"text-anchor":"end"}}},a.dia.Element.prototype.defaults)}),a.shapes.org.Arrow=a.dia.Link.extend({defaults:{type:"org.Arrow",source:{selector:".card"},target:{selector:".card"},attrs:{".connection":{stroke:"#585858","stroke-width":3}},z:-1}}),a.shapes.chess={},a.shapes.chess.KingWhite=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;"><path      d="M 22.5,11.63 L 22.5,6"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path      d="M 20,8 L 25,8"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path      d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25"      style="fill:#ffffff; stroke:#000000; stroke-linecap:butt; stroke-linejoin:miter;" />    <path      d="M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z "      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 11.5,30 C 17,27 27,27 32.5,30"      style="fill:none; stroke:#000000;" />    <path      d="M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5"      style="fill:none; stroke:#000000;" />    <path      d="M 11.5,37 C 17,34 27,34 32.5,37"      style="fill:none; stroke:#000000;" />  </g></g></g>',defaults:a.util.deepSupplement({type:"chess.KingWhite",size:{width:42,height:38}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.chess.KingBlack=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path       d="M 22.5,11.63 L 22.5,6"       style="fill:none; stroke:#000000; stroke-linejoin:miter;"       id="path6570" />    <path       d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25"       style="fill:#000000;fill-opacity:1; stroke-linecap:butt; stroke-linejoin:miter;" />    <path       d="M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z "       style="fill:#000000; stroke:#000000;" />    <path       d="M 20,8 L 25,8"       style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path       d="M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.51,26.6 L 22.5,24.5 C 20,18 9.906,14 6.997,19.85 C 4.5,25.5 11.85,28.85 11.85,28.85"       style="fill:none; stroke:#ffffff;" />    <path       d="M 11.5,30 C 17,27 27,27 32.5,30 M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5 M 11.5,37 C 17,34 27,34 32.5,37"       style="fill:none; stroke:#ffffff;" />  </g></g></g>',defaults:a.util.deepSupplement({type:"chess.KingBlack",size:{width:42,height:38}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.chess.QueenWhite=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(-1,-1)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(15.5,-5.5)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(32,-1)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(7,-4.5)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(24,-4)" />    <path      d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38,14 L 31,25 L 31,11 L 25.5,24.5 L 22.5,9.5 L 19.5,24.5 L 14,10.5 L 14,25 L 7,14 L 9,26 z "      style="stroke-linecap:butt;" />    <path      d="M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z "      style="stroke-linecap:butt;" />    <path      d="M 11.5,30 C 15,29 30,29 33.5,30"      style="fill:none;" />    <path      d="M 12,33.5 C 18,32.5 27,32.5 33,33.5"      style="fill:none;" />  </g></g></g>',defaults:a.util.deepSupplement({type:"chess.QueenWhite",size:{width:42,height:38}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.chess.QueenBlack=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#000000; stroke:none;">      <circle cx="6"    cy="12" r="2.75" />      <circle cx="14"   cy="9"  r="2.75" />      <circle cx="22.5" cy="8"  r="2.75" />      <circle cx="31"   cy="9"  r="2.75" />      <circle cx="39"   cy="12" r="2.75" />    </g>    <path       d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z"       style="stroke-linecap:butt; stroke:#000000;" />    <path       d="M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z"       style="stroke-linecap:butt;" />    <path       d="M 11,38.5 A 35,35 1 0 0 34,38.5"       style="fill:none; stroke:#000000; stroke-linecap:butt;" />    <path       d="M 11,29 A 35,35 1 0 1 34,29"       style="fill:none; stroke:#ffffff;" />    <path       d="M 12.5,31.5 L 32.5,31.5"       style="fill:none; stroke:#ffffff;" />    <path       d="M 11.5,34.5 A 35,35 1 0 0 33.5,34.5"       style="fill:none; stroke:#ffffff;" />    <path       d="M 10.5,37.5 A 35,35 1 0 0 34.5,37.5"       style="fill:none; stroke:#ffffff;" />  </g></g></g>',defaults:a.util.deepSupplement({type:"chess.QueenBlack",size:{width:42,height:38}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.chess.RookWhite=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z "      style="stroke-linecap:butt;" />    <path      d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z "      style="stroke-linecap:butt;" />    <path      d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14"      style="stroke-linecap:butt;" />    <path      d="M 34,14 L 31,17 L 14,17 L 11,14" />    <path      d="M 31,17 L 31,29.5 L 14,29.5 L 14,17"      style="stroke-linecap:butt; stroke-linejoin:miter;" />    <path      d="M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5" />    <path      d="M 11,14 L 34,14"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />  </g></g></g>',defaults:a.util.deepSupplement({type:"chess.RookWhite",size:{width:32,height:34}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.chess.RookBlack=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z "      style="stroke-linecap:butt;" />    <path      d="M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z "      style="stroke-linecap:butt;" />    <path      d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z "      style="stroke-linecap:butt;" />    <path      d="M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z "      style="stroke-linecap:butt;stroke-linejoin:miter;" />    <path      d="M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z "      style="stroke-linecap:butt;" />    <path      d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z "      style="stroke-linecap:butt;" />    <path      d="M 12,35.5 L 33,35.5 L 33,35.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 13,31.5 L 32,31.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 14,29.5 L 31,29.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 14,16.5 L 31,16.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 11,14 L 34,14"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />  </g></g></g>',defaults:a.util.deepSupplement({type:"chess.RookBlack",size:{width:32,height:34}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.chess.BishopWhite=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-rule:evenodd; fill-opacity:1; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#ffffff; stroke:#000000; stroke-linecap:butt;">       <path        d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z" />      <path        d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z" />      <path        d="M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z" />    </g>    <path      d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />  </g></g></g>',defaults:a.util.deepSupplement({type:"chess.BishopWhite",size:{width:38,height:38}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.chess.BishopBlack=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-rule:evenodd; fill-opacity:1; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#000000; stroke:#000000; stroke-linecap:butt;">       <path        d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z" />      <path        d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z" />      <path        d="M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z" />    </g>    <path       d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18"       style="fill:none; stroke:#ffffff; stroke-linejoin:miter;" />  </g></g></g>',defaults:a.util.deepSupplement({type:"chess.BishopBlack",size:{width:38,height:38}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.chess.KnightWhite=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18"      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10"      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z"      style="fill:#000000; stroke:#000000;" />    <path      d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z"      transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)"      style="fill:#000000; stroke:#000000;" />  </g></g></g>',defaults:a.util.deepSupplement({type:"chess.KnightWhite",size:{width:38,height:37}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.chess.KnightBlack=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18"      style="fill:#000000; stroke:#000000;" />    <path      d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10"      style="fill:#000000; stroke:#000000;" />    <path      d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z"      style="fill:#ffffff; stroke:#ffffff;" />    <path      d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z"      transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)"      style="fill:#ffffff; stroke:#ffffff;" />    <path      d="M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z "      style="fill:#ffffff; stroke:none;" />  </g></g></g>',defaults:a.util.deepSupplement({type:"chess.KnightBlack",size:{width:38,height:37}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.chess.PawnWhite=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><path d="M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z "  style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:nonzero; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:miter; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;" /></g></g>',defaults:a.util.deepSupplement({type:"chess.PawnWhite",size:{width:28,height:33}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.chess.PawnBlack=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><path d="M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z "  style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:nonzero; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:miter; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;" /></g></g>',defaults:a.util.deepSupplement({type:"chess.PawnBlack",size:{width:28,height:33}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.pn={},a.shapes.pn.Place=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><circle class="root"/><g class="tokens" /></g><text class="label"/></g>',defaults:a.util.deepSupplement({type:"pn.Place",size:{width:50,height:50},attrs:{".root":{r:25,fill:"#ffffff",stroke:"#000000",transform:"translate(25, 25)"},".label":{"text-anchor":"middle","ref-x":.5,"ref-y":-20,ref:".root",fill:"#000000","font-size":12},".tokens > circle":{fill:"#000000",r:5},".tokens.one > circle":{transform:"translate(25, 25)"},".tokens.two > circle:nth-child(1)":{transform:"translate(19, 25)"},".tokens.two > circle:nth-child(2)":{transform:"translate(31, 25)"},".tokens.three > circle:nth-child(1)":{transform:"translate(18, 29)"},".tokens.three > circle:nth-child(2)":{transform:"translate(25, 19)"},".tokens.three > circle:nth-child(3)":{transform:"translate(32, 29)"},".tokens.alot > text":{transform:"translate(25, 18)","text-anchor":"middle",fill:"#000000"}}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.pn.PlaceView=a.dia.ElementView.extend({initialize:function(){a.dia.ElementView.prototype.initialize.apply(this,arguments),this.model.on("change:tokens",function(){this.renderTokens(),this.update()},this)},render:function(){a.dia.ElementView.prototype.render.apply(this,arguments),this.renderTokens(),this.update()},renderTokens:function(){var t=this.$(".tokens").empty();t[0].className.baseVal="tokens";var e=this.model.get("tokens");if(e)switch(e){case 1:t[0].className.baseVal+=" one",t.append(r("<circle/>").node);break;case 2:t[0].className.baseVal+=" two",t.append(r("<circle/>").node,r("<circle/>").node);break;case 3:t[0].className.baseVal+=" three",t.append(r("<circle/>").node,r("<circle/>").node,r("<circle/>").node);break;default:t[0].className.baseVal+=" alot",t.append(r("<text/>").text(e+"").node)}}}),a.shapes.pn.Transition=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><rect class="root"/></g></g><text class="label"/>',defaults:a.util.deepSupplement({type:"pn.Transition",size:{width:12,height:50},attrs:{rect:{width:12,height:50,fill:"#000000",stroke:"#000000"},".label":{"text-anchor":"middle","ref-x":.5,"ref-y":-20,ref:"rect",fill:"#000000","font-size":12}}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.pn.Link=a.dia.Link.extend({defaults:a.util.deepSupplement({type:"pn.Link",attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z"}}},a.dia.Link.prototype.defaults)}),a.shapes.devs={},a.shapes.devs.Model=a.shapes.basic.Generic.extend(n.extend({},a.shapes.basic.PortsModelInterface,{markup:'<g class="rotatable"><g class="scalable"><rect class="body"/></g><text class="label"/><g class="inPorts"/><g class="outPorts"/></g>',portMarkup:'<g class="port port<%= id %>"><circle class="port-body"/><text class="port-label"/></g>',defaults:a.util.deepSupplement({type:"devs.Model",size:{width:1,height:1},inPorts:[],outPorts:[],attrs:{".":{magnet:!1},".body":{width:150,height:250,stroke:"#000000"},".port-body":{r:10,magnet:!0,stroke:"#000000"},text:{"pointer-events":"none"},".label":{text:"Model","ref-x":.5,"ref-y":10,ref:".body","text-anchor":"middle",fill:"#000000"},".inPorts .port-label":{x:-15,dy:4,"text-anchor":"end",fill:"#000000"},".outPorts .port-label":{x:15,dy:4,fill:"#000000"}}},a.shapes.basic.Generic.prototype.defaults),getPortAttrs:function(t,e,i,r,o){var s={},a="port"+e,l=r+">."+a,c=l+">.port-label",u=l+">.port-body";return s[c]={text:t},s[u]={port:{id:t||n.uniqueId(o),type:o}},s[l]={ref:".body","ref-y":(e+.5)*(1/i)},".outPorts"===r&&(s[l]["ref-dx"]=0),s}})),a.shapes.devs.Atomic=a.shapes.devs.Model.extend({defaults:a.util.deepSupplement({type:"devs.Atomic",size:{width:80,height:80},attrs:{".body":{fill:"salmon"},".label":{text:"Atomic"},".inPorts .port-body":{fill:"PaleGreen"},".outPorts .port-body":{fill:"Tomato"}}},a.shapes.devs.Model.prototype.defaults)}),a.shapes.devs.Coupled=a.shapes.devs.Model.extend({defaults:a.util.deepSupplement({type:"devs.Coupled",size:{width:200,height:300},attrs:{".body":{fill:"seaGreen"},".label":{text:"Coupled"},".inPorts .port-body":{fill:"PaleGreen"},".outPorts .port-body":{fill:"Tomato"}}},a.shapes.devs.Model.prototype.defaults)}),a.shapes.devs.Link=a.dia.Link.extend({defaults:{type:"devs.Link",attrs:{".connection":{"stroke-width":2}}}}),a.shapes.devs.ModelView=a.dia.ElementView.extend(a.shapes.basic.PortsViewInterface),a.shapes.devs.AtomicView=a.shapes.devs.ModelView,a.shapes.devs.CoupledView=a.shapes.devs.ModelView,a.shapes.uml={},a.shapes.uml.Class=a.shapes.basic.Generic.extend({markup:['<g class="rotatable">','<g class="scalable">','<rect class="uml-class-name-rect"/><rect class="uml-class-attrs-rect"/><rect class="uml-class-methods-rect"/>',"</g>",'<text class="uml-class-name-text"/><text class="uml-class-attrs-text"/><text class="uml-class-methods-text"/>',"</g>"].join(""),defaults:a.util.deepSupplement({type:"uml.Class",attrs:{rect:{width:200},".uml-class-name-rect":{stroke:"black","stroke-width":2,fill:"#3498db"},".uml-class-attrs-rect":{stroke:"black","stroke-width":2,fill:"#2980b9"},".uml-class-methods-rect":{stroke:"black","stroke-width":2,fill:"#2980b9"},".uml-class-name-text":{ref:".uml-class-name-rect","ref-y":.5,"ref-x":.5,"text-anchor":"middle","y-alignment":"middle","font-weight":"bold",fill:"black","font-size":12,"font-family":"Times New Roman"},".uml-class-attrs-text":{ref:".uml-class-attrs-rect","ref-y":5,"ref-x":5,fill:"black","font-size":12,"font-family":"Times New Roman"},".uml-class-methods-text":{ref:".uml-class-methods-rect","ref-y":5,"ref-x":5,fill:"black","font-size":12,"font-family":"Times New Roman"}},name:[],attributes:[],methods:[]},a.shapes.basic.Generic.prototype.defaults),initialize:function(){this.on("change:name change:attributes change:methods",function(){this.updateRectangles(),this.trigger("uml-update")},this),this.updateRectangles(),a.shapes.basic.Generic.prototype.initialize.apply(this,arguments)},getClassName:function(){return this.get("name")},updateRectangles:function(){var t=this.get("attrs"),e=[{type:"name",text:this.getClassName()},{type:"attrs",text:this.get("attributes")},{type:"methods",text:this.get("methods")}],i=0;n.each(e,function(e){var r=n.isArray(e.text)?e.text:[e.text],o=20*r.length+20;t[".uml-class-"+e.type+"-text"].text=r.join("\n"),t[".uml-class-"+e.type+"-rect"].height=o,t[".uml-class-"+e.type+"-rect"].transform="translate(0,"+i+")",i+=o})}}),a.shapes.uml.ClassView=a.dia.ElementView.extend({initialize:function(){a.dia.ElementView.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"uml-update",function(){this.update(),this.resize()})}}),a.shapes.uml.Abstract=a.shapes.uml.Class.extend({defaults:a.util.deepSupplement({type:"uml.Abstract",attrs:{".uml-class-name-rect":{fill:"#e74c3c"},".uml-class-attrs-rect":{fill:"#c0392b"},".uml-class-methods-rect":{fill:"#c0392b"}}},a.shapes.uml.Class.prototype.defaults),getClassName:function(){return["<<Abstract>>",this.get("name")]}}),a.shapes.uml.AbstractView=a.shapes.uml.ClassView,a.shapes.uml.Interface=a.shapes.uml.Class.extend({defaults:a.util.deepSupplement({type:"uml.Interface",attrs:{".uml-class-name-rect":{fill:"#f1c40f"},".uml-class-attrs-rect":{fill:"#f39c12"},".uml-class-methods-rect":{fill:"#f39c12"}}},a.shapes.uml.Class.prototype.defaults),getClassName:function(){return["<<Interface>>",this.get("name")]}}),a.shapes.uml.InterfaceView=a.shapes.uml.ClassView,a.shapes.uml.Generalization=a.dia.Link.extend({defaults:{type:"uml.Generalization",attrs:{".marker-target":{d:"M 20 0 L 0 10 L 20 20 z",fill:"white"}}}}),a.shapes.uml.Implementation=a.dia.Link.extend({defaults:{type:"uml.Implementation",attrs:{".marker-target":{d:"M 20 0 L 0 10 L 20 20 z",fill:"white"},".connection":{"stroke-dasharray":"3,3"}}}}),a.shapes.uml.Aggregation=a.dia.Link.extend({defaults:{type:"uml.Aggregation",attrs:{".marker-target":{d:"M 40 10 L 20 20 L 0 10 L 20 0 z",fill:"white"}}}}),a.shapes.uml.Composition=a.dia.Link.extend({defaults:{type:"uml.Composition",attrs:{".marker-target":{d:"M 40 10 L 20 20 L 0 10 L 20 0 z",fill:"black"}}}}),a.shapes.uml.Association=a.dia.Link.extend({defaults:{type:"uml.Association"}}),a.shapes.uml.State=a.shapes.basic.Generic.extend({markup:['<g class="rotatable">','<g class="scalable">','<rect class="uml-state-body"/>',"</g>",'<path class="uml-state-separator"/>','<text class="uml-state-name"/>','<text class="uml-state-events"/>',"</g>"].join(""),defaults:a.util.deepSupplement({type:"uml.State",attrs:{".uml-state-body":{width:200,height:200,rx:10,ry:10,fill:"#ecf0f1",stroke:"#bdc3c7","stroke-width":3},".uml-state-separator":{stroke:"#bdc3c7","stroke-width":2},".uml-state-name":{ref:".uml-state-body","ref-x":.5,"ref-y":5,"text-anchor":"middle",fill:"#000000","font-family":"Courier New","font-size":14},".uml-state-events":{ref:".uml-state-separator","ref-x":5,"ref-y":5,fill:"#000000","font-family":"Courier New","font-size":14}},name:"State",events:[]},a.shapes.basic.Generic.prototype.defaults),initialize:function(){this.on({"change:name":this.updateName,"change:events":this.updateEvents,"change:size":this.updatePath},this),this.updateName(),this.updateEvents(),this.updatePath(),a.shapes.basic.Generic.prototype.initialize.apply(this,arguments)},updateName:function(){this.attr(".uml-state-name/text",this.get("name"))},updateEvents:function(){this.attr(".uml-state-events/text",this.get("events").join("\n"))},updatePath:function(){var t="M 0 20 L "+this.get("size").width+" 20";this.attr(".uml-state-separator/d",t,{silent:!0})}}),a.shapes.uml.StartState=a.shapes.basic.Circle.extend({defaults:a.util.deepSupplement({type:"uml.StartState",attrs:{circle:{fill:"#34495e",stroke:"#2c3e50","stroke-width":2,rx:1}}},a.shapes.basic.Circle.prototype.defaults)}),a.shapes.uml.EndState=a.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><circle class="outer"/><circle class="inner"/></g></g>',defaults:a.util.deepSupplement({type:"uml.EndState",size:{width:20,height:20},attrs:{"circle.outer":{transform:"translate(10, 10)",r:10,fill:"#ffffff",stroke:"#2c3e50"},"circle.inner":{transform:"translate(10, 10)",r:6,fill:"#34495e"}}},a.shapes.basic.Generic.prototype.defaults)}),a.shapes.uml.Transition=a.dia.Link.extend({defaults:{type:"uml.Transition",attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z",fill:"#34495e",stroke:"#2c3e50"},".connection":{stroke:"#2c3e50"}}}}),a.shapes.logic={},a.shapes.logic.Gate=a.shapes.basic.Generic.extend({defaults:a.util.deepSupplement({type:"logic.Gate",size:{width:80,height:40},attrs:{".":{magnet:!1},".body":{width:100,height:50},circle:{r:7,stroke:"black",fill:"transparent","stroke-width":2}}},a.shapes.basic.Generic.prototype.defaults),operation:function(){return!0}}),a.shapes.logic.IO=a.shapes.logic.Gate.extend({markup:'<g class="rotatable"><g class="scalable"><rect class="body"/></g><path class="wire"/><circle/><text/></g>',defaults:a.util.deepSupplement({type:"logic.IO",size:{width:60,height:30},attrs:{".body":{fill:"white",stroke:"black","stroke-width":2},".wire":{ref:".body","ref-y":.5,stroke:"black"},text:{fill:"black",ref:".body","ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle","font-weight":"bold","font-variant":"small-caps","text-transform":"capitalize","font-size":"14px"}}},a.shapes.logic.Gate.prototype.defaults)}),a.shapes.logic.Input=a.shapes.logic.IO.extend({defaults:a.util.deepSupplement({type:"logic.Input",attrs:{".wire":{"ref-dx":0,d:"M 0 0 L 23 0"},circle:{ref:".body","ref-dx":30,"ref-y":.5,magnet:!0,"class":"output",port:"out"},text:{text:"input"}}},a.shapes.logic.IO.prototype.defaults)}),a.shapes.logic.Output=a.shapes.logic.IO.extend({defaults:a.util.deepSupplement({type:"logic.Output",attrs:{".wire":{"ref-x":0,d:"M 0 0 L -23 0"},circle:{ref:".body","ref-x":-30,"ref-y":.5,magnet:"passive","class":"input",port:"in"},text:{text:"output"}}},a.shapes.logic.IO.prototype.defaults)}),a.shapes.logic.Gate11=a.shapes.logic.Gate.extend({markup:'<g class="rotatable"><g class="scalable"><image class="body"/></g><circle class="input"/><circle class="output"/></g>',defaults:a.util.deepSupplement({type:"logic.Gate11",attrs:{".input":{ref:".body","ref-x":-2,"ref-y":.5,magnet:"passive",port:"in"},".output":{ref:".body","ref-dx":2,"ref-y":.5,magnet:!0,port:"out"}}},a.shapes.logic.Gate.prototype.defaults)}),a.shapes.logic.Gate21=a.shapes.logic.Gate.extend({markup:'<g class="rotatable"><g class="scalable"><image class="body"/></g><circle class="input input1"/><circle  class="input input2"/><circle class="output"/></g>',defaults:a.util.deepSupplement({type:"logic.Gate21",attrs:{".input1":{ref:".body","ref-x":-2,"ref-y":.3,magnet:"passive",port:"in1"},".input2":{ref:".body","ref-x":-2,"ref-y":.7,magnet:"passive",port:"in2"},".output":{ref:".body","ref-dx":2,"ref-y":.5,magnet:!0,port:"out"}}},a.shapes.logic.Gate.prototype.defaults)}),a.shapes.logic.Repeater=a.shapes.logic.Gate11.extend({defaults:a.util.deepSupplement({type:"logic.Repeater",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PVCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjgiCiAgICAgaW5rc2NhcGU6Y3g9Ijg0LjY4NTM1MiIKICAgICBpbmtzY2FwZTpjeT0iMTUuMjg4NjI4IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzIuMTU2OTEsMjUgTCA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAyOS4wNDM0NzgsMjUgTCA1LjA0MzQ3ODEsMjUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgZD0iTSAyOC45Njg3NSwyLjU5Mzc1IEwgMjguOTY4NzUsNSBMIDI4Ljk2ODc1LDQ1IEwgMjguOTY4NzUsNDcuNDA2MjUgTCAzMS4xMjUsNDYuMzQzNzUgTCA3Mi4xNTYyNSwyNi4zNDM3NSBMIDcyLjE1NjI1LDIzLjY1NjI1IEwgMzEuMTI1LDMuNjU2MjUgTCAyOC45Njg3NSwyLjU5Mzc1IHogTSAzMS45Njg3NSw3LjQwNjI1IEwgNjguMDkzNzUsMjUgTCAzMS45Njg3NSw0Mi41OTM3NSBMIDMxLjk2ODc1LDcuNDA2MjUgeiIKICAgICAgIGlkPSJwYXRoMjYzOCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2NjY2NjYyIgLz4KICA8L2c+Cjwvc3ZnPgo="
}}},a.shapes.logic.Gate11.prototype.defaults),operation:function(t){return t}}),a.shapes.logic.Not=a.shapes.logic.Gate11.extend({defaults:a.util.deepSupplement({type:"logic.Not",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PVCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjgiCiAgICAgaW5rc2NhcGU6Y3g9Ijg0LjY4NTM1MiIKICAgICBpbmtzY2FwZTpjeT0iMTUuMjg4NjI4IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzkuMTU2OTEsMjUgTCA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAyOS4wNDM0NzgsMjUgTCA1LjA0MzQ3ODEsMjUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgZD0iTSAyOC45Njg3NSwyLjU5Mzc1IEwgMjguOTY4NzUsNSBMIDI4Ljk2ODc1LDQ1IEwgMjguOTY4NzUsNDcuNDA2MjUgTCAzMS4xMjUsNDYuMzQzNzUgTCA3Mi4xNTYyNSwyNi4zNDM3NSBMIDcyLjE1NjI1LDIzLjY1NjI1IEwgMzEuMTI1LDMuNjU2MjUgTCAyOC45Njg3NSwyLjU5Mzc1IHogTSAzMS45Njg3NSw3LjQwNjI1IEwgNjguMDkzNzUsMjUgTCAzMS45Njg3NSw0Mi41OTM3NSBMIDMxLjk2ODc1LDcuNDA2MjUgeiIKICAgICAgIGlkPSJwYXRoMjYzOCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2NjY2NjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDI2NzEiCiAgICAgICBzb2RpcG9kaTpjeD0iNzYiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA4MCwyNSBBIDQsNCAwIDEgMSA3MiwyNSBBIDQsNCAwIDEgMSA4MCwyNSB6IgogICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEsMCkiIC8+CiAgPC9nPgo8L3N2Zz4K"}}},a.shapes.logic.Gate11.prototype.defaults),operation:function(t){return!t}}),a.shapes.logic.Or=a.shapes.logic.Gate21.extend({defaults:a.util.deepSupplement({type:"logic.Or",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik9SIEFOU0kuc3ZnIgogICBpbmtzY2FwZTpvdXRwdXRfZXh0ZW5zaW9uPSJvcmcuaW5rc2NhcGUub3V0cHV0LnN2Zy5pbmtzY2FwZSI+CiAgPGRlZnMKICAgICBpZD0iZGVmczQiPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjUwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjI1IDogMTAgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjcxNCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iMSA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMC41IDogMC4zMzMzMzMzMyA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyODA2IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyODE5IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjM3Mi4wNDcyNCA6IDM1MC43ODczOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI3NDQuMDk0NDggOiA1MjYuMTgxMDkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzc3IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49Ijc1IDogNDAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iMTUwIDogNjAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDYwIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTMyNzUiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNTAgOiAzMy4zMzMzMzMgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iMTAwIDogNTAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDUwIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTU1MzMiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzIgOiAyMS4zMzMzMzMgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNjQgOiAzMiA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMzIgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjU1NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDE2LjY2NjY2NyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDI1IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAyNSA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogIDwvZGVmcz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iNCIKICAgICBpbmtzY2FwZTpjeD0iMTEzLjAwMDM5IgogICAgIGlua3NjYXBlOmN5PSIxMi44OTM3MzEiCiAgICAgaW5rc2NhcGU6ZG9jdW1lbnQtdW5pdHM9InB4IgogICAgIGlua3NjYXBlOmN1cnJlbnQtbGF5ZXI9ImcyNTYwIgogICAgIHNob3dncmlkPSJmYWxzZSIKICAgICBpbmtzY2FwZTpncmlkLWJib3g9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1wb2ludHM9InRydWUiCiAgICAgZ3JpZHRvbGVyYW5jZT0iMTAwMDAiCiAgICAgaW5rc2NhcGU6d2luZG93LXdpZHRoPSIxMzk5IgogICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9Ijg3NCIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMzciCiAgICAgaW5rc2NhcGU6d2luZG93LXk9Ii00IgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Im0gNzAsMjUgYyAyMCwwIDI1LDAgMjUsMCIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMSwxNSA1LDE1IgogICAgICAgaWQ9InBhdGgzMDYxIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzIsMzUgNSwzNSIKICAgICAgIGlkPSJwYXRoMzk0NCIgLz4KICAgIDxnCiAgICAgICBpZD0iZzI1NjAiCiAgICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICAgIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2LjUsLTM5LjUpIj4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjQwNjI1LDQ0LjUgTCAtMC40MDYyNSw0Ni45Mzc1IEMgLTAuNDA2MjUsNDYuOTM3NSA1LjI1LDUzLjkzNzU0OSA1LjI1LDY0LjUgQyA1LjI1LDc1LjA2MjQ1MSAtMC40MDYyNSw4Mi4wNjI1IC0wLjQwNjI1LDgyLjA2MjUgTCAtMi40MDYyNSw4NC41IEwgMC43NSw4NC41IEwgMTQuNzUsODQuNSBDIDE3LjE1ODA3Niw4NC41MDAwMDEgMjIuNDM5Njk5LDg0LjUyNDUxNCAyOC4zNzUsODIuMDkzNzUgQyAzNC4zMTAzMDEsNzkuNjYyOTg2IDQwLjkxMTUzNiw3NC43NTA0ODQgNDYuMDYyNSw2NS4yMTg3NSBMIDQ0Ljc1LDY0LjUgTCA0Ni4wNjI1LDYzLjc4MTI1IEMgMzUuNzU5Mzg3LDQ0LjcxNTU5IDE5LjUwNjU3NCw0NC41IDE0Ljc1LDQ0LjUgTCAwLjc1LDQ0LjUgTCAtMi40MDYyNSw0NC41IHogTSAzLjQ2ODc1LDQ3LjUgTCAxNC43NSw0Ny41IEMgMTkuNDM0MTczLDQ3LjUgMzMuMDM2ODUsNDcuMzY5NzkzIDQyLjcxODc1LDY0LjUgQyAzNy45NTE5NjQsNzIuOTI5MDc1IDMyLjE5NzQ2OSw3Ny4xODM5MSAyNyw3OS4zMTI1IEMgMjEuNjM5MzM5LDgxLjUwNzkyNCAxNy4xNTgwNzUsODEuNTAwMDAxIDE0Ljc1LDgxLjUgTCAzLjUsODEuNSBDIDUuMzczNTg4NCw3OC4zOTE1NjYgOC4yNSw3Mi40NTA2NSA4LjI1LDY0LjUgQyA4LjI1LDU2LjUyNjY0NiA1LjM0MTQ2ODYsNTAuNTk5ODE1IDMuNDY4NzUsNDcuNSB6IgogICAgICAgICBpZD0icGF0aDQ5NzMiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NzY2NjY3NjY2NjY2NjY2NzY2NzYyIgLz4KICAgIDwvZz4KICA8L2c+Cjwvc3ZnPgo="}}},a.shapes.logic.Gate21.prototype.defaults),operation:function(t,e){return t||e}}),a.shapes.logic.And=a.shapes.logic.Gate21.extend({defaults:a.util.deepSupplement({type:"logic.And",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IkFORCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgPC9kZWZzPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0iYmFzZSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp6b29tPSI4IgogICAgIGlua3NjYXBlOmN4PSI1Ni42OTgzNDgiCiAgICAgaW5rc2NhcGU6Y3k9IjI1LjMyNjg5OSIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJtIDcwLDI1IGMgMjAsMCAyNSwwIDI1LDAiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEsMTUgNSwxNSIKICAgICAgIGlkPSJwYXRoMzA2MSIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjk5OTk5OTg4O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMyLDM1IDUsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZvbnQtc2l6ZTptZWRpdW07Zm9udC1zdHlsZTpub3JtYWw7Zm9udC12YXJpYW50Om5vcm1hbDtmb250LXdlaWdodDpub3JtYWw7Zm9udC1zdHJldGNoOm5vcm1hbDt0ZXh0LWluZGVudDowO3RleHQtYWxpZ246c3RhcnQ7dGV4dC1kZWNvcmF0aW9uOm5vbmU7bGluZS1oZWlnaHQ6bm9ybWFsO2xldHRlci1zcGFjaW5nOm5vcm1hbDt3b3JkLXNwYWNpbmc6bm9ybWFsO3RleHQtdHJhbnNmb3JtOm5vbmU7ZGlyZWN0aW9uOmx0cjtibG9jay1wcm9ncmVzc2lvbjp0Yjt3cml0aW5nLW1vZGU6bHItdGI7dGV4dC1hbmNob3I6c3RhcnQ7ZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDozO21hcmtlcjpub25lO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGU7Zm9udC1mYW1pbHk6Qml0c3RyZWFtIFZlcmEgU2FuczstaW5rc2NhcGUtZm9udC1zcGVjaWZpY2F0aW9uOkJpdHN0cmVhbSBWZXJhIFNhbnMiCiAgICAgICBkPSJNIDMwLDUgTCAzMCw2LjQyODU3MTQgTCAzMCw0My41NzE0MjkgTCAzMCw0NSBMIDMxLjQyODU3MSw0NSBMIDUwLjQ3NjE5LDQ1IEMgNjEuNzQ0MDk4LDQ1IDcwLjQ3NjE5LDM1Ljk5OTk1NSA3MC40NzYxOSwyNSBDIDcwLjQ3NjE5LDE0LjAwMDA0NSA2MS43NDQwOTksNS4wMDAwMDAyIDUwLjQ3NjE5LDUgQyA1MC40NzYxOSw1IDUwLjQ3NjE5LDUgMzEuNDI4NTcxLDUgTCAzMCw1IHogTSAzMi44NTcxNDMsNy44NTcxNDI5IEMgNDAuODM0MjY0LDcuODU3MTQyOSA0NS45MTgzNjgsNy44NTcxNDI5IDQ4LjA5NTIzOCw3Ljg1NzE0MjkgQyA0OS4yODU3MTQsNy44NTcxNDI5IDQ5Ljg4MDk1Miw3Ljg1NzE0MjkgNTAuMTc4NTcxLDcuODU3MTQyOSBDIDUwLjMyNzM4MSw3Ljg1NzE0MjkgNTAuNDA5MjI3LDcuODU3MTQyOSA1MC40NDY0MjksNy44NTcxNDI5IEMgNTAuNDY1MDI5LDcuODU3MTQyOSA1MC40NzE1NDMsNy44NTcxNDI5IDUwLjQ3NjE5LDcuODU3MTQyOSBDIDYwLjIzNjg1Myw3Ljg1NzE0MyA2Ny4xNDI4NTcsMTUuNDk3MDk4IDY3LjE0Mjg1NywyNSBDIDY3LjE0Mjg1NywzNC41MDI5MDIgNTkuNzYwNjYyLDQyLjE0Mjg1NyA1MCw0Mi4xNDI4NTcgTCAzMi44NTcxNDMsNDIuMTQyODU3IEwgMzIuODU3MTQzLDcuODU3MTQyOSB6IgogICAgICAgaWQ9InBhdGgyODg0IgogICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2NjY2NzY2NjY3Nzc3NzY2NjIiAvPgogIDwvZz4KPC9zdmc+Cg=="}}},a.shapes.logic.Gate21.prototype.defaults),operation:function(t,e){return t&&e}}),a.shapes.logic.Nor=a.shapes.logic.Gate21.extend({defaults:a.util.deepSupplement({type:"logic.Nor",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PUiBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjEiCiAgICAgaW5rc2NhcGU6Y3g9Ijc4LjY3NzY0NCIKICAgICBpbmtzY2FwZTpjeT0iMjIuMTAyMzQ0IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjM3IgogICAgIGlua3NjYXBlOndpbmRvdy15PSItNCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDc5LDI1IEMgOTksMjUgOTUsMjUgOTUsMjUiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEsMTUgNSwxNSIKICAgICAgIGlkPSJwYXRoMzA2MSIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjk5OTk5OTg4O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMyLDM1IDUsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8ZwogICAgICAgaWQ9ImcyNTYwIgogICAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi41LC0zOS41KSI+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi40MDYyNSw0NC41IEwgLTAuNDA2MjUsNDYuOTM3NSBDIC0wLjQwNjI1LDQ2LjkzNzUgNS4yNSw1My45Mzc1NDkgNS4yNSw2NC41IEMgNS4yNSw3NS4wNjI0NTEgLTAuNDA2MjUsODIuMDYyNSAtMC40MDYyNSw4Mi4wNjI1IEwgLTIuNDA2MjUsODQuNSBMIDAuNzUsODQuNSBMIDE0Ljc1LDg0LjUgQyAxNy4xNTgwNzYsODQuNTAwMDAxIDIyLjQzOTY5OSw4NC41MjQ1MTQgMjguMzc1LDgyLjA5Mzc1IEMgMzQuMzEwMzAxLDc5LjY2Mjk4NiA0MC45MTE1MzYsNzQuNzUwNDg0IDQ2LjA2MjUsNjUuMjE4NzUgTCA0NC43NSw2NC41IEwgNDYuMDYyNSw2My43ODEyNSBDIDM1Ljc1OTM4Nyw0NC43MTU1OSAxOS41MDY1NzQsNDQuNSAxNC43NSw0NC41IEwgMC43NSw0NC41IEwgLTIuNDA2MjUsNDQuNSB6IE0gMy40Njg3NSw0Ny41IEwgMTQuNzUsNDcuNSBDIDE5LjQzNDE3Myw0Ny41IDMzLjAzNjg1LDQ3LjM2OTc5MyA0Mi43MTg3NSw2NC41IEMgMzcuOTUxOTY0LDcyLjkyOTA3NSAzMi4xOTc0NjksNzcuMTgzOTEgMjcsNzkuMzEyNSBDIDIxLjYzOTMzOSw4MS41MDc5MjQgMTcuMTU4MDc1LDgxLjUwMDAwMSAxNC43NSw4MS41IEwgMy41LDgxLjUgQyA1LjM3MzU4ODQsNzguMzkxNTY2IDguMjUsNzIuNDUwNjUgOC4yNSw2NC41IEMgOC4yNSw1Ni41MjY2NDYgNS4zNDE0Njg2LDUwLjU5OTgxNSAzLjQ2ODc1LDQ3LjUgeiIKICAgICAgICAgaWQ9InBhdGg0OTczIgogICAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjc2NjY2NzY2NjY2NjY2Njc2Njc2MiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHNvZGlwb2RpOnR5cGU9ImFyYyIKICAgICAgICAgc3R5bGU9ImZpbGw6bm9uZTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgICBpZD0icGF0aDI2MDQiCiAgICAgICAgIHNvZGlwb2RpOmN4PSI3NSIKICAgICAgICAgc29kaXBvZGk6Y3k9IjI1IgogICAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgICAgc29kaXBvZGk6cnk9IjQiCiAgICAgICAgIGQ9Ik0gNzksMjUgQSA0LDQgMCAxIDEgNzEsMjUgQSA0LDQgMCAxIDEgNzksMjUgeiIKICAgICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI2LjUsMzkuNSkiIC8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"}}},a.shapes.logic.Gate21.prototype.defaults),operation:function(t,e){return!(t||e)}}),a.shapes.logic.Nand=a.shapes.logic.Gate21.extend({defaults:a.util.deepSupplement({type:"logic.Nand",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5BTkQgQU5TSS5zdmciCiAgIGlua3NjYXBlOm91dHB1dF9leHRlbnNpb249Im9yZy5pbmtzY2FwZS5vdXRwdXQuc3ZnLmlua3NjYXBlIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzNCI+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxMCA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzE0IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIwLjUgOiAwLjMzMzMzMzMzIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MDYiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MTkiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzcyLjA0NzI0IDogMzUwLjc4NzM5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9Ijc0NC4wOTQ0OCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTI2LjE4MTA5IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3NzciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNzUgOiA0MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxNTAgOiA2MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNjAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMzI3NSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI1MCA6IDMzLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxMDAgOiA1MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlNTUzMyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzMiA6IDIxLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI2NCA6IDMyIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAzMiA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogIDwvZGVmcz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iMTYiCiAgICAgaW5rc2NhcGU6Y3g9Ijc4LjI4MzMwNyIKICAgICBpbmtzY2FwZTpjeT0iMTYuNDQyODQzIgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzksMjUgQyA5MS44LDI1IDk1LDI1IDk1LDI1IgogICAgICAgaWQ9InBhdGgzMDU5IgogICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMxLDE1IDUsMTUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk4ODtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMiwzNSA1LDM1IgogICAgICAgaWQ9InBhdGgzOTQ0IiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmb250LXNpemU6bWVkaXVtO2ZvbnQtc3R5bGU6bm9ybWFsO2ZvbnQtdmFyaWFudDpub3JtYWw7Zm9udC13ZWlnaHQ6bm9ybWFsO2ZvbnQtc3RyZXRjaDpub3JtYWw7dGV4dC1pbmRlbnQ6MDt0ZXh0LWFsaWduOnN0YXJ0O3RleHQtZGVjb3JhdGlvbjpub25lO2xpbmUtaGVpZ2h0Om5vcm1hbDtsZXR0ZXItc3BhY2luZzpub3JtYWw7d29yZC1zcGFjaW5nOm5vcm1hbDt0ZXh0LXRyYW5zZm9ybTpub25lO2RpcmVjdGlvbjpsdHI7YmxvY2stcHJvZ3Jlc3Npb246dGI7d3JpdGluZy1tb2RlOmxyLXRiO3RleHQtYW5jaG9yOnN0YXJ0O2ZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MzttYXJrZXI6bm9uZTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlO2ZvbnQtZmFtaWx5OkJpdHN0cmVhbSBWZXJhIFNhbnM7LWlua3NjYXBlLWZvbnQtc3BlY2lmaWNhdGlvbjpCaXRzdHJlYW0gVmVyYSBTYW5zIgogICAgICAgZD0iTSAzMCw1IEwgMzAsNi40Mjg1NzE0IEwgMzAsNDMuNTcxNDI5IEwgMzAsNDUgTCAzMS40Mjg1NzEsNDUgTCA1MC40NzYxOSw0NSBDIDYxLjc0NDA5OCw0NSA3MC40NzYxOSwzNS45OTk5NTUgNzAuNDc2MTksMjUgQyA3MC40NzYxOSwxNC4wMDAwNDUgNjEuNzQ0MDk5LDUuMDAwMDAwMiA1MC40NzYxOSw1IEMgNTAuNDc2MTksNSA1MC40NzYxOSw1IDMxLjQyODU3MSw1IEwgMzAsNSB6IE0gMzIuODU3MTQzLDcuODU3MTQyOSBDIDQwLjgzNDI2NCw3Ljg1NzE0MjkgNDUuOTE4MzY4LDcuODU3MTQyOSA0OC4wOTUyMzgsNy44NTcxNDI5IEMgNDkuMjg1NzE0LDcuODU3MTQyOSA0OS44ODA5NTIsNy44NTcxNDI5IDUwLjE3ODU3MSw3Ljg1NzE0MjkgQyA1MC4zMjczODEsNy44NTcxNDI5IDUwLjQwOTIyNyw3Ljg1NzE0MjkgNTAuNDQ2NDI5LDcuODU3MTQyOSBDIDUwLjQ2NTAyOSw3Ljg1NzE0MjkgNTAuNDcxNTQzLDcuODU3MTQyOSA1MC40NzYxOSw3Ljg1NzE0MjkgQyA2MC4yMzY4NTMsNy44NTcxNDMgNjcuMTQyODU3LDE1LjQ5NzA5OCA2Ny4xNDI4NTcsMjUgQyA2Ny4xNDI4NTcsMzQuNTAyOTAyIDU5Ljc2MDY2Miw0Mi4xNDI4NTcgNTAsNDIuMTQyODU3IEwgMzIuODU3MTQzLDQyLjE0Mjg1NyBMIDMyLjg1NzE0Myw3Ljg1NzE0MjkgeiIKICAgICAgIGlkPSJwYXRoMjg4NCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2Njc2NjY2Nzc3Nzc2NjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDQwMDgiCiAgICAgICBzb2RpcG9kaTpjeD0iNzUiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA3OSwyNSBBIDQsNCAwIDEgMSA3MSwyNSBBIDQsNCAwIDEgMSA3OSwyNSB6IiAvPgogIDwvZz4KPC9zdmc+Cg=="
}}},a.shapes.logic.Gate21.prototype.defaults),operation:function(t,e){return!(t&&e)}}),a.shapes.logic.Xor=a.shapes.logic.Gate21.extend({defaults:a.util.deepSupplement({type:"logic.Xor",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IlhPUiBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjUuNjU2ODU0MiIKICAgICBpbmtzY2FwZTpjeD0iMjUuOTM4MTE2IgogICAgIGlua3NjYXBlOmN5PSIxNy4yMzAwNSIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJtIDcwLDI1IGMgMjAsMCAyNSwwIDI1LDAiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzAuMzg1NzE3LDE1IEwgNC45OTk5OTk4LDE1IgogICAgICAgaWQ9InBhdGgzMDYxIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5NzY7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEuMzYyMDkxLDM1IEwgNC45OTk5OTk4LDM1IgogICAgICAgaWQ9InBhdGgzOTQ0IiAvPgogICAgPGcKICAgICAgIGlkPSJnMjU2MCIKICAgICAgIGlua3NjYXBlOmxhYmVsPSJMYXllciAxIgogICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjYuNSwtMzkuNSkiPgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDM1MTYiCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi4yNSw4MS41MDAwMDUgQyAtMy44NDczNzQsODQuMTQ0NDA1IC00LjUsODQuNTAwMDA1IC00LjUsODQuNTAwMDA1IEwgLTguMTU2MjUsODQuNTAwMDA1IEwgLTYuMTU2MjUsODIuMDYyNTA1IEMgLTYuMTU2MjUsODIuMDYyNTA1IC0wLjUsNzUuMDYyNDUxIC0wLjUsNjQuNSBDIC0wLjUsNTMuOTM3NTQ5IC02LjE1NjI1LDQ2LjkzNzUgLTYuMTU2MjUsNDYuOTM3NSBMIC04LjE1NjI1LDQ0LjUgTCAtNC41LDQ0LjUgQyAtMy43MTg3NSw0NS40Mzc1IC0zLjA3ODEyNSw0Ni4xNTYyNSAtMi4yODEyNSw0Ny41IEMgLTAuNDA4NTMxLDUwLjU5OTgxNSAyLjUsNTYuNTI2NjQ2IDIuNSw2NC41IEMgMi41LDcyLjQ1MDY1IC0wLjM5NjY5Nyw3OC4zNzk0MjUgLTIuMjUsODEuNTAwMDA1IHoiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY3NjY2Njc2MiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi40MDYyNSw0NC41IEwgLTAuNDA2MjUsNDYuOTM3NSBDIC0wLjQwNjI1LDQ2LjkzNzUgNS4yNSw1My45Mzc1NDkgNS4yNSw2NC41IEMgNS4yNSw3NS4wNjI0NTEgLTAuNDA2MjUsODIuMDYyNSAtMC40MDYyNSw4Mi4wNjI1IEwgLTIuNDA2MjUsODQuNSBMIDAuNzUsODQuNSBMIDE0Ljc1LDg0LjUgQyAxNy4xNTgwNzYsODQuNTAwMDAxIDIyLjQzOTY5OSw4NC41MjQ1MTQgMjguMzc1LDgyLjA5Mzc1IEMgMzQuMzEwMzAxLDc5LjY2Mjk4NiA0MC45MTE1MzYsNzQuNzUwNDg0IDQ2LjA2MjUsNjUuMjE4NzUgTCA0NC43NSw2NC41IEwgNDYuMDYyNSw2My43ODEyNSBDIDM1Ljc1OTM4Nyw0NC43MTU1OSAxOS41MDY1NzQsNDQuNSAxNC43NSw0NC41IEwgMC43NSw0NC41IEwgLTIuNDA2MjUsNDQuNSB6IE0gMy40Njg3NSw0Ny41IEwgMTQuNzUsNDcuNSBDIDE5LjQzNDE3Myw0Ny41IDMzLjAzNjg1LDQ3LjM2OTc5MyA0Mi43MTg3NSw2NC41IEMgMzcuOTUxOTY0LDcyLjkyOTA3NSAzMi4xOTc0NjksNzcuMTgzOTEgMjcsNzkuMzEyNSBDIDIxLjYzOTMzOSw4MS41MDc5MjQgMTcuMTU4MDc1LDgxLjUwMDAwMSAxNC43NSw4MS41IEwgMy41LDgxLjUgQyA1LjM3MzU4ODQsNzguMzkxNTY2IDguMjUsNzIuNDUwNjUgOC4yNSw2NC41IEMgOC4yNSw1Ni41MjY2NDYgNS4zNDE0Njg2LDUwLjU5OTgxNSAzLjQ2ODc1LDQ3LjUgeiIKICAgICAgICAgaWQ9InBhdGg0OTczIgogICAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjc2NjY2NzY2NjY2NjY2Njc2Njc2MiIC8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"}}},a.shapes.logic.Gate21.prototype.defaults),operation:function(t,e){return(!t||e)&&(t||!e)}}),a.shapes.logic.Xnor=a.shapes.logic.Gate21.extend({defaults:a.util.deepSupplement({type:"logic.Xnor",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IlhOT1IgQU5TSS5zdmciCiAgIGlua3NjYXBlOm91dHB1dF9leHRlbnNpb249Im9yZy5pbmtzY2FwZS5vdXRwdXQuc3ZnLmlua3NjYXBlIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzNCI+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxMCA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzE0IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIwLjUgOiAwLjMzMzMzMzMzIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MDYiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MTkiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzcyLjA0NzI0IDogMzUwLjc4NzM5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9Ijc0NC4wOTQ0OCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTI2LjE4MTA5IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3NzciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNzUgOiA0MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxNTAgOiA2MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNjAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMzI3NSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI1MCA6IDMzLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxMDAgOiA1MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlNTUzMyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzMiA6IDIxLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI2NCA6IDMyIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAzMiA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNTU3IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjI1IDogMTYuNjY2NjY3IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjUwIDogMjUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDI1IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgPC9kZWZzPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0iYmFzZSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp6b29tPSI0IgogICAgIGlua3NjYXBlOmN4PSI5NS43MjM2NiIKICAgICBpbmtzY2FwZTpjeT0iLTI2Ljc3NTAyMyIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyLjAwMDAwMDI0O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDc4LjMzMzMzMiwyNSBDIDkxLjY2NjY2NiwyNSA5NSwyNSA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk4ODtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMC4zODU3MTcsMTUgTCA0Ljk5OTk5OTgsMTUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk3NjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMS4zNjIwOTEsMzUgTCA0Ljk5OTk5OTgsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8ZwogICAgICAgaWQ9ImcyNTYwIgogICAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi41LC0zOS41KSI+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMzUxNiIKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjI1LDgxLjUwMDAwNSBDIC0zLjg0NzM3NCw4NC4xNDQ0MDUgLTQuNSw4NC41MDAwMDUgLTQuNSw4NC41MDAwMDUgTCAtOC4xNTYyNSw4NC41MDAwMDUgTCAtNi4xNTYyNSw4Mi4wNjI1MDUgQyAtNi4xNTYyNSw4Mi4wNjI1MDUgLTAuNSw3NS4wNjI0NTEgLTAuNSw2NC41IEMgLTAuNSw1My45Mzc1NDkgLTYuMTU2MjUsNDYuOTM3NSAtNi4xNTYyNSw0Ni45Mzc1IEwgLTguMTU2MjUsNDQuNSBMIC00LjUsNDQuNSBDIC0zLjcxODc1LDQ1LjQzNzUgLTMuMDc4MTI1LDQ2LjE1NjI1IC0yLjI4MTI1LDQ3LjUgQyAtMC40MDg1MzEsNTAuNTk5ODE1IDIuNSw1Ni41MjY2NDYgMi41LDY0LjUgQyAyLjUsNzIuNDUwNjUgLTAuMzk2Njk3LDc4LjM3OTQyNSAtMi4yNSw4MS41MDAwMDUgeiIKICAgICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2Njc2NjY2NzYyIgLz4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjQwNjI1LDQ0LjUgTCAtMC40MDYyNSw0Ni45Mzc1IEMgLTAuNDA2MjUsNDYuOTM3NSA1LjI1LDUzLjkzNzU0OSA1LjI1LDY0LjUgQyA1LjI1LDc1LjA2MjQ1MSAtMC40MDYyNSw4Mi4wNjI1IC0wLjQwNjI1LDgyLjA2MjUgTCAtMi40MDYyNSw4NC41IEwgMC43NSw4NC41IEwgMTQuNzUsODQuNSBDIDE3LjE1ODA3Niw4NC41MDAwMDEgMjIuNDM5Njk5LDg0LjUyNDUxNCAyOC4zNzUsODIuMDkzNzUgQyAzNC4zMTAzMDEsNzkuNjYyOTg2IDQwLjkxMTUzNiw3NC43NTA0ODQgNDYuMDYyNSw2NS4yMTg3NSBMIDQ0Ljc1LDY0LjUgTCA0Ni4wNjI1LDYzLjc4MTI1IEMgMzUuNzU5Mzg3LDQ0LjcxNTU5IDE5LjUwNjU3NCw0NC41IDE0Ljc1LDQ0LjUgTCAwLjc1LDQ0LjUgTCAtMi40MDYyNSw0NC41IHogTSAzLjQ2ODc1LDQ3LjUgTCAxNC43NSw0Ny41IEMgMTkuNDM0MTczLDQ3LjUgMzMuMDM2ODUsNDcuMzY5NzkzIDQyLjcxODc1LDY0LjUgQyAzNy45NTE5NjQsNzIuOTI5MDc1IDMyLjE5NzQ2OSw3Ny4xODM5MSAyNyw3OS4zMTI1IEMgMjEuNjM5MzM5LDgxLjUwNzkyNCAxNy4xNTgwNzUsODEuNTAwMDAxIDE0Ljc1LDgxLjUgTCAzLjUsODEuNSBDIDUuMzczNTg4NCw3OC4zOTE1NjYgOC4yNSw3Mi40NTA2NSA4LjI1LDY0LjUgQyA4LjI1LDU2LjUyNjY0NiA1LjM0MTQ2ODYsNTAuNTk5ODE1IDMuNDY4NzUsNDcuNSB6IgogICAgICAgICBpZD0icGF0aDQ5NzMiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NzY2NjY3NjY2NjY2NjY2NzY2NzYyIgLz4KICAgIDwvZz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDM1NTEiCiAgICAgICBzb2RpcG9kaTpjeD0iNzUiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA3OSwyNSBBIDQsNCAwIDEgMSA3MSwyNSBBIDQsNCAwIDEgMSA3OSwyNSB6IiAvPgogIDwvZz4KPC9zdmc+Cg=="}}},a.shapes.logic.Gate21.prototype.defaults),operation:function(t,e){return(!t||!e)&&(t||e)}}),a.shapes.logic.Wire=a.dia.Link.extend({arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<circle class="marker-arrowhead" end="<%= end %>" r="7"/>',"</g>"].join(""),vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<g class="marker-vertex-remove-group">','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>","</g>"].join(""),defaults:a.util.deepSupplement({type:"logic.Wire",attrs:{".connection":{"stroke-width":2},".marker-vertex":{r:7}},router:{name:"orthogonal"},connector:{name:"rounded",args:{radius:10}}},a.dia.Link.prototype.defaults)}),"object"==typeof exports)var l=require("graphlib"),c=require("dagre");return l=l||"undefined"!=typeof window&&window.graphlib,c=c||"undefined"!=typeof window&&window.dagre,a.dia.Graph.prototype.toGraphLib=function(t){t=t||{};var e=n.pick(t,"directed","compound","multigraph"),i=new l.Graph(e),r=t.setNodeLabel||n.noop,o=t.setEdgeLabel||n.noop,s=t.setEdgeName||n.noop;return this.get("cells").each(function(t){if(t.isLink()){var e=t.get("source"),n=t.get("target");if(!e.id||!n.id)return;i.setEdge(e.id,n.id,o(t),s(t))}else i.setNode(t.id,r(t)),i.isCompound()&&t.has("parent")&&i.setParent(t.id,t.get("parent"))}),i},a.dia.Graph.prototype.fromGraphLib=function(t,e){e=e||{};var i=e.importNode||n.noop,r=e.importEdge||n.noop;t.nodes().forEach(function(n){i.call(this,n,t,this,e)},this),t.edges().forEach(function(n){r.call(this,n,t,this,e)},this)},a.layout.DirectedGraph={layout:function(t,e){e=n.defaults(e||{},{resizeClusters:!0,clusterPadding:10});var i=t.toGraphLib({directed:!0,multigraph:!0,compound:!0,setNodeLabel:function(t){return{width:t.get("size").width,height:t.get("size").height,rank:t.get("rank")}},setEdgeLabel:function(t){return{minLen:t.get("minLen")||1}},setEdgeName:function(t){return t.id}}),r={};return e.rankDir&&(r.rankdir=e.rankDir),e.nodeSep&&(r.nodesep=e.nodeSep),e.edgeSep&&(r.edgesep=e.edgeSep),e.rankSep&&(r.ranksep=e.rankSep),e.marginX&&(r.marginx=e.marginX),e.marginY&&(r.marginy=e.marginY),i.setGraph(r),c.layout(i,{debugTiming:!!e.debugTiming}),t.fromGraphLib(i,{importNode:function(t,n){var i=this.getCell(t),r=n.node(t);e.setPosition?e.setPosition(i,r):i.set("position",{x:r.x-r.width/2,y:r.y-r.height/2})},importEdge:function(t,n){var i=this.getCell(t.name),r=n.edge(t);e.setLinkVertices&&(e.setVertices?e.setVertices(i,r.points):i.set("vertices",r.points))}}),e.resizeClusters&&n.chain(i.nodes()).filter(function(t){return i.children(t).length>0}).map(t.getCell,t).sortBy(function(t){return-t.getAncestors().length}).invoke("fitEmbeds",{padding:e.clusterPadding}).value(),i.graph()}},a.g=s,a.V=a.Vectorizer=r,a});